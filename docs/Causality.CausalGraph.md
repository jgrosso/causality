---
title: Causality.CausalGraph
---

Definitions and proofs about causal graphs.

<details>
<summary>Some initial bookkeeping.</summary>
<div>
<pre class="Agda"><a id="153" class="Symbol">{-#</a> <a id="157" class="Keyword">OPTIONS</a> <a id="165" class="Pragma">--without-K</a> <a id="177" class="Pragma">--safe</a> <a id="184" class="Symbol">#-}</a>

<a id="189" class="Keyword">module</a> <a id="196" href="Causality.CausalGraph.html" class="Module">Causality.CausalGraph</a> <a id="218" class="Keyword">where</a>
</pre>
We import some of the other files in this project (to see the documentation for a module, click on its name).

<pre class="Agda"><a id="348" class="Keyword">open</a> <a id="353" class="Keyword">import</a> <a id="360" href="Causality.Data.Fin.Subset.html" class="Module">Causality.Data.Fin.Subset</a>
<a id="386" class="Keyword">open</a> <a id="391" class="Keyword">import</a> <a id="398" href="Causality.Data.Graph.html" class="Module">Causality.Data.Graph</a>
<a id="419" class="Keyword">open</a> <a id="424" class="Keyword">import</a> <a id="431" href="Causality.Data.Graphoid.html" class="Module">Causality.Data.Graphoid</a>
<a id="455" class="Keyword">open</a> <a id="460" class="Keyword">import</a> <a id="467" href="Causality.Data.List.html" class="Module">Causality.Data.List</a>
</pre>
<details>
<summary>Standard library imports.</summary>
<div>
<pre class="Agda"><a id="561" class="Keyword">open</a> <a id="566" class="Keyword">import</a> <a id="573" href="Data.Fin.html" class="Module">Data.Fin</a> <a id="582" class="Keyword">using</a> <a id="588" class="Symbol">(</a><a id="589" href="Data.Fin.Base.html#1307" class="Datatype">Fin</a><a id="592" class="Symbol">)</a>
<a id="594" class="Keyword">open</a> <a id="599" class="Keyword">import</a> <a id="606" href="Data.Fin.Subset.html" class="Module">Data.Fin.Subset</a> <a id="622" class="Keyword">using</a> <a id="628" class="Symbol">(</a><a id="629" href="Data.Fin.Subset.html#1059" class="Function">Subset</a><a id="635" class="Symbol">;</a> <a id="637" href="Data.Fin.Subset.html#2378" class="Function">⋃</a><a id="638" class="Symbol">)</a>
<a id="640" class="Keyword">import</a> <a id="647" href="Data.Fin.Subset.html" class="Module">Data.Fin.Subset</a> <a id="663" class="Symbol">as</a> <a id="666" class="Module">Fin</a>
<a id="670" class="Keyword">import</a> <a id="677" href="Data.Fin.Subset.Properties.html" class="Module">Data.Fin.Subset.Properties</a> <a id="704" class="Symbol">as</a> <a id="707" class="Module">Fin</a>
<a id="711" class="Keyword">open</a> <a id="716" class="Keyword">import</a> <a id="723" href="Data.List.html" class="Module">Data.List</a> <a id="733" class="Keyword">using</a> <a id="739" class="Symbol">(</a><a id="740" href="Agda.Builtin.List.html#130" class="Datatype">List</a><a id="744" class="Symbol">;</a> <a id="746" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷_</a><a id="749" class="Symbol">;</a> <a id="751" href="Data.List.Base.html#7370" class="InductiveConstructor">[]</a><a id="753" class="Symbol">;</a> <a id="755" href="Data.List.Base.html#5067" class="Function">length</a><a id="761" class="Symbol">)</a>
<a id="763" class="Keyword">open</a> <a id="768" class="Keyword">import</a> <a id="775" href="Data.List.Relation.Unary.Linked.html" class="Module">Data.List.Relation.Unary.Linked</a> <a id="807" class="Keyword">using</a> <a id="813" class="Symbol">(</a><a id="814" href="Data.List.Relation.Unary.Linked.html#1312" class="Datatype">Linked</a><a id="820" class="Symbol">)</a>
<a id="822" class="Keyword">open</a> <a id="827" class="Keyword">import</a> <a id="834" href="Data.List.Relation.Unary.Unique.Propositional.html" class="Module">Data.List.Relation.Unary.Unique.Propositional</a> <a id="880" class="Keyword">using</a> <a id="886" class="Symbol">(</a><a id="887" href="Data.List.Relation.Unary.Unique.Setoid.html#737" class="Datatype">Unique</a><a id="893" class="Symbol">)</a>
<a id="895" class="Keyword">import</a> <a id="902" href="Data.List.Relation.Unary.Unique.Propositional.Properties.html" class="Module">Data.List.Relation.Unary.Unique.Propositional.Properties</a> <a id="959" class="Symbol">as</a> <a id="962" class="Module">Unique</a>
<a id="969" class="Keyword">open</a> <a id="974" class="Keyword">import</a> <a id="981" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="990" class="Keyword">using</a> <a id="996" class="Symbol">(</a><a id="997" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="998" class="Symbol">;</a> <a id="1000" href="Data.Nat.Base.html#1903" class="Function Operator">_≥_</a><a id="1003" class="Symbol">;</a> <a id="1005" href="Data.Nat.Base.html#1609" class="InductiveConstructor">s≤s</a><a id="1008" class="Symbol">)</a>
<a id="1010" class="Keyword">open</a> <a id="1015" class="Keyword">import</a> <a id="1022" href="Data.Product.html" class="Module">Data.Product</a> <a id="1035" class="Keyword">using</a> <a id="1041" class="Symbol">(</a><a id="1042" href="Data.Product.html#1094" class="Function">∃-syntax</a><a id="1050" class="Symbol">;</a> <a id="1052" href="Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="1053" class="Symbol">;</a> <a id="1055" href="Data.Product.Base.html#867" class="Function">Σ-syntax</a><a id="1063" class="Symbol">;</a> <a id="1065" href="Data.Product.Base.html#1118" class="Function Operator">_×_</a><a id="1068" class="Symbol">;</a> <a id="1070" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a><a id="1073" class="Symbol">)</a> <a id="1075" class="Keyword">renaming</a> <a id="1084" class="Symbol">(</a><a id="1085" href="Data.Product.Base.html#617" class="Field">proj₁</a> <a id="1091" class="Symbol">to</a> <a id="1094" class="Field">_₁</a><a id="1096" class="Symbol">)</a>
<a id="1098" class="Keyword">open</a> <a id="1103" class="Keyword">import</a> <a id="1110" href="Data.Sum.html" class="Module">Data.Sum</a> <a id="1119" class="Keyword">using</a> <a id="1125" class="Symbol">(</a><a id="1126" href="Data.Sum.Base.html#625" class="Datatype Operator">_⊎_</a><a id="1129" class="Symbol">)</a>
<a id="1131" class="Keyword">open</a> <a id="1136" class="Keyword">import</a> <a id="1143" href="Function.html" class="Module">Function</a> <a id="1152" class="Keyword">using</a> <a id="1158" class="Symbol">(</a><a id="1159" href="Function.Base.html#1115" class="Function Operator">_∘_</a><a id="1162" class="Symbol">;</a> <a id="1164" href="Function.Base.html#4062" class="Function Operator">case_of_</a><a id="1172" class="Symbol">)</a>
<a id="1174" class="Keyword">open</a> <a id="1179" class="Keyword">import</a> <a id="1186" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="1224" class="Keyword">using</a> <a id="1230" class="Symbol">(</a><a id="1231" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="1234" class="Symbol">;</a> <a id="1236" href="Relation.Binary.PropositionalEquality.Core.html#853" class="Function Operator">_≢_</a><a id="1239" class="Symbol">;</a> <a id="1241" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="1245" class="Symbol">)</a>
<a id="1247" class="Keyword">open</a> <a id="1252" class="Keyword">import</a> <a id="1259" href="Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="1276" class="Keyword">using</a> <a id="1282" class="Symbol">(</a><a id="1283" href="Relation.Nullary.Negation.Core.html#824" class="Function Operator">¬_</a><a id="1285" class="Symbol">;</a> <a id="1287" href="Relation.Nullary.Decidable.Core.html#2172" class="Function">¬?</a><a id="1289" class="Symbol">;</a> <a id="1291" href="Relation.Nullary.Negation.Core.html#1276" class="Function">contradiction</a><a id="1304" class="Symbol">)</a>
</pre></div>
</details>

<details>
<summary>Some utility functions, for use below.</summary>
<div>
<pre class="Agda"><a id="_-×-_"></a><a id="1411" href="Causality.CausalGraph.html#1411" class="Function Operator">_-×-_</a> <a id="1417" class="Symbol">:</a> <a id="1419" class="Symbol">∀</a> <a id="1421" class="Symbol">{</a><a id="1422" href="Causality.CausalGraph.html#1422" class="Bound">a</a> <a id="1424" href="Causality.CausalGraph.html#1424" class="Bound">b</a> <a id="1426" href="Causality.CausalGraph.html#1426" class="Bound">c</a><a id="1427" class="Symbol">}</a> <a id="1429" class="Symbol">{</a><a id="1430" href="Causality.CausalGraph.html#1430" class="Bound">A</a> <a id="1432" class="Symbol">:</a> <a id="1434" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1438" href="Causality.CausalGraph.html#1422" class="Bound">a</a><a id="1439" class="Symbol">}</a> <a id="1441" class="Symbol">→</a> <a id="1443" class="Symbol">(</a><a id="1444" href="Causality.CausalGraph.html#1430" class="Bound">A</a> <a id="1446" class="Symbol">→</a> <a id="1448" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1452" href="Causality.CausalGraph.html#1424" class="Bound">b</a><a id="1453" class="Symbol">)</a> <a id="1455" class="Symbol">→</a> <a id="1457" class="Symbol">(</a><a id="1458" href="Causality.CausalGraph.html#1430" class="Bound">A</a> <a id="1460" class="Symbol">→</a> <a id="1462" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1466" href="Causality.CausalGraph.html#1426" class="Bound">c</a><a id="1467" class="Symbol">)</a> <a id="1469" class="Symbol">→</a> <a id="1471" class="Symbol">(</a><a id="1472" href="Causality.CausalGraph.html#1430" class="Bound">A</a> <a id="1474" class="Symbol">→</a> <a id="1476" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1480" class="Symbol">_)</a>
<a id="1483" href="Causality.CausalGraph.html#1483" class="Bound">P</a> <a id="1485" href="Causality.CausalGraph.html#1411" class="Function Operator">-×-</a> <a id="1489" href="Causality.CausalGraph.html#1489" class="Bound">Q</a> <a id="1491" class="Symbol">=</a> <a id="1493" class="Symbol">λ</a> <a id="1495" href="Causality.CausalGraph.html#1495" class="Bound">x</a> <a id="1497" class="Symbol">→</a> <a id="1499" href="Causality.CausalGraph.html#1483" class="Bound">P</a> <a id="1501" href="Causality.CausalGraph.html#1495" class="Bound">x</a> <a id="1503" href="Data.Product.Base.html#1118" class="Function Operator">×</a> <a id="1505" href="Causality.CausalGraph.html#1489" class="Bound">Q</a> <a id="1507" href="Causality.CausalGraph.html#1495" class="Bound">x</a>

<a id="_-⊎-_"></a><a id="1510" href="Causality.CausalGraph.html#1510" class="Function Operator">_-⊎-_</a> <a id="1516" class="Symbol">:</a> <a id="1518" class="Symbol">∀</a> <a id="1520" class="Symbol">{</a><a id="1521" href="Causality.CausalGraph.html#1521" class="Bound">a</a> <a id="1523" href="Causality.CausalGraph.html#1523" class="Bound">b</a> <a id="1525" href="Causality.CausalGraph.html#1525" class="Bound">c</a><a id="1526" class="Symbol">}</a> <a id="1528" class="Symbol">{</a><a id="1529" href="Causality.CausalGraph.html#1529" class="Bound">A</a> <a id="1531" class="Symbol">:</a> <a id="1533" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1537" href="Causality.CausalGraph.html#1521" class="Bound">a</a><a id="1538" class="Symbol">}</a> <a id="1540" class="Symbol">→</a> <a id="1542" class="Symbol">(</a><a id="1543" href="Causality.CausalGraph.html#1529" class="Bound">A</a> <a id="1545" class="Symbol">→</a> <a id="1547" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1551" href="Causality.CausalGraph.html#1523" class="Bound">b</a><a id="1552" class="Symbol">)</a> <a id="1554" class="Symbol">→</a> <a id="1556" class="Symbol">(</a><a id="1557" href="Causality.CausalGraph.html#1529" class="Bound">A</a> <a id="1559" class="Symbol">→</a> <a id="1561" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1565" href="Causality.CausalGraph.html#1525" class="Bound">c</a><a id="1566" class="Symbol">)</a> <a id="1568" class="Symbol">→</a> <a id="1570" class="Symbol">(</a><a id="1571" href="Causality.CausalGraph.html#1529" class="Bound">A</a> <a id="1573" class="Symbol">→</a> <a id="1575" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1579" class="Symbol">_)</a>
<a id="1582" href="Causality.CausalGraph.html#1582" class="Bound">P</a> <a id="1584" href="Causality.CausalGraph.html#1510" class="Function Operator">-⊎-</a> <a id="1588" href="Causality.CausalGraph.html#1588" class="Bound">Q</a> <a id="1590" class="Symbol">=</a> <a id="1592" class="Symbol">λ</a> <a id="1594" href="Causality.CausalGraph.html#1594" class="Bound">x</a> <a id="1596" class="Symbol">→</a> <a id="1598" href="Causality.CausalGraph.html#1582" class="Bound">P</a> <a id="1600" href="Causality.CausalGraph.html#1594" class="Bound">x</a> <a id="1602" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="1604" href="Causality.CausalGraph.html#1588" class="Bound">Q</a> <a id="1606" href="Causality.CausalGraph.html#1594" class="Bound">x</a>
</pre></div>
</details>
</div>
</details>

We parameterize our development by an arbitrary DAG $G$.

<pre class="Agda"><a id="1715" class="Keyword">module</a> <a id="CausalGraph"></a><a id="1722" href="Causality.CausalGraph.html#1722" class="Module">CausalGraph</a> <a id="1734" class="Symbol">(</a><a id="1735" href="Causality.CausalGraph.html#1735" class="Bound">G</a> <a id="1737" class="Symbol">:</a> <a id="1739" href="Causality.Data.Graph.html#2298" class="Record">DAG</a><a id="1742" class="Symbol">)</a> <a id="1744" class="Keyword">where</a>

  <a id="1753" class="Keyword">open</a> <a id="1758" href="Causality.Data.Graph.html#2298" class="Module">DAG</a> <a id="1762" href="Causality.CausalGraph.html#1735" class="Bound">G</a>
</pre>
We define a "path" through a causal graph to be a list of vertices connected by adjacencies.

<pre class="Agda">  <a id="1873" class="Keyword">record</a> <a id="CausalGraph.Path"></a><a id="1880" href="Causality.CausalGraph.html#1880" class="Record">Path</a> <a id="1885" class="Symbol">:</a> <a id="1887" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1891" class="Keyword">where</a>
    <a id="1901" class="Keyword">field</a> <a id="CausalGraph.Path.nodes"></a><a id="1907" href="Causality.CausalGraph.html#1907" class="Field">nodes</a>              <a id="1926" class="Symbol">:</a> <a id="1928" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1933" href="Causality.Data.Graph.html#745" class="Function">V</a>
    <a id="1939" class="Keyword">field</a> <a id="CausalGraph.Path.linked"></a><a id="1945" href="Causality.CausalGraph.html#1945" class="Field">linked</a>             <a id="1964" class="Symbol">:</a> <a id="1966" href="Data.List.Relation.Unary.Linked.html#1312" class="Datatype">Linked</a> <a id="1973" href="Causality.Data.Graph.html#985" class="Function Operator">_∃——_</a> <a id="1979" href="Causality.CausalGraph.html#1907" class="Field">nodes</a>
</pre>
We require that the path be acyclic, i.e. that no vertex is revisited, i.e. that the list of vertices
has no duplicates. We will also require that there are at least two vertices in our list, so that
we have distinct start- and endpoints.

<pre class="Agda">    <a id="2238" class="Keyword">field</a> <a id="CausalGraph.Path.acyclic"></a><a id="2244" href="Causality.CausalGraph.html#2244" class="Field">acyclic</a>            <a id="2263" class="Symbol">:</a> <a id="2265" href="Data.List.Relation.Unary.Unique.Setoid.html#737" class="Datatype">Unique</a> <a id="2272" href="Causality.CausalGraph.html#1907" class="Field">nodes</a>
    <a id="2282" class="Keyword">field</a> <a id="CausalGraph.Path.distinct-endpoints"></a><a id="2288" href="Causality.CausalGraph.html#2288" class="Field">distinct-endpoints</a> <a id="2307" class="Symbol">:</a> <a id="2309" href="Data.List.Base.html#5067" class="Function">length</a> <a id="2316" href="Causality.CausalGraph.html#1907" class="Field">nodes</a> <a id="2322" href="Data.Nat.Base.html#1903" class="Function Operator">≥</a> <a id="2324" class="Number">2</a>

    <a id="CausalGraph.Path.nonempty"></a><a id="2331" href="Causality.CausalGraph.html#2331" class="Function">nonempty</a> <a id="2340" class="Symbol">:</a> <a id="2342" href="Causality.CausalGraph.html#1907" class="Field">nodes</a> <a id="2348" href="Relation.Binary.PropositionalEquality.Core.html#853" class="Function Operator">≢</a> <a id="2350" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
    <a id="2357" href="Causality.CausalGraph.html#2331" class="Function">nonempty</a> <a id="2366" href="Causality.CausalGraph.html#2366" class="Bound">nodes≡[]</a>
      <a id="2381" class="Keyword">with</a> <a id="2386" href="Causality.CausalGraph.html#1907" class="Field">nodes</a> <a id="2392" class="Symbol">|</a> <a id="2394" href="Causality.CausalGraph.html#2288" class="Field">distinct-endpoints</a>
    <a id="2417" class="Symbol">...</a>  <a id="2422" class="Symbol">|</a> <a id="2424" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>    <a id="2430" class="Symbol">|</a> <a id="2432" class="Symbol">()</a>
    <a id="2439" class="Symbol">...</a>  <a id="2444" class="Symbol">|</a> <a id="2446" class="Symbol">_</a> <a id="2448" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2450" class="Symbol">_</a> <a id="2452" class="Symbol">|</a> <a id="2454" href="Data.Nat.Base.html#1609" class="InductiveConstructor">s≤s</a> <a id="2458" class="Symbol">_</a> <a id="2460" class="Symbol">=</a> <a id="2462" href="Relation.Nullary.Negation.Core.html#1276" class="Function">contradiction</a> <a id="2476" class="Bound">nodes≡[]</a> <a id="2485" class="Symbol">λ()</a>

    <a id="CausalGraph.Path.start"></a><a id="2494" href="Causality.CausalGraph.html#2494" class="Function">start</a> <a id="2500" class="Symbol">:</a> <a id="2502" href="Causality.Data.Graph.html#745" class="Function">V</a>
    <a id="2508" href="Causality.CausalGraph.html#2494" class="Function">start</a> <a id="2514" class="Symbol">=</a> <a id="2516" href="Causality.Data.List.html#3092" class="Function">head-of-nonempty</a> <a id="2533" href="Causality.CausalGraph.html#2331" class="Function">nonempty</a> <a id="2542" href="Causality.CausalGraph.html#1094" class="Field Operator">₁</a>

    <a id="CausalGraph.Path.end"></a><a id="2549" href="Causality.CausalGraph.html#2549" class="Function">end</a> <a id="2553" class="Symbol">:</a> <a id="2555" href="Causality.Data.Graph.html#745" class="Function">V</a>
    <a id="2561" href="Causality.CausalGraph.html#2549" class="Function">end</a> <a id="2565" class="Symbol">=</a> <a id="2567" href="Causality.Data.List.html#2810" class="Function">last-of-nonempty</a> <a id="2584" href="Causality.CausalGraph.html#2331" class="Function">nonempty</a> <a id="2593" href="Causality.CausalGraph.html#1094" class="Field Operator">₁</a>

  <a id="2598" class="Keyword">open</a> <a id="2603" href="Causality.CausalGraph.html#1880" class="Module">Path</a>
</pre>
For any two vertices $i, j$ in $G$, we will let `i —↠ j` denote the set of paths from $i$ to $j$.

<pre class="Agda">  <a id="CausalGraph._—↠_"></a><a id="2722" href="Causality.CausalGraph.html#2722" class="Function Operator">_—↠_</a> <a id="2727" class="Symbol">:</a> <a id="2729" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="2731" class="Symbol">→</a> <a id="2733" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="2735" class="Symbol">→</a> <a id="2737" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="2743" href="Causality.CausalGraph.html#2743" class="Bound">from</a> <a id="2748" href="Causality.CausalGraph.html#2722" class="Function Operator">—↠</a> <a id="2751" href="Causality.CausalGraph.html#2751" class="Bound">to</a> <a id="2754" class="Symbol">=</a> <a id="2756" href="Data.Product.html#1094" class="Function">∃[</a> <a id="2759" href="Causality.CausalGraph.html#2759" class="Bound">p</a> <a id="2761" href="Data.Product.html#1094" class="Function">]</a> <a id="2763" href="Causality.CausalGraph.html#2494" class="Function">start</a> <a id="2769" href="Causality.CausalGraph.html#2759" class="Bound">p</a> <a id="2771" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2773" href="Causality.CausalGraph.html#2743" class="Bound">from</a> <a id="2778" href="Data.Product.Base.html#1118" class="Function Operator">×</a> <a id="2780" href="Causality.CausalGraph.html#2549" class="Function">end</a> <a id="2784" href="Causality.CausalGraph.html#2759" class="Bound">p</a> <a id="2786" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2788" href="Causality.CausalGraph.html#2751" class="Bound">to</a>
</pre>
We will say `i ∃—↠ j` iff there exists a path starting at $i$ and ending at $j$.

<pre class="Agda">  <a id="CausalGraph._∃—↠_"></a><a id="2888" href="Causality.CausalGraph.html#2888" class="Function Operator">_∃—↠_</a> <a id="2894" class="Symbol">=</a> <a id="2896" href="Causality.CausalGraph.html#2722" class="Function Operator">_—↠_</a>
</pre>
<details>
<summary>Some helper functions for working with paths.</summary>
<div>
<pre class="Agda">  <a id="CausalGraph.triples-along"></a><a id="2997" href="Causality.CausalGraph.html#2997" class="Function">triples-along</a> <a id="3011" class="Symbol">:</a> <a id="3013" href="Causality.CausalGraph.html#1880" class="Record">Path</a> <a id="3018" class="Symbol">→</a> <a id="3020" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="3025" class="Symbol">(</a><a id="3026" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3028" href="Data.Product.Base.html#1118" class="Function Operator">×</a> <a id="3030" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3032" href="Data.Product.Base.html#1118" class="Function Operator">×</a> <a id="3034" href="Causality.Data.Graph.html#745" class="Function">V</a><a id="3035" class="Symbol">)</a>
  <a id="3039" href="Causality.CausalGraph.html#2997" class="Function">triples-along</a> <a id="3053" class="Symbol">=</a> <a id="3055" href="Causality.Data.List.html#2358" class="Function">triples</a> <a id="3063" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3065" href="Causality.CausalGraph.html#1907" class="Field">nodes</a>

  <a id="CausalGraph._visits_"></a><a id="3074" href="Causality.CausalGraph.html#3074" class="Function Operator">_visits_</a> <a id="3083" class="Symbol">:</a> <a id="3085" class="Symbol">(</a><a id="3086" href="Causality.CausalGraph.html#3086" class="Bound">p</a> <a id="3088" class="Symbol">:</a> <a id="3090" href="Causality.CausalGraph.html#1880" class="Record">Path</a><a id="3094" class="Symbol">)</a> <a id="3096" class="Symbol">→</a> <a id="3098" class="Symbol">(</a><a id="3099" href="Causality.CausalGraph.html#3099" class="Bound">v</a> <a id="3101" class="Symbol">:</a> <a id="3103" href="Causality.Data.Graph.html#745" class="Function">V</a><a id="3104" class="Symbol">)</a> <a id="3106" class="Symbol">→</a> <a id="3108" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="3114" href="Causality.CausalGraph.html#3114" class="Bound">p</a> <a id="3116" href="Causality.CausalGraph.html#3074" class="Function Operator">visits</a> <a id="3123" href="Causality.CausalGraph.html#3123" class="Bound">v</a> <a id="3125" class="Symbol">=</a> <a id="3127" href="Causality.CausalGraph.html#3123" class="Bound">v</a> <a id="3129" href="Data.List.Membership.Setoid.html#856" class="Function Operator">∈</a> <a id="3131" href="Causality.CausalGraph.html#1907" class="Field">nodes</a> <a id="3137" href="Causality.CausalGraph.html#3114" class="Bound">p</a>
    <a id="3143" class="Keyword">where</a> <a id="3149" class="Keyword">open</a> <a id="3154" class="Keyword">import</a> <a id="3161" href="Data.List.Membership.Propositional.html" class="Module">Data.List.Membership.Propositional</a> <a id="3196" class="Keyword">using</a> <a id="3202" class="Symbol">(</a><a id="3203" href="Data.List.Membership.Setoid.html#856" class="Function Operator">_∈_</a><a id="3206" class="Symbol">)</a>
</pre></div>
</details>

A subset of $V$ is a valid conditioning set (w.r.t. some path `i —↠ j`) iff $C \subseteq V \setminus \{ i , j \}$.

<pre class="Agda">  <a id="CausalGraph.ConditioningSet"></a><a id="3357" href="Causality.CausalGraph.html#3357" class="Function">ConditioningSet</a> <a id="3373" class="Symbol">:</a> <a id="3375" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3377" class="Symbol">→</a> <a id="3379" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3381" class="Symbol">→</a> <a id="3383" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3387" class="Symbol">_</a>
  <a id="3391" href="Causality.CausalGraph.html#3357" class="Function">ConditioningSet</a> <a id="3407" href="Causality.CausalGraph.html#3407" class="Bound">i</a> <a id="3409" href="Causality.CausalGraph.html#3409" class="Bound">j</a> <a id="3411" class="Symbol">=</a> <a id="3413" href="Agda.Builtin.Sigma.html#148" class="Record">Σ</a> <a id="3415" class="Symbol">(</a><a id="3416" href="Data.Fin.Subset.html#1059" class="Function">Subset</a> <a id="3423" href="Causality.Data.Graph.html#734" class="Function">|V|</a><a id="3426" class="Symbol">)</a> <a id="3428" class="Symbol">(</a><a id="3429" href="Causality.Data.Fin.Subset.html#5305" class="Function Operator">_⊆∖</a> <a id="3433" href="Causality.Data.Fin.Subset.html#5360" class="Function Operator">⁅</a> <a id="3435" href="Causality.CausalGraph.html#3407" class="Bound">i</a> <a id="3437" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3439" href="Causality.CausalGraph.html#3409" class="Bound">j</a> <a id="3441" href="Causality.Data.Fin.Subset.html#5360" class="Function Operator">⁆₂</a><a id="3443" class="Symbol">)</a>
</pre>
We will denote the empty conditioning set by $\varnothing$.

<pre class="Agda">  <a id="CausalGraph.∅"></a><a id="3521" href="Causality.CausalGraph.html#3521" class="Function">∅</a> <a id="3523" class="Symbol">:</a> <a id="3525" class="Symbol">∀</a> <a id="3527" class="Symbol">{</a><a id="3528" href="Causality.CausalGraph.html#3528" class="Bound">i</a> <a id="3530" href="Causality.CausalGraph.html#3530" class="Bound">j</a><a id="3531" class="Symbol">}</a> <a id="3533" class="Symbol">→</a> <a id="3535" href="Causality.CausalGraph.html#3357" class="Function">ConditioningSet</a> <a id="3551" href="Causality.CausalGraph.html#3528" class="Bound">i</a> <a id="3553" href="Causality.CausalGraph.html#3530" class="Bound">j</a>
  <a id="3557" href="Causality.CausalGraph.html#3521" class="Function">∅</a> <a id="3559" class="Symbol">=</a> <a id="3561" href="Data.Fin.Subset.html#1208" class="Function">Fin.⊥</a> <a id="3567" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3569" href="Data.Fin.Subset.Properties.html#4375" class="Function">Fin.⊥⊆</a>
</pre>
<details>
<summary>Groundwork to let us define colliders, noncolliders, etc.</summary>
<div>
<pre class="Agda">  <a id="3684" class="Keyword">module</a> <a id="CausalGraph.Pattern"></a><a id="3691" href="Causality.CausalGraph.html#3691" class="Module">Pattern</a> <a id="3699" class="Keyword">where</a>

    <a id="CausalGraph.Pattern.Pattern"></a><a id="3710" href="Causality.CausalGraph.html#3710" class="Function">Pattern</a> <a id="3718" class="Symbol">:</a> <a id="3720" class="Symbol">∀</a> <a id="3722" class="Symbol">{</a><a id="3723" href="Causality.CausalGraph.html#3723" class="Bound">a</a><a id="3724" class="Symbol">}</a> <a id="3726" class="Symbol">→</a> <a id="3728" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3732" class="Symbol">_</a>
    <a id="3738" href="Causality.CausalGraph.html#3710" class="Function">Pattern</a> <a id="3746" class="Symbol">{</a><a id="3747" href="Causality.CausalGraph.html#3747" class="Bound">a</a><a id="3748" class="Symbol">}</a> <a id="3750" class="Symbol">=</a> <a id="3752" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3754" href="Data.Product.Base.html#1118" class="Function Operator">×</a> <a id="3756" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3758" href="Data.Product.Base.html#1118" class="Function Operator">×</a> <a id="3760" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3762" class="Symbol">→</a> <a id="3764" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3768" href="Causality.CausalGraph.html#3747" class="Bound">a</a>


    <a id="3776" class="Keyword">module</a> <a id="CausalGraph.Pattern.Notation"></a><a id="3783" href="Causality.CausalGraph.html#3783" class="Module">Notation</a> <a id="3792" class="Keyword">where</a>

      <a id="CausalGraph.Pattern.Notation._∙_"></a><a id="3805" href="Causality.CausalGraph.html#3805" class="Function Operator">_∙_</a> <a id="3809" class="Symbol">:</a> <a id="3811" class="Symbol">∀</a> <a id="3813" class="Symbol">{</a><a id="3814" href="Causality.CausalGraph.html#3814" class="Bound">a</a> <a id="3816" href="Causality.CausalGraph.html#3816" class="Bound">b</a><a id="3817" class="Symbol">}</a> <a id="3819" class="Symbol">→</a> <a id="3821" class="Symbol">(</a><a id="3822" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3824" class="Symbol">→</a> <a id="3826" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3828" class="Symbol">→</a> <a id="3830" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3834" href="Causality.CausalGraph.html#3814" class="Bound">a</a><a id="3835" class="Symbol">)</a> <a id="3837" class="Symbol">→</a> <a id="3839" class="Symbol">(</a><a id="3840" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3842" class="Symbol">→</a> <a id="3844" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3846" class="Symbol">→</a> <a id="3848" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3852" href="Causality.CausalGraph.html#3816" class="Bound">b</a><a id="3853" class="Symbol">)</a> <a id="3855" class="Symbol">→</a> <a id="3857" href="Causality.CausalGraph.html#3710" class="Function">Pattern</a>
      <a id="3871" href="Causality.CausalGraph.html#3871" class="Bound Operator">_l-x_</a> <a id="3877" href="Causality.CausalGraph.html#3805" class="Function Operator">∙</a> <a id="3879" href="Causality.CausalGraph.html#3879" class="Bound Operator">_x-r_</a> <a id="3885" class="Symbol">=</a> <a id="3887" class="Symbol">λ{</a> <a id="3890" class="Symbol">(</a><a id="3891" href="Causality.CausalGraph.html#3891" class="Bound">l</a> <a id="3893" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3895" href="Causality.CausalGraph.html#3895" class="Bound">x</a> <a id="3897" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3899" href="Causality.CausalGraph.html#3899" class="Bound">r</a><a id="3900" class="Symbol">)</a> <a id="3902" class="Symbol">→</a> <a id="3904" href="Causality.CausalGraph.html#3891" class="Bound">l</a> <a id="3906" href="Causality.CausalGraph.html#3871" class="Bound Operator">l-x</a> <a id="3910" href="Causality.CausalGraph.html#3895" class="Bound">x</a> <a id="3912" href="Data.Product.Base.html#1118" class="Function Operator">×</a> <a id="3914" href="Causality.CausalGraph.html#3895" class="Bound">x</a> <a id="3916" href="Causality.CausalGraph.html#3879" class="Bound Operator">x-r</a> <a id="3920" href="Causality.CausalGraph.html#3899" class="Bound">r</a> <a id="3922" class="Symbol">}</a>

      <a id="CausalGraph.Pattern.Notation.⟶"></a><a id="3931" href="Causality.CausalGraph.html#3931" class="Function">⟶</a> <a id="3933" class="Symbol">=</a> <a id="3935" href="Causality.Data.Graph.html#822" class="Function Operator">_∃⟶_</a>
      <a id="CausalGraph.Pattern.Notation.⟵"></a><a id="3946" href="Causality.CausalGraph.html#3946" class="Function">⟵</a> <a id="3948" class="Symbol">=</a> <a id="3950" href="Causality.Data.Graph.html#940" class="Function Operator">_∃⟵_</a>

    <a id="3960" class="Keyword">open</a> <a id="3965" href="Causality.CausalGraph.html#3783" class="Module">Notation</a>
</pre></div>
</details>

<pre class="Agda">    <a id="CausalGraph.Pattern.collider"></a><a id="4009" href="Causality.CausalGraph.html#4009" class="Function">collider</a> <a id="CausalGraph.Pattern.common-cause"></a><a id="4018" href="Causality.CausalGraph.html#4018" class="Function">common-cause</a> <a id="CausalGraph.Pattern.mediator"></a><a id="4031" href="Causality.CausalGraph.html#4031" class="Function">mediator</a> <a id="4040" class="Symbol">:</a> <a id="4042" href="Causality.CausalGraph.html#3710" class="Function">Pattern</a>
    <a id="4054" href="Causality.CausalGraph.html#4009" class="Function">collider</a>     <a id="4067" class="Symbol">=</a> <a id="4069" href="Causality.CausalGraph.html#3931" class="Function">⟶</a> <a id="4071" href="Causality.CausalGraph.html#3805" class="Function Operator">∙</a> <a id="4073" href="Causality.CausalGraph.html#3946" class="Function">⟵</a>
    <a id="4079" href="Causality.CausalGraph.html#4018" class="Function">common-cause</a> <a id="4092" class="Symbol">=</a> <a id="4094" href="Causality.CausalGraph.html#3946" class="Function">⟵</a> <a id="4096" href="Causality.CausalGraph.html#3805" class="Function Operator">∙</a> <a id="4098" href="Causality.CausalGraph.html#3931" class="Function">⟶</a>
    <a id="4104" href="Causality.CausalGraph.html#4031" class="Function">mediator</a>     <a id="4117" class="Symbol">=</a> <a id="4119" href="Causality.CausalGraph.html#3931" class="Function">⟶</a> <a id="4121" href="Causality.CausalGraph.html#3805" class="Function Operator">∙</a> <a id="4123" href="Causality.CausalGraph.html#3931" class="Function">⟶</a>
</pre>
A noncollider is either a common cause or a mediator.

<pre class="Agda">    <a id="CausalGraph.Pattern.noncollider"></a><a id="4197" href="Causality.CausalGraph.html#4197" class="Function">noncollider</a> <a id="4209" class="Symbol">:</a> <a id="4211" href="Causality.CausalGraph.html#3710" class="Function">Pattern</a>
    <a id="4223" href="Causality.CausalGraph.html#4197" class="Function">noncollider</a> <a id="4235" class="Symbol">=</a> <a id="4237" href="Causality.CausalGraph.html#4018" class="Function">common-cause</a> <a id="4250" href="Causality.CausalGraph.html#1510" class="Function Operator">-⊎-</a> <a id="4254" href="Causality.CausalGraph.html#4031" class="Function">mediator</a>
</pre>
We will write `colliders along p` to denote "the set of all vertices that are colliders along some path $p$"
(and similarly for common causes, etc.).

<pre class="Agda">    <a id="CausalGraph.Pattern._along_"></a><a id="4431" href="Causality.CausalGraph.html#4431" class="Function Operator">_along_</a> <a id="4439" class="Symbol">:</a> <a id="4441" class="Symbol">∀</a> <a id="4443" class="Symbol">{</a><a id="4444" href="Causality.CausalGraph.html#4444" class="Bound">a</a><a id="4445" class="Symbol">}</a> <a id="4447" class="Symbol">→</a> <a id="4449" href="Causality.CausalGraph.html#3710" class="Function">Pattern</a> <a id="4457" class="Symbol">{</a><a id="4458" href="Causality.CausalGraph.html#4444" class="Bound">a</a><a id="4459" class="Symbol">}</a> <a id="4461" class="Symbol">→</a> <a id="4463" href="Causality.CausalGraph.html#1880" class="Record">Path</a> <a id="4468" class="Symbol">→</a> <a id="4470" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="4474" class="Symbol">_</a>
    <a id="4480" href="Causality.CausalGraph.html#4480" class="Bound">pat</a> <a id="4484" href="Causality.CausalGraph.html#4431" class="Function Operator">along</a> <a id="4490" href="Causality.CausalGraph.html#4490" class="Bound">p</a> <a id="4492" class="Symbol">=</a>
      <a id="4500" href="Data.Product.Base.html#867" class="Function">Σ[</a> <a id="4503" href="Causality.CausalGraph.html#4503" class="Bound">x</a> <a id="4505" href="Data.Product.Base.html#867" class="Function">∈</a> <a id="4507" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="4509" href="Data.Product.Base.html#867" class="Function">]</a>
        <a id="4519" href="Data.Product.Base.html#867" class="Function">Σ[</a> <a id="4522" href="Causality.CausalGraph.html#4522" class="Bound">triple</a><a id="4528" class="Symbol">@(_</a> <a id="4532" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4534" href="Causality.CausalGraph.html#4534" class="Bound">x′</a> <a id="4537" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4539" class="Symbol">_)</a> <a id="4542" href="Data.Product.Base.html#867" class="Function">∈</a> <a id="4544" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="4546" href="Data.Product.Base.html#1118" class="Function Operator">×</a> <a id="4548" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="4550" href="Data.Product.Base.html#1118" class="Function Operator">×</a> <a id="4552" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="4554" href="Data.Product.Base.html#867" class="Function">]</a>
          <a id="4566" href="Causality.CausalGraph.html#4503" class="Bound">x</a> <a id="4568" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4570" href="Causality.CausalGraph.html#4534" class="Bound">x′</a> <a id="4573" href="Data.Product.Base.html#1118" class="Function Operator">×</a> <a id="4575" href="Causality.CausalGraph.html#4480" class="Bound">pat</a> <a id="4579" href="Causality.CausalGraph.html#4522" class="Bound">triple</a>

    <a id="CausalGraph.Pattern.colliders"></a><a id="4591" href="Causality.CausalGraph.html#4591" class="Function">colliders</a>     <a id="4605" class="Symbol">=</a> <a id="4607" href="Causality.CausalGraph.html#4009" class="Function">collider</a>
    <a id="CausalGraph.Pattern.common-causes"></a><a id="4620" href="Causality.CausalGraph.html#4620" class="Function">common-causes</a> <a id="4634" class="Symbol">=</a> <a id="4636" href="Causality.CausalGraph.html#4018" class="Function">common-cause</a>
    <a id="CausalGraph.Pattern.mediators"></a><a id="4653" href="Causality.CausalGraph.html#4653" class="Function">mediators</a>     <a id="4667" class="Symbol">=</a> <a id="4669" href="Causality.CausalGraph.html#4031" class="Function">mediator</a>
    <a id="CausalGraph.Pattern.noncolliders"></a><a id="4682" href="Causality.CausalGraph.html#4682" class="Function">noncolliders</a>  <a id="4696" class="Symbol">=</a> <a id="4698" href="Causality.CausalGraph.html#4197" class="Function">noncollider</a>

  <a id="4713" class="Keyword">open</a> <a id="4718" href="Causality.CausalGraph.html#3691" class="Module">Pattern</a>
</pre>
A vertex $j$ is a descendant of $i$ iff there exists a path from $i$ to $j$.

<pre class="Agda">  <a id="CausalGraph.descendants"></a><a id="4819" href="Causality.CausalGraph.html#4819" class="Function">descendants</a> <a id="4831" class="Symbol">:</a> <a id="4833" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="4835" class="Symbol">→</a> <a id="4837" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="4843" href="Causality.CausalGraph.html#4819" class="Function">descendants</a> <a id="4855" href="Causality.CausalGraph.html#4855" class="Bound">i</a> <a id="4857" class="Symbol">=</a> <a id="4859" href="Data.Product.html#1094" class="Function">∃[</a> <a id="4862" href="Causality.CausalGraph.html#4862" class="Bound">j</a> <a id="4864" href="Data.Product.html#1094" class="Function">]</a> <a id="4866" href="Causality.CausalGraph.html#4855" class="Bound">i</a> <a id="4868" href="Causality.CausalGraph.html#2888" class="Function Operator">∃—↠</a> <a id="4872" href="Causality.CausalGraph.html#4862" class="Bound">j</a>
</pre>
A path from $i$ to $j$ is unblocked (conditional on $C$) iff:

<pre class="Agda">  <a id="CausalGraph.unblocked_∣_"></a><a id="4952" href="Causality.CausalGraph.html#4952" class="Function Operator">unblocked_∣_</a> <a id="4965" class="Symbol">:</a> <a id="4967" class="Symbol">∀</a> <a id="4969" class="Symbol">{</a><a id="4970" href="Causality.CausalGraph.html#4970" class="Bound">i</a> <a id="4972" href="Causality.CausalGraph.html#4972" class="Bound">j</a><a id="4973" class="Symbol">}</a> <a id="4975" class="Symbol">→</a> <a id="4977" href="Causality.CausalGraph.html#4970" class="Bound">i</a> <a id="4979" href="Causality.CausalGraph.html#2722" class="Function Operator">—↠</a> <a id="4982" href="Causality.CausalGraph.html#4972" class="Bound">j</a> <a id="4984" class="Symbol">→</a> <a id="4986" href="Causality.CausalGraph.html#3357" class="Function">ConditioningSet</a> <a id="5002" href="Causality.CausalGraph.html#4970" class="Bound">i</a> <a id="5004" href="Causality.CausalGraph.html#4972" class="Bound">j</a> <a id="5006" class="Symbol">→</a> <a id="5008" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="5014" href="Causality.CausalGraph.html#4952" class="Function Operator">unblocked</a> <a id="5024" class="Symbol">(</a><a id="5025" href="Causality.CausalGraph.html#5025" class="Bound">p</a> <a id="5027" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="5029" class="Symbol">_)</a> <a id="5032" href="Causality.CausalGraph.html#4952" class="Function Operator">∣</a> <a id="5034" class="Symbol">(</a><a id="5035" href="Causality.CausalGraph.html#5035" class="Bound">C</a> <a id="5037" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="5039" class="Symbol">_)</a> <a id="5042" class="Symbol">=</a>
</pre>
1. all noncolliders along the path are not in $C$, and

<pre class="Agda">    <a id="5117" class="Symbol">((</a><a id="5119" href="Causality.CausalGraph.html#5119" class="Bound">v</a> <a id="5121" class="Symbol">:</a> <a id="5123" href="Causality.CausalGraph.html#4682" class="Function">noncolliders</a> <a id="5136" href="Causality.CausalGraph.html#4431" class="Function Operator">along</a> <a id="5142" href="Causality.CausalGraph.html#5025" class="Bound">p</a><a id="5143" class="Symbol">)</a> <a id="5145" class="Symbol">→</a> <a id="5147" href="Causality.CausalGraph.html#5119" class="Bound">v</a> <a id="5149" href="Causality.CausalGraph.html#1094" class="Field Operator">₁</a> <a id="5151" href="Data.Fin.Subset.html#1629" class="Function Operator">∉</a> <a id="5153" href="Causality.CausalGraph.html#5035" class="Bound">C</a><a id="5154" class="Symbol">)</a> <a id="5156" href="Data.Product.Base.html#1118" class="Function Operator">×</a>
</pre>
2. all colliders along $p$ are:

<pre class="Agda">    <a id="5208" class="Symbol">((</a><a id="5210" href="Causality.CausalGraph.html#5210" class="Bound">v</a> <a id="5212" class="Symbol">:</a> <a id="5214" href="Causality.CausalGraph.html#4591" class="Function">colliders</a> <a id="5224" href="Causality.CausalGraph.html#4431" class="Function Operator">along</a> <a id="5230" href="Causality.CausalGraph.html#5025" class="Bound">p</a><a id="5231" class="Symbol">)</a> <a id="5233" class="Symbol">→</a>
</pre>
   a) in $C$, or

<pre class="Agda">       <a id="5273" href="Causality.CausalGraph.html#5210" class="Bound">v</a> <a id="5275" href="Causality.CausalGraph.html#1094" class="Field Operator">₁</a> <a id="5277" href="Data.Fin.Subset.html#1575" class="Function Operator">∈</a> <a id="5279" href="Causality.CausalGraph.html#5035" class="Bound">C</a> <a id="5281" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a>
</pre>
   b) have a descendant in $C$.

<pre class="Agda">       <a id="5336" href="Data.Product.Base.html#867" class="Function">Σ[</a> <a id="5339" href="Causality.CausalGraph.html#5339" class="Bound">i</a> <a id="5341" href="Data.Product.Base.html#867" class="Function">∈</a> <a id="5343" href="Causality.CausalGraph.html#4819" class="Function">descendants</a> <a id="5355" class="Symbol">(</a><a id="5356" href="Causality.CausalGraph.html#5210" class="Bound">v</a> <a id="5358" href="Causality.CausalGraph.html#1094" class="Field Operator">₁</a><a id="5359" class="Symbol">)</a> <a id="5361" href="Data.Product.Base.html#867" class="Function">]</a> <a id="5363" href="Causality.CausalGraph.html#5339" class="Bound">i</a> <a id="5365" href="Causality.CausalGraph.html#1094" class="Field Operator">₁</a> <a id="5367" href="Data.Fin.Subset.html#1575" class="Function Operator">∈</a> <a id="5369" href="Causality.CausalGraph.html#5035" class="Bound">C</a><a id="5370" class="Symbol">)</a>
</pre>
<pre class="Agda">    <a id="5389" class="Keyword">where</a> <a id="5395" class="Keyword">open</a> <a id="5400" class="Keyword">import</a> <a id="5407" href="Data.Fin.Subset.html" class="Module">Data.Fin.Subset</a> <a id="5423" class="Keyword">using</a> <a id="5429" class="Symbol">(</a><a id="5430" href="Data.Fin.Subset.html#1575" class="Function Operator">_∈_</a><a id="5433" class="Symbol">;</a> <a id="5435" href="Data.Fin.Subset.html#1629" class="Function Operator">_∉_</a><a id="5438" class="Symbol">)</a>
</pre>
A path is blocked iff it is not unblocked.

<pre class="Agda">  <a id="CausalGraph.blocked_∣_"></a><a id="5499" href="Causality.CausalGraph.html#5499" class="Function Operator">blocked_∣_</a> <a id="5510" class="Symbol">:</a> <a id="5512" class="Symbol">∀</a> <a id="5514" class="Symbol">{</a><a id="5515" href="Causality.CausalGraph.html#5515" class="Bound">i</a> <a id="5517" href="Causality.CausalGraph.html#5517" class="Bound">j</a><a id="5518" class="Symbol">}</a> <a id="5520" class="Symbol">→</a> <a id="5522" href="Causality.CausalGraph.html#5515" class="Bound">i</a> <a id="5524" href="Causality.CausalGraph.html#2722" class="Function Operator">—↠</a> <a id="5527" href="Causality.CausalGraph.html#5517" class="Bound">j</a> <a id="5529" class="Symbol">→</a> <a id="5531" href="Causality.CausalGraph.html#3357" class="Function">ConditioningSet</a> <a id="5547" href="Causality.CausalGraph.html#5515" class="Bound">i</a> <a id="5549" href="Causality.CausalGraph.html#5517" class="Bound">j</a> <a id="5551" class="Symbol">→</a> <a id="5553" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="5559" href="Causality.CausalGraph.html#5499" class="Function Operator">blocked</a> <a id="5567" href="Causality.CausalGraph.html#5567" class="Bound">p</a> <a id="5569" href="Causality.CausalGraph.html#5499" class="Function Operator">∣</a> <a id="5571" href="Causality.CausalGraph.html#5571" class="Bound">C</a> <a id="5573" class="Symbol">=</a> <a id="5575" href="Relation.Nullary.Negation.Core.html#824" class="Function Operator">¬</a> <a id="5577" href="Causality.CausalGraph.html#4952" class="Function Operator">unblocked</a> <a id="5587" href="Causality.CausalGraph.html#5567" class="Bound">p</a> <a id="5589" href="Causality.CausalGraph.html#4952" class="Function Operator">∣</a> <a id="5591" href="Causality.CausalGraph.html#5571" class="Bound">C</a>
</pre>
Two vertices are $d$-separated (conditional on $C$) iff all paths between them are blocked.

<pre class="Agda">  <a id="CausalGraph._⊥_∣_"></a><a id="5701" href="Causality.CausalGraph.html#5701" class="Function Operator">_⊥_∣_</a> <a id="5707" class="Symbol">:</a> <a id="5709" class="Symbol">(</a><a id="5710" href="Causality.CausalGraph.html#5710" class="Bound">i</a> <a id="5712" href="Causality.CausalGraph.html#5712" class="Bound">j</a> <a id="5714" class="Symbol">:</a> <a id="5716" href="Causality.Data.Graph.html#745" class="Function">V</a><a id="5717" class="Symbol">)</a> <a id="5719" class="Symbol">→</a> <a id="5721" href="Causality.CausalGraph.html#3357" class="Function">ConditioningSet</a> <a id="5737" href="Causality.CausalGraph.html#5710" class="Bound">i</a> <a id="5739" href="Causality.CausalGraph.html#5712" class="Bound">j</a> <a id="5741" class="Symbol">→</a> <a id="5743" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="5749" href="Causality.CausalGraph.html#5749" class="Bound">i</a> <a id="5751" href="Causality.CausalGraph.html#5701" class="Function Operator">⊥</a> <a id="5753" href="Causality.CausalGraph.html#5753" class="Bound">j</a> <a id="5755" href="Causality.CausalGraph.html#5701" class="Function Operator">∣</a> <a id="5757" href="Causality.CausalGraph.html#5757" class="Bound">C</a> <a id="5759" class="Symbol">=</a> <a id="5761" class="Symbol">∀</a> <a id="5763" href="Causality.CausalGraph.html#5763" class="Bound">p</a> <a id="5765" class="Symbol">→</a> <a id="5767" href="Causality.CausalGraph.html#5499" class="Function Operator">blocked</a> <a id="5775" href="Causality.CausalGraph.html#5763" class="Bound">p</a> <a id="5777" href="Causality.CausalGraph.html#5499" class="Function Operator">∣</a> <a id="5779" href="Causality.CausalGraph.html#5757" class="Bound">C</a>
</pre>
Two vertices are $d$-connected (conditional on $C$) iff they are not $d$-separated.

<pre class="Agda">  <a id="CausalGraph._⊥̸_∣_"></a><a id="5881" href="Causality.CausalGraph.html#5881" class="Function Operator">_⊥̸_∣_</a> <a id="5888" class="Symbol">:</a> <a id="5890" class="Symbol">(</a><a id="5891" href="Causality.CausalGraph.html#5891" class="Bound">i</a> <a id="5893" href="Causality.CausalGraph.html#5893" class="Bound">j</a> <a id="5895" class="Symbol">:</a> <a id="5897" href="Causality.Data.Graph.html#745" class="Function">V</a><a id="5898" class="Symbol">)</a> <a id="5900" class="Symbol">→</a> <a id="5902" href="Causality.CausalGraph.html#3357" class="Function">ConditioningSet</a> <a id="5918" href="Causality.CausalGraph.html#5891" class="Bound">i</a> <a id="5920" href="Causality.CausalGraph.html#5893" class="Bound">j</a> <a id="5922" class="Symbol">→</a> <a id="5924" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="5930" href="Causality.CausalGraph.html#5930" class="Bound">i</a> <a id="5932" href="Causality.CausalGraph.html#5881" class="Function Operator">⊥̸</a> <a id="5935" href="Causality.CausalGraph.html#5935" class="Bound">j</a> <a id="5937" href="Causality.CausalGraph.html#5881" class="Function Operator">∣</a> <a id="5939" href="Causality.CausalGraph.html#5939" class="Bound">C</a> <a id="5941" class="Symbol">=</a> <a id="5943" href="Relation.Nullary.Negation.Core.html#824" class="Function Operator">¬</a> <a id="5945" href="Causality.CausalGraph.html#5930" class="Bound">i</a> <a id="5947" href="Causality.CausalGraph.html#5701" class="Function Operator">⊥</a> <a id="5949" href="Causality.CausalGraph.html#5935" class="Bound">j</a> <a id="5951" href="Causality.CausalGraph.html#5701" class="Function Operator">∣</a> <a id="5953" href="Causality.CausalGraph.html#5939" class="Bound">C</a>
</pre>
Two vertices are $d$-separated (unconditionally) iff they are $d$-separated conditional on $\varnothing$.

<pre class="Agda">  <a id="CausalGraph._⊥_"></a><a id="6077" href="Causality.CausalGraph.html#6077" class="Function Operator">_⊥_</a> <a id="6081" class="Symbol">:</a> <a id="6083" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="6085" class="Symbol">→</a> <a id="6087" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="6089" class="Symbol">→</a> <a id="6091" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="6097" href="Causality.CausalGraph.html#6097" class="Bound">i</a> <a id="6099" href="Causality.CausalGraph.html#6077" class="Function Operator">⊥</a> <a id="6101" href="Causality.CausalGraph.html#6101" class="Bound">j</a> <a id="6103" class="Symbol">=</a> <a id="6105" href="Causality.CausalGraph.html#6097" class="Bound">i</a> <a id="6107" href="Causality.CausalGraph.html#5701" class="Function Operator">⊥</a> <a id="6109" href="Causality.CausalGraph.html#6101" class="Bound">j</a> <a id="6111" href="Causality.CausalGraph.html#5701" class="Function Operator">∣</a> <a id="6113" href="Causality.CausalGraph.html#3521" class="Function">∅</a>
</pre>
Two vertices are $d$-connected (uncoditionally) iff they are not $d$-separated (unconditionally).

<pre class="Agda">  <a id="CausalGraph._⊥̸_"></a><a id="6229" href="Causality.CausalGraph.html#6229" class="Function Operator">_⊥̸_</a> <a id="6234" class="Symbol">:</a> <a id="6236" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="6238" class="Symbol">→</a> <a id="6240" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="6242" class="Symbol">→</a> <a id="6244" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="6250" href="Causality.CausalGraph.html#6250" class="Bound">i</a> <a id="6252" href="Causality.CausalGraph.html#6229" class="Function Operator">⊥̸</a> <a id="6255" href="Causality.CausalGraph.html#6255" class="Bound">j</a> <a id="6257" class="Symbol">=</a> <a id="6259" href="Causality.CausalGraph.html#6250" class="Bound">i</a> <a id="6261" href="Causality.CausalGraph.html#5881" class="Function Operator">⊥̸</a> <a id="6264" href="Causality.CausalGraph.html#6255" class="Bound">j</a> <a id="6266" href="Causality.CausalGraph.html#5881" class="Function Operator">∣</a> <a id="6268" href="Causality.CausalGraph.html#3521" class="Function">∅</a>
</pre>
To intervene on a set of vertices $S$, we remove all edges going into vertices of $S$.

<pre class="Agda">  <a id="CausalGraph.intervene-on"></a><a id="6373" href="Causality.CausalGraph.html#6373" class="Function">intervene-on</a> <a id="6386" class="Symbol">:</a> <a id="6388" href="Data.Fin.Subset.html#1059" class="Function">Subset</a> <a id="6395" href="Causality.Data.Graph.html#734" class="Function">|V|</a> <a id="6399" class="Symbol">→</a> <a id="6401" href="Causality.Data.Graph.html#2298" class="Record">DAG</a>
  <a id="6407" href="Causality.CausalGraph.html#6373" class="Function">intervene-on</a> <a id="6420" href="Causality.CausalGraph.html#6420" class="Bound">S</a> <a id="6422" class="Symbol">=</a> <a id="6424" href="Causality.Data.Graph.html#2464" class="Function">filter-edges</a> <a id="6437" class="Symbol">(λ{</a> <a id="6441" class="Symbol">(_</a> <a id="6444" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="6446" href="Causality.CausalGraph.html#6446" class="Bound">to</a><a id="6448" class="Symbol">)</a> <a id="6450" class="Symbol">→</a> <a id="6452" href="Relation.Nullary.Decidable.Core.html#2172" class="Function">¬?</a> <a id="6455" class="Symbol">(</a><a id="6456" href="Causality.CausalGraph.html#6446" class="Bound">to</a> <a id="6459" href="Data.Fin.Subset.Properties.html#3349" class="Function Operator">∈?</a> <a id="6462" href="Causality.CausalGraph.html#6420" class="Bound">S</a><a id="6463" class="Symbol">)</a> <a id="6465" class="Symbol">})</a>
    <a id="6472" class="Keyword">where</a> <a id="6478" class="Keyword">open</a> <a id="6483" class="Keyword">import</a> <a id="6490" href="Data.Fin.Subset.Properties.html" class="Module">Data.Fin.Subset.Properties</a> <a id="6517" class="Keyword">using</a> <a id="6523" class="Symbol">(</a><a id="6524" href="Data.Fin.Subset.Properties.html#3349" class="Function Operator">_∈?_</a><a id="6528" class="Symbol">)</a>
</pre>