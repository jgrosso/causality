<pre class="Agda"><a id="9" class="Symbol">{-#</a> <a id="13" class="Keyword">OPTIONS</a> <a id="21" class="Pragma">--allow-unsolved-metas</a> <a id="44" class="Symbol">#-}</a>
</pre>---
title: Causality.CausalGraph
---

Definitions and proofs about causal graphs.

<pre class="Agda"><a id="143" class="Keyword">module</a> <a id="150" href="Causality.CausalGraph.html" class="Module">Causality.CausalGraph</a> <a id="172" class="Keyword">where</a>
</pre>
We import some of the other files in this project (to see the documentation for a module, click on its name).

<pre class="Agda"><a id="302" class="Keyword">open</a> <a id="307" class="Keyword">import</a> <a id="314" href="Causality.Data.Fin.Subset.html" class="Module">Causality.Data.Fin.Subset</a>
<a id="340" class="Keyword">open</a> <a id="345" class="Keyword">import</a> <a id="352" href="Causality.Data.Graph.html" class="Module">Causality.Data.Graph</a>
<a id="373" class="Keyword">open</a> <a id="378" class="Keyword">import</a> <a id="385" href="Causality.Data.Graphoid.html" class="Module">Causality.Data.Graphoid</a>
<a id="409" class="Keyword">open</a> <a id="414" class="Keyword">import</a> <a id="421" href="Causality.Data.List.html" class="Module">Causality.Data.List</a>
</pre>
<details>
<summary>Standard library imports.</summary>

<pre class="Agda"><a id="510" class="Keyword">open</a> <a id="515" class="Keyword">import</a> <a id="522" href="Data.Fin.html" class="Module">Data.Fin</a> <a id="531" class="Keyword">using</a> <a id="537" class="Symbol">(</a><a id="538" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a><a id="541" class="Symbol">)</a>
<a id="543" class="Keyword">open</a> <a id="548" class="Keyword">import</a> <a id="555" href="Data.Fin.Subset.html" class="Module">Data.Fin.Subset</a> <a id="571" class="Keyword">using</a> <a id="577" class="Symbol">(</a><a id="578" href="Data.Fin.Subset.html#1208" class="Function">Subset</a><a id="584" class="Symbol">;</a> <a id="586" href="Data.Fin.Subset.html#2527" class="Function">⋃</a><a id="587" class="Symbol">)</a>
<a id="589" class="Keyword">import</a> <a id="596" href="Data.Fin.Subset.html" class="Module">Data.Fin.Subset</a> <a id="612" class="Symbol">as</a> <a id="615" class="Module">Fin</a>
<a id="619" class="Keyword">import</a> <a id="626" href="Data.Fin.Subset.Properties.html" class="Module">Data.Fin.Subset.Properties</a> <a id="653" class="Symbol">as</a> <a id="656" class="Module">Fin</a>
<a id="660" class="Keyword">open</a> <a id="665" class="Keyword">import</a> <a id="672" href="Data.List.html" class="Module">Data.List</a> <a id="682" class="Keyword">using</a> <a id="688" class="Symbol">(</a><a id="689" href="Agda.Builtin.List.html#130" class="Datatype">List</a><a id="693" class="Symbol">;</a> <a id="695" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷_</a><a id="698" class="Symbol">;</a> <a id="700" href="Data.List.Base.html#10383" class="InductiveConstructor">[]</a><a id="702" class="Symbol">;</a> <a id="704" href="Data.List.Base.html#4864" class="Function">length</a><a id="710" class="Symbol">)</a>
<a id="712" class="Keyword">open</a> <a id="717" class="Keyword">import</a> <a id="724" href="Data.List.Relation.Unary.Linked.html" class="Module">Data.List.Relation.Unary.Linked</a> <a id="756" class="Keyword">using</a> <a id="762" class="Symbol">(</a><a id="763" href="Data.List.Relation.Unary.Linked.html#1390" class="Datatype">Linked</a><a id="769" class="Symbol">)</a>
<a id="771" class="Keyword">open</a> <a id="776" class="Keyword">import</a> <a id="783" href="Data.List.Relation.Unary.Unique.Propositional.html" class="Module">Data.List.Relation.Unary.Unique.Propositional</a> <a id="829" class="Keyword">using</a> <a id="835" class="Symbol">(</a><a id="836" href="Data.List.Relation.Unary.Unique.Setoid.html#719" class="Datatype">Unique</a><a id="842" class="Symbol">)</a>
<a id="844" class="Keyword">import</a> <a id="851" href="Data.List.Relation.Unary.Unique.Propositional.Properties.html" class="Module">Data.List.Relation.Unary.Unique.Propositional.Properties</a> <a id="908" class="Symbol">as</a> <a id="911" class="Module">Unique</a>
<a id="918" class="Keyword">open</a> <a id="923" class="Keyword">import</a> <a id="930" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="939" class="Keyword">using</a> <a id="945" class="Symbol">(</a><a id="946" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="947" class="Symbol">;</a> <a id="949" href="Data.Nat.Base.html#1679" class="Function Operator">_≥_</a><a id="952" class="Symbol">;</a> <a id="954" href="Data.Nat.Base.html#1600" class="InductiveConstructor">s≤s</a><a id="957" class="Symbol">)</a>
<a id="959" class="Keyword">open</a> <a id="964" class="Keyword">import</a> <a id="971" href="Data.Product.html" class="Module">Data.Product</a> <a id="984" class="Keyword">using</a> <a id="990" class="Symbol">(</a><a id="991" href="Data.Product.html#1806" class="Function">∃-syntax</a><a id="999" class="Symbol">;</a> <a id="1001" href="Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="1002" class="Symbol">;</a> <a id="1004" href="Data.Product.html#916" class="Function">Σ-syntax</a><a id="1012" class="Symbol">;</a> <a id="1014" href="Data.Product.html#1167" class="Function Operator">_×_</a><a id="1017" class="Symbol">;</a> <a id="1019" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a><a id="1022" class="Symbol">)</a> <a id="1024" class="Keyword">renaming</a> <a id="1033" class="Symbol">(</a><a id="1034" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="1040" class="Symbol">to</a> <a id="1043" class="Field">_₁</a><a id="1045" class="Symbol">)</a>
<a id="1047" class="Keyword">open</a> <a id="1052" class="Keyword">import</a> <a id="1059" href="Data.Sum.html" class="Module">Data.Sum</a> <a id="1068" class="Keyword">using</a> <a id="1074" class="Symbol">(</a><a id="1075" href="Data.Sum.Base.html#734" class="Datatype Operator">_⊎_</a><a id="1078" class="Symbol">)</a>
<a id="1080" class="Keyword">open</a> <a id="1085" class="Keyword">import</a> <a id="1092" href="Function.html" class="Module">Function</a> <a id="1101" class="Keyword">using</a> <a id="1107" class="Symbol">(</a><a id="1108" href="Function.Base.html#1031" class="Function Operator">_∘_</a><a id="1111" class="Symbol">;</a> <a id="1113" href="Function.Base.html#4121" class="Function Operator">case_of_</a><a id="1121" class="Symbol">)</a>
<a id="1123" class="Keyword">open</a> <a id="1128" class="Keyword">import</a> <a id="1135" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="1173" class="Keyword">using</a> <a id="1179" class="Symbol">(</a><a id="1180" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="1183" class="Symbol">;</a> <a id="1185" href="Relation.Binary.PropositionalEquality.Core.html#830" class="Function Operator">_≢_</a><a id="1188" class="Symbol">;</a> <a id="1190" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="1194" class="Symbol">)</a>
<a id="1196" class="Keyword">open</a> <a id="1201" class="Keyword">import</a> <a id="1208" href="Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="1225" class="Keyword">using</a> <a id="1231" class="Symbol">(</a><a id="1232" href="Relation.Nullary.html#656" class="Function Operator">¬_</a><a id="1234" class="Symbol">)</a>
<a id="1236" class="Keyword">open</a> <a id="1241" class="Keyword">import</a> <a id="1248" href="Relation.Nullary.Negation.html" class="Module">Relation.Nullary.Negation</a> <a id="1274" class="Keyword">using</a> <a id="1280" class="Symbol">(</a><a id="1281" href="Relation.Nullary.Negation.Core.html#1355" class="Function">¬?</a><a id="1283" class="Symbol">)</a>
</pre></details>

<details>
<summary>Some utility functions, for use below.</summary>

<pre class="Agda"><a id="_-×-_"></a><a id="1378" href="Causality.CausalGraph.html#1378" class="Function Operator">_-×-_</a> <a id="1384" class="Symbol">:</a> <a id="1386" class="Symbol">∀</a> <a id="1388" class="Symbol">{</a><a id="1389" href="Causality.CausalGraph.html#1389" class="Bound">a</a> <a id="1391" href="Causality.CausalGraph.html#1391" class="Bound">b</a> <a id="1393" href="Causality.CausalGraph.html#1393" class="Bound">c</a><a id="1394" class="Symbol">}</a> <a id="1396" class="Symbol">{</a><a id="1397" href="Causality.CausalGraph.html#1397" class="Bound">A</a> <a id="1399" class="Symbol">:</a> <a id="1401" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1405" href="Causality.CausalGraph.html#1389" class="Bound">a</a><a id="1406" class="Symbol">}</a> <a id="1408" class="Symbol">→</a> <a id="1410" class="Symbol">(</a><a id="1411" href="Causality.CausalGraph.html#1397" class="Bound">A</a> <a id="1413" class="Symbol">→</a> <a id="1415" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1419" href="Causality.CausalGraph.html#1391" class="Bound">b</a><a id="1420" class="Symbol">)</a> <a id="1422" class="Symbol">→</a> <a id="1424" class="Symbol">(</a><a id="1425" href="Causality.CausalGraph.html#1397" class="Bound">A</a> <a id="1427" class="Symbol">→</a> <a id="1429" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1433" href="Causality.CausalGraph.html#1393" class="Bound">c</a><a id="1434" class="Symbol">)</a> <a id="1436" class="Symbol">→</a> <a id="1438" class="Symbol">(</a><a id="1439" href="Causality.CausalGraph.html#1397" class="Bound">A</a> <a id="1441" class="Symbol">→</a> <a id="1443" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1447" class="Symbol">_)</a>
<a id="1450" href="Causality.CausalGraph.html#1450" class="Bound">P</a> <a id="1452" href="Causality.CausalGraph.html#1378" class="Function Operator">-×-</a> <a id="1456" href="Causality.CausalGraph.html#1456" class="Bound">Q</a> <a id="1458" class="Symbol">=</a> <a id="1460" class="Symbol">λ</a> <a id="1462" href="Causality.CausalGraph.html#1462" class="Bound">x</a> <a id="1464" class="Symbol">→</a> <a id="1466" href="Causality.CausalGraph.html#1450" class="Bound">P</a> <a id="1468" href="Causality.CausalGraph.html#1462" class="Bound">x</a> <a id="1470" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1472" href="Causality.CausalGraph.html#1456" class="Bound">Q</a> <a id="1474" href="Causality.CausalGraph.html#1462" class="Bound">x</a>

<a id="_-⊎-_"></a><a id="1477" href="Causality.CausalGraph.html#1477" class="Function Operator">_-⊎-_</a> <a id="1483" class="Symbol">:</a> <a id="1485" class="Symbol">∀</a> <a id="1487" class="Symbol">{</a><a id="1488" href="Causality.CausalGraph.html#1488" class="Bound">a</a> <a id="1490" href="Causality.CausalGraph.html#1490" class="Bound">b</a> <a id="1492" href="Causality.CausalGraph.html#1492" class="Bound">c</a><a id="1493" class="Symbol">}</a> <a id="1495" class="Symbol">{</a><a id="1496" href="Causality.CausalGraph.html#1496" class="Bound">A</a> <a id="1498" class="Symbol">:</a> <a id="1500" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1504" href="Causality.CausalGraph.html#1488" class="Bound">a</a><a id="1505" class="Symbol">}</a> <a id="1507" class="Symbol">→</a> <a id="1509" class="Symbol">(</a><a id="1510" href="Causality.CausalGraph.html#1496" class="Bound">A</a> <a id="1512" class="Symbol">→</a> <a id="1514" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1518" href="Causality.CausalGraph.html#1490" class="Bound">b</a><a id="1519" class="Symbol">)</a> <a id="1521" class="Symbol">→</a> <a id="1523" class="Symbol">(</a><a id="1524" href="Causality.CausalGraph.html#1496" class="Bound">A</a> <a id="1526" class="Symbol">→</a> <a id="1528" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1532" href="Causality.CausalGraph.html#1492" class="Bound">c</a><a id="1533" class="Symbol">)</a> <a id="1535" class="Symbol">→</a> <a id="1537" class="Symbol">(</a><a id="1538" href="Causality.CausalGraph.html#1496" class="Bound">A</a> <a id="1540" class="Symbol">→</a> <a id="1542" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1546" class="Symbol">_)</a>
<a id="1549" href="Causality.CausalGraph.html#1549" class="Bound">P</a> <a id="1551" href="Causality.CausalGraph.html#1477" class="Function Operator">-⊎-</a> <a id="1555" href="Causality.CausalGraph.html#1555" class="Bound">Q</a> <a id="1557" class="Symbol">=</a> <a id="1559" class="Symbol">λ</a> <a id="1561" href="Causality.CausalGraph.html#1561" class="Bound">x</a> <a id="1563" class="Symbol">→</a> <a id="1565" href="Causality.CausalGraph.html#1549" class="Bound">P</a> <a id="1567" href="Causality.CausalGraph.html#1561" class="Bound">x</a> <a id="1569" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="1571" href="Causality.CausalGraph.html#1555" class="Bound">Q</a> <a id="1573" href="Causality.CausalGraph.html#1561" class="Bound">x</a>
</pre></details>

We parameterize our development by an arbitrary DAG $G$.

<pre class="Agda"><a id="1657" class="Keyword">module</a> <a id="CausalGraph"></a><a id="1664" href="Causality.CausalGraph.html#1664" class="Module">CausalGraph</a> <a id="1676" class="Symbol">(</a><a id="1677" href="Causality.CausalGraph.html#1677" class="Bound">G</a> <a id="1679" class="Symbol">:</a> <a id="1681" href="Causality.Data.Graph.html#2250" class="Record">DAG</a><a id="1684" class="Symbol">)</a> <a id="1686" class="Keyword">where</a>

  <a id="1695" class="Keyword">open</a> <a id="1700" href="Causality.Data.Graph.html#2250" class="Module">DAG</a> <a id="1704" href="Causality.CausalGraph.html#1677" class="Bound">G</a>
</pre>
We define a "path" through a causal graph to be a list of vertices connected by adjacencies.

<pre class="Agda">  <a id="1815" class="Keyword">record</a> <a id="CausalGraph.Path"></a><a id="1822" href="Causality.CausalGraph.html#1822" class="Record">Path</a> <a id="1827" class="Symbol">:</a> <a id="1829" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1833" class="Keyword">where</a>
    <a id="1843" class="Keyword">field</a> <a id="CausalGraph.Path.nodes"></a><a id="1849" href="Causality.CausalGraph.html#1849" class="Field">nodes</a>              <a id="1868" class="Symbol">:</a> <a id="1870" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1875" href="Causality.Data.Graph.html#709" class="Function">V</a>
    <a id="1881" class="Keyword">field</a> <a id="CausalGraph.Path.linked"></a><a id="1887" href="Causality.CausalGraph.html#1887" class="Field">linked</a>             <a id="1906" class="Symbol">:</a> <a id="1908" href="Data.List.Relation.Unary.Linked.html#1390" class="Datatype">Linked</a> <a id="1915" href="Causality.Data.Graph.html#949" class="Function Operator">_∃——_</a> <a id="1921" href="Causality.CausalGraph.html#1849" class="Field">nodes</a>
</pre>
We require that the path be acyclic, i.e. that no vertex is revisited, i.e. that the list of vertices
has no duplicates. We will also require that there are at least two vertices in our list, so that
we have distinct start– and endpoints.

<pre class="Agda">    <a id="2180" class="Keyword">field</a> <a id="CausalGraph.Path.acyclic"></a><a id="2186" href="Causality.CausalGraph.html#2186" class="Field">acyclic</a>            <a id="2205" class="Symbol">:</a> <a id="2207" href="Data.List.Relation.Unary.Unique.Setoid.html#719" class="Datatype">Unique</a> <a id="2214" href="Causality.CausalGraph.html#1849" class="Field">nodes</a>
    <a id="2224" class="Keyword">field</a> <a id="CausalGraph.Path.distinct-endpoints"></a><a id="2230" href="Causality.CausalGraph.html#2230" class="Field">distinct-endpoints</a> <a id="2249" class="Symbol">:</a> <a id="2251" href="Data.List.Base.html#4864" class="Function">length</a> <a id="2258" href="Causality.CausalGraph.html#1849" class="Field">nodes</a> <a id="2264" href="Data.Nat.Base.html#1679" class="Function Operator">≥</a> <a id="2266" class="Number">2</a>

    <a id="CausalGraph.Path.nonempty"></a><a id="2273" href="Causality.CausalGraph.html#2273" class="Function">nonempty</a> <a id="2282" class="Symbol">:</a> <a id="2284" href="Causality.CausalGraph.html#1849" class="Field">nodes</a> <a id="2290" href="Relation.Binary.PropositionalEquality.Core.html#830" class="Function Operator">≢</a> <a id="2292" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
    <a id="2299" href="Causality.CausalGraph.html#2273" class="Function">nonempty</a> <a id="2308" href="Causality.CausalGraph.html#2308" class="Bound">nodes≡[]</a>
      <a id="2323" class="Keyword">with</a> <a id="2328" href="Causality.CausalGraph.html#1849" class="Field">nodes</a> <a id="2334" class="Symbol">|</a> <a id="2336" href="Causality.CausalGraph.html#2230" class="Field">distinct-endpoints</a>
    <a id="2359" class="Symbol">...</a>  <a id="2364" class="Symbol">|</a> <a id="2366" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>    <a id="2372" class="Symbol">|</a> <a id="2374" class="Symbol">()</a>
    <a id="2381" class="Symbol">...</a>  <a id="2386" class="Symbol">|</a> <a id="2388" class="Symbol">_</a> <a id="2390" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2392" class="Symbol">_</a> <a id="2394" class="Symbol">|</a> <a id="2396" href="Data.Nat.Base.html#1600" class="InductiveConstructor">s≤s</a> <a id="2400" class="Symbol">_</a> <a id="2402" class="Symbol">=</a> <a id="2404" href="Function.Base.html#4121" class="Function Operator">case</a> <a id="2409" class="Bound">nodes≡[]</a> <a id="2418" href="Function.Base.html#4121" class="Function Operator">of</a> <a id="2421" class="Symbol">λ()</a>

    <a id="CausalGraph.Path.start"></a><a id="2430" href="Causality.CausalGraph.html#2430" class="Function">start</a> <a id="2436" class="Symbol">:</a> <a id="2438" href="Causality.Data.Graph.html#709" class="Function">V</a>
    <a id="2444" href="Causality.CausalGraph.html#2430" class="Function">start</a> <a id="2450" class="Symbol">=</a> <a id="2452" href="Causality.Data.List.html#1122" class="Function">head-of-nonempty</a> <a id="2469" href="Causality.CausalGraph.html#2273" class="Function">nonempty</a> <a id="2478" href="Causality.CausalGraph.html#1043" class="Field Operator">₁</a>

    <a id="CausalGraph.Path.end"></a><a id="2485" href="Causality.CausalGraph.html#2485" class="Function">end</a> <a id="2489" class="Symbol">:</a> <a id="2491" href="Causality.Data.Graph.html#709" class="Function">V</a>
    <a id="2497" href="Causality.CausalGraph.html#2485" class="Function">end</a> <a id="2501" class="Symbol">=</a> <a id="2503" href="Causality.Data.List.html#839" class="Function">last-of-nonempty</a> <a id="2520" href="Causality.CausalGraph.html#2273" class="Function">nonempty</a> <a id="2529" href="Causality.CausalGraph.html#1043" class="Field Operator">₁</a>

  <a id="2534" class="Keyword">open</a> <a id="2539" href="Causality.CausalGraph.html#1822" class="Module">Path</a>
</pre>
For any two vertices $i, j$ in $G$, we will let `i —↠ j` denote the set of paths from $i$ to $j$.

<pre class="Agda">  <a id="CausalGraph._—↠_"></a><a id="2658" href="Causality.CausalGraph.html#2658" class="Function Operator">_—↠_</a> <a id="2663" class="Symbol">:</a> <a id="2665" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="2667" class="Symbol">→</a> <a id="2669" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="2671" class="Symbol">→</a> <a id="2673" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="2679" href="Causality.CausalGraph.html#2679" class="Bound">from</a> <a id="2684" href="Causality.CausalGraph.html#2658" class="Function Operator">—↠</a> <a id="2687" href="Causality.CausalGraph.html#2687" class="Bound">to</a> <a id="2690" class="Symbol">=</a> <a id="2692" href="Data.Product.html#1806" class="Function">∃[</a> <a id="2695" href="Causality.CausalGraph.html#2695" class="Bound">p</a> <a id="2697" href="Data.Product.html#1806" class="Function">]</a> <a id="2699" href="Causality.CausalGraph.html#2430" class="Function">start</a> <a id="2705" href="Causality.CausalGraph.html#2695" class="Bound">p</a> <a id="2707" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2709" href="Causality.CausalGraph.html#2679" class="Bound">from</a> <a id="2714" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2716" href="Causality.CausalGraph.html#2485" class="Function">end</a> <a id="2720" href="Causality.CausalGraph.html#2695" class="Bound">p</a> <a id="2722" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2724" href="Causality.CausalGraph.html#2687" class="Bound">to</a>
</pre>
We will say `i ∃—↠ j` iff there exists a path starting at $i$ and ending at $j$.

<pre class="Agda">  <a id="CausalGraph._∃—↠_"></a><a id="2824" href="Causality.CausalGraph.html#2824" class="Function Operator">_∃—↠_</a> <a id="2830" class="Symbol">=</a> <a id="2832" href="Causality.CausalGraph.html#2658" class="Function Operator">_—↠_</a>
</pre>
<details>
<summary>Some helper functions for working with paths.</summary>

<pre class="Agda">  <a id="CausalGraph.triples-along"></a><a id="2928" href="Causality.CausalGraph.html#2928" class="Function">triples-along</a> <a id="2942" class="Symbol">:</a> <a id="2944" href="Causality.CausalGraph.html#1822" class="Record">Path</a> <a id="2949" class="Symbol">→</a> <a id="2951" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="2956" class="Symbol">(</a><a id="2957" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="2959" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2961" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="2963" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2965" href="Causality.Data.Graph.html#709" class="Function">V</a><a id="2966" class="Symbol">)</a>
  <a id="2970" href="Causality.CausalGraph.html#2928" class="Function">triples-along</a> <a id="2984" class="Symbol">=</a> <a id="2986" href="Causality.Data.List.html#372" class="Function">triples</a> <a id="2994" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="2996" href="Causality.CausalGraph.html#1849" class="Field">nodes</a>

  <a id="CausalGraph._visits_"></a><a id="3005" href="Causality.CausalGraph.html#3005" class="Function Operator">_visits_</a> <a id="3014" class="Symbol">:</a> <a id="3016" class="Symbol">(</a><a id="3017" href="Causality.CausalGraph.html#3017" class="Bound">p</a> <a id="3019" class="Symbol">:</a> <a id="3021" href="Causality.CausalGraph.html#1822" class="Record">Path</a><a id="3025" class="Symbol">)</a> <a id="3027" class="Symbol">→</a> <a id="3029" class="Symbol">(</a><a id="3030" href="Causality.CausalGraph.html#3030" class="Bound">v</a> <a id="3032" class="Symbol">:</a> <a id="3034" href="Causality.Data.Graph.html#709" class="Function">V</a><a id="3035" class="Symbol">)</a> <a id="3037" class="Symbol">→</a> <a id="3039" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="3045" href="Causality.CausalGraph.html#3045" class="Bound">p</a> <a id="3047" href="Causality.CausalGraph.html#3005" class="Function Operator">visits</a> <a id="3054" href="Causality.CausalGraph.html#3054" class="Bound">v</a> <a id="3056" class="Symbol">=</a> <a id="3058" href="Causality.CausalGraph.html#3054" class="Bound">v</a> <a id="3060" href="Data.List.Membership.Setoid.html#887" class="Function Operator">∈</a> <a id="3062" href="Causality.CausalGraph.html#1849" class="Field">nodes</a> <a id="3068" href="Causality.CausalGraph.html#3045" class="Bound">p</a>
    <a id="3074" class="Keyword">where</a> <a id="3080" class="Keyword">open</a> <a id="3085" class="Keyword">import</a> <a id="3092" href="Data.List.Membership.Propositional.html" class="Module">Data.List.Membership.Propositional</a> <a id="3127" class="Keyword">using</a> <a id="3133" class="Symbol">(</a><a id="3134" href="Data.List.Membership.Setoid.html#887" class="Function Operator">_∈_</a><a id="3137" class="Symbol">)</a>
</pre></details>

A subset of $V$ is a valid conditioning set (w.r.t. some path `i —↠ j`) iff $C \subseteq V \setminus \{ i , j \}$.

<pre class="Agda">  <a id="CausalGraph.ConditioningSet"></a><a id="3281" href="Causality.CausalGraph.html#3281" class="Function">ConditioningSet</a> <a id="3297" class="Symbol">:</a> <a id="3299" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="3301" class="Symbol">→</a> <a id="3303" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="3305" class="Symbol">→</a> <a id="3307" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3311" class="Symbol">_</a>
  <a id="3315" href="Causality.CausalGraph.html#3281" class="Function">ConditioningSet</a> <a id="3331" href="Causality.CausalGraph.html#3331" class="Bound">i</a> <a id="3333" href="Causality.CausalGraph.html#3333" class="Bound">j</a> <a id="3335" class="Symbol">=</a> <a id="3337" href="Agda.Builtin.Sigma.html#148" class="Record">Σ</a> <a id="3339" class="Symbol">(</a><a id="3340" href="Data.Fin.Subset.html#1208" class="Function">Subset</a> <a id="3347" href="Causality.Data.Graph.html#698" class="Function">|V|</a><a id="3350" class="Symbol">)</a> <a id="3352" class="Symbol">(</a><a id="3353" href="Causality.Data.Fin.Subset.html#1262" class="Function Operator">_⊆∖</a> <a id="3357" href="Causality.Data.Fin.Subset.html#1325" class="Function Operator">⁅</a> <a id="3359" href="Causality.CausalGraph.html#3331" class="Bound">i</a> <a id="3361" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3363" href="Causality.CausalGraph.html#3333" class="Bound">j</a> <a id="3365" href="Causality.Data.Fin.Subset.html#1325" class="Function Operator">⁆₂</a><a id="3367" class="Symbol">)</a>
</pre>
We will denote the empty conditioning set by $\varnothing$.

<pre class="Agda">  <a id="CausalGraph.∅"></a><a id="3445" href="Causality.CausalGraph.html#3445" class="Function">∅</a> <a id="3447" class="Symbol">:</a> <a id="3449" class="Symbol">∀</a> <a id="3451" class="Symbol">{</a><a id="3452" href="Causality.CausalGraph.html#3452" class="Bound">i</a> <a id="3454" href="Causality.CausalGraph.html#3454" class="Bound">j</a><a id="3455" class="Symbol">}</a> <a id="3457" class="Symbol">→</a> <a id="3459" href="Causality.CausalGraph.html#3281" class="Function">ConditioningSet</a> <a id="3475" href="Causality.CausalGraph.html#3452" class="Bound">i</a> <a id="3477" href="Causality.CausalGraph.html#3454" class="Bound">j</a>
  <a id="3481" href="Causality.CausalGraph.html#3445" class="Function">∅</a> <a id="3483" class="Symbol">=</a> <a id="3485" href="Data.Fin.Subset.html#1357" class="Function">Fin.⊥</a> <a id="3491" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3493" href="Data.Fin.Subset.Properties.html#4358" class="Function">Fin.⊥⊆</a>
</pre>
<details>
<summary>Groundwork to let us define colliders, noncolliders, etc.</summary>

<pre class="Agda">  <a id="3603" class="Keyword">module</a> <a id="CausalGraph.Pattern"></a><a id="3610" href="Causality.CausalGraph.html#3610" class="Module">Pattern</a> <a id="3618" class="Keyword">where</a>

    <a id="CausalGraph.Pattern.Pattern"></a><a id="3629" href="Causality.CausalGraph.html#3629" class="Function">Pattern</a> <a id="3637" class="Symbol">:</a> <a id="3639" class="Symbol">∀</a> <a id="3641" class="Symbol">{</a><a id="3642" href="Causality.CausalGraph.html#3642" class="Bound">a</a><a id="3643" class="Symbol">}</a> <a id="3645" class="Symbol">→</a> <a id="3647" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3651" class="Symbol">_</a>
    <a id="3657" href="Causality.CausalGraph.html#3629" class="Function">Pattern</a> <a id="3665" class="Symbol">{</a><a id="3666" href="Causality.CausalGraph.html#3666" class="Bound">a</a><a id="3667" class="Symbol">}</a> <a id="3669" class="Symbol">=</a> <a id="3671" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="3673" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3675" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="3677" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3679" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="3681" class="Symbol">→</a> <a id="3683" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3687" href="Causality.CausalGraph.html#3666" class="Bound">a</a>


    <a id="3695" class="Keyword">module</a> <a id="CausalGraph.Pattern.Notation"></a><a id="3702" href="Causality.CausalGraph.html#3702" class="Module">Notation</a> <a id="3711" class="Keyword">where</a>

      <a id="CausalGraph.Pattern.Notation._∙_"></a><a id="3724" href="Causality.CausalGraph.html#3724" class="Function Operator">_∙_</a> <a id="3728" class="Symbol">:</a> <a id="3730" class="Symbol">∀</a> <a id="3732" class="Symbol">{</a><a id="3733" href="Causality.CausalGraph.html#3733" class="Bound">a</a> <a id="3735" href="Causality.CausalGraph.html#3735" class="Bound">b</a><a id="3736" class="Symbol">}</a> <a id="3738" class="Symbol">→</a> <a id="3740" class="Symbol">(</a><a id="3741" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="3743" class="Symbol">→</a> <a id="3745" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="3747" class="Symbol">→</a> <a id="3749" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3753" href="Causality.CausalGraph.html#3733" class="Bound">a</a><a id="3754" class="Symbol">)</a> <a id="3756" class="Symbol">→</a> <a id="3758" class="Symbol">(</a><a id="3759" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="3761" class="Symbol">→</a> <a id="3763" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="3765" class="Symbol">→</a> <a id="3767" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3771" href="Causality.CausalGraph.html#3735" class="Bound">b</a><a id="3772" class="Symbol">)</a> <a id="3774" class="Symbol">→</a> <a id="3776" href="Causality.CausalGraph.html#3629" class="Function">Pattern</a>
      <a id="3790" href="Causality.CausalGraph.html#3790" class="Bound Operator">_l-x_</a> <a id="3796" href="Causality.CausalGraph.html#3724" class="Function Operator">∙</a> <a id="3798" href="Causality.CausalGraph.html#3798" class="Bound Operator">_x-r_</a> <a id="3804" class="Symbol">=</a> <a id="3806" class="Symbol">λ{</a> <a id="3809" class="Symbol">(</a><a id="3810" href="Causality.CausalGraph.html#3810" class="Bound">l</a> <a id="3812" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3814" href="Causality.CausalGraph.html#3814" class="Bound">x</a> <a id="3816" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3818" href="Causality.CausalGraph.html#3818" class="Bound">r</a><a id="3819" class="Symbol">)</a> <a id="3821" class="Symbol">→</a> <a id="3823" href="Causality.CausalGraph.html#3810" class="Bound">l</a> <a id="3825" href="Causality.CausalGraph.html#3790" class="Bound Operator">l-x</a> <a id="3829" href="Causality.CausalGraph.html#3814" class="Bound">x</a> <a id="3831" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3833" href="Causality.CausalGraph.html#3814" class="Bound">x</a> <a id="3835" href="Causality.CausalGraph.html#3798" class="Bound Operator">x-r</a> <a id="3839" href="Causality.CausalGraph.html#3818" class="Bound">r</a> <a id="3841" class="Symbol">}</a>

      <a id="CausalGraph.Pattern.Notation.⟶"></a><a id="3850" href="Causality.CausalGraph.html#3850" class="Function">⟶</a> <a id="3852" class="Symbol">=</a> <a id="3854" href="Causality.Data.Graph.html#786" class="Function Operator">_∃⟶_</a>
      <a id="CausalGraph.Pattern.Notation.⟵"></a><a id="3865" href="Causality.CausalGraph.html#3865" class="Function">⟵</a> <a id="3867" class="Symbol">=</a> <a id="3869" href="Causality.Data.Graph.html#904" class="Function Operator">_∃⟵_</a>

    <a id="3879" class="Keyword">open</a> <a id="3884" href="Causality.CausalGraph.html#3702" class="Module">Notation</a>
</pre></details>

<pre class="Agda">    <a id="CausalGraph.Pattern.collider"></a><a id="3921" href="Causality.CausalGraph.html#3921" class="Function">collider</a> <a id="CausalGraph.Pattern.common-cause"></a><a id="3930" href="Causality.CausalGraph.html#3930" class="Function">common-cause</a> <a id="CausalGraph.Pattern.mediator"></a><a id="3943" href="Causality.CausalGraph.html#3943" class="Function">mediator</a> <a id="3952" class="Symbol">:</a> <a id="3954" href="Causality.CausalGraph.html#3629" class="Function">Pattern</a>
    <a id="3966" href="Causality.CausalGraph.html#3921" class="Function">collider</a>     <a id="3979" class="Symbol">=</a> <a id="3981" href="Causality.CausalGraph.html#3850" class="Function">⟶</a> <a id="3983" href="Causality.CausalGraph.html#3724" class="Function Operator">∙</a> <a id="3985" href="Causality.CausalGraph.html#3865" class="Function">⟵</a>
    <a id="3991" href="Causality.CausalGraph.html#3930" class="Function">common-cause</a> <a id="4004" class="Symbol">=</a> <a id="4006" href="Causality.CausalGraph.html#3865" class="Function">⟵</a> <a id="4008" href="Causality.CausalGraph.html#3724" class="Function Operator">∙</a> <a id="4010" href="Causality.CausalGraph.html#3850" class="Function">⟶</a>
    <a id="4016" href="Causality.CausalGraph.html#3943" class="Function">mediator</a>     <a id="4029" class="Symbol">=</a> <a id="4031" href="Causality.CausalGraph.html#3850" class="Function">⟶</a> <a id="4033" href="Causality.CausalGraph.html#3724" class="Function Operator">∙</a> <a id="4035" href="Causality.CausalGraph.html#3850" class="Function">⟶</a>
</pre>
A noncollider is either a common cause or a mediator.

<pre class="Agda">    <a id="CausalGraph.Pattern.noncollider"></a><a id="4109" href="Causality.CausalGraph.html#4109" class="Function">noncollider</a> <a id="4121" class="Symbol">:</a> <a id="4123" href="Causality.CausalGraph.html#3629" class="Function">Pattern</a>
    <a id="4135" href="Causality.CausalGraph.html#4109" class="Function">noncollider</a> <a id="4147" class="Symbol">=</a> <a id="4149" href="Causality.CausalGraph.html#3930" class="Function">common-cause</a> <a id="4162" href="Causality.CausalGraph.html#1477" class="Function Operator">-⊎-</a> <a id="4166" href="Causality.CausalGraph.html#3943" class="Function">mediator</a>
</pre>
We will write `colliders along p` to denote "the set of all vertices that are colliders along some path $p$"
(and similarly for common causes, etc.).

<pre class="Agda">    <a id="CausalGraph.Pattern._along_"></a><a id="4343" href="Causality.CausalGraph.html#4343" class="Function Operator">_along_</a> <a id="4351" class="Symbol">:</a> <a id="4353" class="Symbol">∀</a> <a id="4355" class="Symbol">{</a><a id="4356" href="Causality.CausalGraph.html#4356" class="Bound">a</a><a id="4357" class="Symbol">}</a> <a id="4359" class="Symbol">→</a> <a id="4361" href="Causality.CausalGraph.html#3629" class="Function">Pattern</a> <a id="4369" class="Symbol">{</a><a id="4370" href="Causality.CausalGraph.html#4356" class="Bound">a</a><a id="4371" class="Symbol">}</a> <a id="4373" class="Symbol">→</a> <a id="4375" href="Causality.CausalGraph.html#1822" class="Record">Path</a> <a id="4380" class="Symbol">→</a> <a id="4382" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="4386" class="Symbol">_</a>
    <a id="4392" href="Causality.CausalGraph.html#4392" class="Bound">pat</a> <a id="4396" href="Causality.CausalGraph.html#4343" class="Function Operator">along</a> <a id="4402" href="Causality.CausalGraph.html#4402" class="Bound">p</a> <a id="4404" class="Symbol">=</a>
      <a id="4412" href="Data.Product.html#916" class="Function">Σ[</a> <a id="4415" href="Causality.CausalGraph.html#4415" class="Bound">x</a> <a id="4417" href="Data.Product.html#916" class="Function">∈</a> <a id="4419" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="4421" href="Data.Product.html#916" class="Function">]</a>
        <a id="4431" href="Data.Product.html#916" class="Function">Σ[</a> <a id="4434" href="Causality.CausalGraph.html#4434" class="Bound">triple</a><a id="4440" class="Symbol">@(_</a> <a id="4444" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4446" href="Causality.CausalGraph.html#4446" class="Bound">x′</a> <a id="4449" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4451" class="Symbol">_)</a> <a id="4454" href="Data.Product.html#916" class="Function">∈</a> <a id="4456" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="4458" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4460" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="4462" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4464" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="4466" href="Data.Product.html#916" class="Function">]</a>
          <a id="4478" href="Causality.CausalGraph.html#4415" class="Bound">x</a> <a id="4480" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4482" href="Causality.CausalGraph.html#4446" class="Bound">x′</a> <a id="4485" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4487" href="Causality.CausalGraph.html#4392" class="Bound">pat</a> <a id="4491" href="Causality.CausalGraph.html#4434" class="Bound">triple</a>

    <a id="CausalGraph.Pattern.colliders"></a><a id="4503" href="Causality.CausalGraph.html#4503" class="Function">colliders</a>     <a id="4517" class="Symbol">=</a> <a id="4519" href="Causality.CausalGraph.html#3921" class="Function">collider</a>
    <a id="CausalGraph.Pattern.common-causes"></a><a id="4532" href="Causality.CausalGraph.html#4532" class="Function">common-causes</a> <a id="4546" class="Symbol">=</a> <a id="4548" href="Causality.CausalGraph.html#3930" class="Function">common-cause</a>
    <a id="CausalGraph.Pattern.mediators"></a><a id="4565" href="Causality.CausalGraph.html#4565" class="Function">mediators</a>     <a id="4579" class="Symbol">=</a> <a id="4581" href="Causality.CausalGraph.html#3943" class="Function">mediator</a>
    <a id="CausalGraph.Pattern.noncolliders"></a><a id="4594" href="Causality.CausalGraph.html#4594" class="Function">noncolliders</a>  <a id="4608" class="Symbol">=</a> <a id="4610" href="Causality.CausalGraph.html#4109" class="Function">noncollider</a>

  <a id="4625" class="Keyword">open</a> <a id="4630" href="Causality.CausalGraph.html#3610" class="Module">Pattern</a>
</pre>
A vertex $j$ is a descendant of $i$ iff there exists a path from $i$ to $j$.

<pre class="Agda">  <a id="CausalGraph.descendants"></a><a id="4731" href="Causality.CausalGraph.html#4731" class="Function">descendants</a> <a id="4743" class="Symbol">:</a> <a id="4745" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="4747" class="Symbol">→</a> <a id="4749" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="4755" href="Causality.CausalGraph.html#4731" class="Function">descendants</a> <a id="4767" href="Causality.CausalGraph.html#4767" class="Bound">i</a> <a id="4769" class="Symbol">=</a> <a id="4771" href="Data.Product.html#1806" class="Function">∃[</a> <a id="4774" href="Causality.CausalGraph.html#4774" class="Bound">j</a> <a id="4776" href="Data.Product.html#1806" class="Function">]</a> <a id="4778" href="Causality.CausalGraph.html#4767" class="Bound">i</a> <a id="4780" href="Causality.CausalGraph.html#2824" class="Function Operator">∃—↠</a> <a id="4784" href="Causality.CausalGraph.html#4774" class="Bound">j</a>
</pre>
A path from $i$ to $j$ is unblocked (conditional on $C$) iff:

<pre class="Agda">  <a id="CausalGraph.unblocked_∣_"></a><a id="4864" href="Causality.CausalGraph.html#4864" class="Function Operator">unblocked_∣_</a> <a id="4877" class="Symbol">:</a> <a id="4879" class="Symbol">∀</a> <a id="4881" class="Symbol">{</a><a id="4882" href="Causality.CausalGraph.html#4882" class="Bound">i</a> <a id="4884" href="Causality.CausalGraph.html#4884" class="Bound">j</a><a id="4885" class="Symbol">}</a> <a id="4887" class="Symbol">→</a> <a id="4889" href="Causality.CausalGraph.html#4882" class="Bound">i</a> <a id="4891" href="Causality.CausalGraph.html#2658" class="Function Operator">—↠</a> <a id="4894" href="Causality.CausalGraph.html#4884" class="Bound">j</a> <a id="4896" class="Symbol">→</a> <a id="4898" href="Causality.CausalGraph.html#3281" class="Function">ConditioningSet</a> <a id="4914" href="Causality.CausalGraph.html#4882" class="Bound">i</a> <a id="4916" href="Causality.CausalGraph.html#4884" class="Bound">j</a> <a id="4918" class="Symbol">→</a> <a id="4920" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="4926" href="Causality.CausalGraph.html#4864" class="Function Operator">unblocked</a> <a id="4936" class="Symbol">(</a><a id="4937" href="Causality.CausalGraph.html#4937" class="Bound">p</a> <a id="4939" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4941" class="Symbol">_)</a> <a id="4944" href="Causality.CausalGraph.html#4864" class="Function Operator">∣</a> <a id="4946" class="Symbol">(</a><a id="4947" href="Causality.CausalGraph.html#4947" class="Bound">C</a> <a id="4949" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4951" class="Symbol">_)</a> <a id="4954" class="Symbol">=</a>
</pre>
1. all noncolliders along the path are not in $C$, and

<pre class="Agda">    <a id="5029" class="Symbol">((</a><a id="5031" href="Causality.CausalGraph.html#5031" class="Bound">v</a> <a id="5033" class="Symbol">:</a> <a id="5035" href="Causality.CausalGraph.html#4594" class="Function">noncolliders</a> <a id="5048" href="Causality.CausalGraph.html#4343" class="Function Operator">along</a> <a id="5054" href="Causality.CausalGraph.html#4937" class="Bound">p</a><a id="5055" class="Symbol">)</a> <a id="5057" class="Symbol">→</a> <a id="5059" href="Causality.CausalGraph.html#5031" class="Bound">v</a> <a id="5061" href="Causality.CausalGraph.html#1043" class="Field Operator">₁</a> <a id="5063" href="Data.Fin.Subset.html#1778" class="Function Operator">∉</a> <a id="5065" href="Causality.CausalGraph.html#4947" class="Bound">C</a><a id="5066" class="Symbol">)</a> <a id="5068" href="Data.Product.html#1167" class="Function Operator">×</a>
</pre>
2. all colliders along $p$ are:

<pre class="Agda">    <a id="5120" class="Symbol">((</a><a id="5122" href="Causality.CausalGraph.html#5122" class="Bound">v</a> <a id="5124" class="Symbol">:</a> <a id="5126" href="Causality.CausalGraph.html#4503" class="Function">colliders</a> <a id="5136" href="Causality.CausalGraph.html#4343" class="Function Operator">along</a> <a id="5142" href="Causality.CausalGraph.html#4937" class="Bound">p</a><a id="5143" class="Symbol">)</a> <a id="5145" class="Symbol">→</a>
</pre>
   a) in $C$, or

<pre class="Agda">       <a id="5185" href="Causality.CausalGraph.html#5122" class="Bound">v</a> <a id="5187" href="Causality.CausalGraph.html#1043" class="Field Operator">₁</a> <a id="5189" href="Data.Fin.Subset.html#1724" class="Function Operator">∈</a> <a id="5191" href="Causality.CausalGraph.html#4947" class="Bound">C</a> <a id="5193" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a>
</pre>
   b) have a descendant in $C$.

<pre class="Agda">       <a id="5248" href="Data.Product.html#916" class="Function">Σ[</a> <a id="5251" href="Causality.CausalGraph.html#5251" class="Bound">i</a> <a id="5253" href="Data.Product.html#916" class="Function">∈</a> <a id="5255" href="Causality.CausalGraph.html#4731" class="Function">descendants</a> <a id="5267" class="Symbol">(</a><a id="5268" href="Causality.CausalGraph.html#5122" class="Bound">v</a> <a id="5270" href="Causality.CausalGraph.html#1043" class="Field Operator">₁</a><a id="5271" class="Symbol">)</a> <a id="5273" href="Data.Product.html#916" class="Function">]</a> <a id="5275" href="Causality.CausalGraph.html#5251" class="Bound">i</a> <a id="5277" href="Causality.CausalGraph.html#1043" class="Field Operator">₁</a> <a id="5279" href="Data.Fin.Subset.html#1724" class="Function Operator">∈</a> <a id="5281" href="Causality.CausalGraph.html#4947" class="Bound">C</a><a id="5282" class="Symbol">)</a>
</pre>
<pre class="Agda">    <a id="5301" class="Keyword">where</a> <a id="5307" class="Keyword">open</a> <a id="5312" class="Keyword">import</a> <a id="5319" href="Data.Fin.Subset.html" class="Module">Data.Fin.Subset</a> <a id="5335" class="Keyword">using</a> <a id="5341" class="Symbol">(</a><a id="5342" href="Data.Fin.Subset.html#1724" class="Function Operator">_∈_</a><a id="5345" class="Symbol">;</a> <a id="5347" href="Data.Fin.Subset.html#1778" class="Function Operator">_∉_</a><a id="5350" class="Symbol">)</a>
</pre>
A path is blocked iff it is not unblocked.

<pre class="Agda">  <a id="CausalGraph.blocked_∣_"></a><a id="5411" href="Causality.CausalGraph.html#5411" class="Function Operator">blocked_∣_</a> <a id="5422" class="Symbol">:</a> <a id="5424" class="Symbol">∀</a> <a id="5426" class="Symbol">{</a><a id="5427" href="Causality.CausalGraph.html#5427" class="Bound">i</a> <a id="5429" href="Causality.CausalGraph.html#5429" class="Bound">j</a><a id="5430" class="Symbol">}</a> <a id="5432" class="Symbol">→</a> <a id="5434" href="Causality.CausalGraph.html#5427" class="Bound">i</a> <a id="5436" href="Causality.CausalGraph.html#2658" class="Function Operator">—↠</a> <a id="5439" href="Causality.CausalGraph.html#5429" class="Bound">j</a> <a id="5441" class="Symbol">→</a> <a id="5443" href="Causality.CausalGraph.html#3281" class="Function">ConditioningSet</a> <a id="5459" href="Causality.CausalGraph.html#5427" class="Bound">i</a> <a id="5461" href="Causality.CausalGraph.html#5429" class="Bound">j</a> <a id="5463" class="Symbol">→</a> <a id="5465" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="5471" href="Causality.CausalGraph.html#5411" class="Function Operator">blocked</a> <a id="5479" href="Causality.CausalGraph.html#5479" class="Bound">p</a> <a id="5481" href="Causality.CausalGraph.html#5411" class="Function Operator">∣</a> <a id="5483" href="Causality.CausalGraph.html#5483" class="Bound">C</a> <a id="5485" class="Symbol">=</a> <a id="5487" href="Relation.Nullary.html#656" class="Function Operator">¬</a> <a id="5489" href="Causality.CausalGraph.html#4864" class="Function Operator">unblocked</a> <a id="5499" href="Causality.CausalGraph.html#5479" class="Bound">p</a> <a id="5501" href="Causality.CausalGraph.html#4864" class="Function Operator">∣</a> <a id="5503" href="Causality.CausalGraph.html#5483" class="Bound">C</a>
</pre>
Two vertices are $d$-separated (conditional on $C$) iff all paths between them are blocked.

<pre class="Agda">  <a id="CausalGraph._⊥_∣_"></a><a id="5613" href="Causality.CausalGraph.html#5613" class="Function Operator">_⊥_∣_</a> <a id="5619" class="Symbol">:</a> <a id="5621" class="Symbol">(</a><a id="5622" href="Causality.CausalGraph.html#5622" class="Bound">i</a> <a id="5624" href="Causality.CausalGraph.html#5624" class="Bound">j</a> <a id="5626" class="Symbol">:</a> <a id="5628" href="Causality.Data.Graph.html#709" class="Function">V</a><a id="5629" class="Symbol">)</a> <a id="5631" class="Symbol">→</a> <a id="5633" href="Causality.CausalGraph.html#3281" class="Function">ConditioningSet</a> <a id="5649" href="Causality.CausalGraph.html#5622" class="Bound">i</a> <a id="5651" href="Causality.CausalGraph.html#5624" class="Bound">j</a> <a id="5653" class="Symbol">→</a> <a id="5655" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="5661" href="Causality.CausalGraph.html#5661" class="Bound">i</a> <a id="5663" href="Causality.CausalGraph.html#5613" class="Function Operator">⊥</a> <a id="5665" href="Causality.CausalGraph.html#5665" class="Bound">j</a> <a id="5667" href="Causality.CausalGraph.html#5613" class="Function Operator">∣</a> <a id="5669" href="Causality.CausalGraph.html#5669" class="Bound">C</a> <a id="5671" class="Symbol">=</a> <a id="5673" class="Symbol">∀</a> <a id="5675" href="Causality.CausalGraph.html#5675" class="Bound">p</a> <a id="5677" class="Symbol">→</a> <a id="5679" href="Causality.CausalGraph.html#5411" class="Function Operator">blocked</a> <a id="5687" href="Causality.CausalGraph.html#5675" class="Bound">p</a> <a id="5689" href="Causality.CausalGraph.html#5411" class="Function Operator">∣</a> <a id="5691" href="Causality.CausalGraph.html#5669" class="Bound">C</a>
</pre>
Two vertices are $d$-connected (conditional on $C$) iff they are not $d$-separated.

<pre class="Agda">  <a id="CausalGraph._⊥̸_∣_"></a><a id="5793" href="Causality.CausalGraph.html#5793" class="Function Operator">_⊥̸_∣_</a> <a id="5800" class="Symbol">:</a> <a id="5802" class="Symbol">(</a><a id="5803" href="Causality.CausalGraph.html#5803" class="Bound">i</a> <a id="5805" href="Causality.CausalGraph.html#5805" class="Bound">j</a> <a id="5807" class="Symbol">:</a> <a id="5809" href="Causality.Data.Graph.html#709" class="Function">V</a><a id="5810" class="Symbol">)</a> <a id="5812" class="Symbol">→</a> <a id="5814" href="Causality.CausalGraph.html#3281" class="Function">ConditioningSet</a> <a id="5830" href="Causality.CausalGraph.html#5803" class="Bound">i</a> <a id="5832" href="Causality.CausalGraph.html#5805" class="Bound">j</a> <a id="5834" class="Symbol">→</a> <a id="5836" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="5842" href="Causality.CausalGraph.html#5842" class="Bound">i</a> <a id="5844" href="Causality.CausalGraph.html#5793" class="Function Operator">⊥̸</a> <a id="5847" href="Causality.CausalGraph.html#5847" class="Bound">j</a> <a id="5849" href="Causality.CausalGraph.html#5793" class="Function Operator">∣</a> <a id="5851" href="Causality.CausalGraph.html#5851" class="Bound">C</a> <a id="5853" class="Symbol">=</a> <a id="5855" href="Relation.Nullary.html#656" class="Function Operator">¬</a> <a id="5857" href="Causality.CausalGraph.html#5842" class="Bound">i</a> <a id="5859" href="Causality.CausalGraph.html#5613" class="Function Operator">⊥</a> <a id="5861" href="Causality.CausalGraph.html#5847" class="Bound">j</a> <a id="5863" href="Causality.CausalGraph.html#5613" class="Function Operator">∣</a> <a id="5865" href="Causality.CausalGraph.html#5851" class="Bound">C</a>
</pre>
Two vertices are $d$-separated (unconditionally) iff they are $d$-separated conditional on $\varnothing$.

<pre class="Agda">  <a id="CausalGraph._⊥_"></a><a id="5989" href="Causality.CausalGraph.html#5989" class="Function Operator">_⊥_</a> <a id="5993" class="Symbol">:</a> <a id="5995" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="5997" class="Symbol">→</a> <a id="5999" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="6001" class="Symbol">→</a> <a id="6003" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="6009" href="Causality.CausalGraph.html#6009" class="Bound">i</a> <a id="6011" href="Causality.CausalGraph.html#5989" class="Function Operator">⊥</a> <a id="6013" href="Causality.CausalGraph.html#6013" class="Bound">j</a> <a id="6015" class="Symbol">=</a> <a id="6017" href="Causality.CausalGraph.html#6009" class="Bound">i</a> <a id="6019" href="Causality.CausalGraph.html#5613" class="Function Operator">⊥</a> <a id="6021" href="Causality.CausalGraph.html#6013" class="Bound">j</a> <a id="6023" href="Causality.CausalGraph.html#5613" class="Function Operator">∣</a> <a id="6025" href="Causality.CausalGraph.html#3445" class="Function">∅</a>
</pre>
Two vertices are $d$-connected (uncoditionally) iff they are not $d$-separated (unconditionally).

<pre class="Agda">  <a id="CausalGraph._⊥̸_"></a><a id="6141" href="Causality.CausalGraph.html#6141" class="Function Operator">_⊥̸_</a> <a id="6146" class="Symbol">:</a> <a id="6148" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="6150" class="Symbol">→</a> <a id="6152" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="6154" class="Symbol">→</a> <a id="6156" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="6162" href="Causality.CausalGraph.html#6162" class="Bound">i</a> <a id="6164" href="Causality.CausalGraph.html#6141" class="Function Operator">⊥̸</a> <a id="6167" href="Causality.CausalGraph.html#6167" class="Bound">j</a> <a id="6169" class="Symbol">=</a> <a id="6171" href="Causality.CausalGraph.html#6162" class="Bound">i</a> <a id="6173" href="Causality.CausalGraph.html#5793" class="Function Operator">⊥̸</a> <a id="6176" href="Causality.CausalGraph.html#6167" class="Bound">j</a> <a id="6178" href="Causality.CausalGraph.html#5793" class="Function Operator">∣</a> <a id="6180" href="Causality.CausalGraph.html#3445" class="Function">∅</a>
</pre>
To intervene on a set of vertices $S$, we remove all edges going into vertices of $S$.

<pre class="Agda">  <a id="CausalGraph.intervene-on"></a><a id="6285" href="Causality.CausalGraph.html#6285" class="Function">intervene-on</a> <a id="6298" class="Symbol">:</a> <a id="6300" href="Data.Fin.Subset.html#1208" class="Function">Subset</a> <a id="6307" href="Causality.Data.Graph.html#698" class="Function">|V|</a> <a id="6311" class="Symbol">→</a> <a id="6313" href="Causality.Data.Graph.html#2250" class="Record">DAG</a>
  <a id="6319" href="Causality.CausalGraph.html#6285" class="Function">intervene-on</a> <a id="6332" href="Causality.CausalGraph.html#6332" class="Bound">S</a> <a id="6334" class="Symbol">=</a> <a id="6336" href="Causality.Data.Graph.html#2416" class="Function">filter-edges</a> <a id="6349" class="Symbol">(λ{</a> <a id="6353" class="Symbol">(_</a> <a id="6356" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="6358" href="Causality.CausalGraph.html#6358" class="Bound">to</a><a id="6360" class="Symbol">)</a> <a id="6362" class="Symbol">→</a> <a id="6364" href="Relation.Nullary.Negation.Core.html#1355" class="Function">¬?</a> <a id="6367" class="Symbol">(</a><a id="6368" href="Causality.CausalGraph.html#6358" class="Bound">to</a> <a id="6371" href="Data.Fin.Subset.Properties.html#3332" class="Function Operator">∈?</a> <a id="6374" href="Causality.CausalGraph.html#6332" class="Bound">S</a><a id="6375" class="Symbol">)</a> <a id="6377" class="Symbol">})</a>
    <a id="6384" class="Keyword">where</a> <a id="6390" class="Keyword">open</a> <a id="6395" class="Keyword">import</a> <a id="6402" href="Data.Fin.Subset.Properties.html" class="Module">Data.Fin.Subset.Properties</a> <a id="6429" class="Keyword">using</a> <a id="6435" class="Symbol">(</a><a id="6436" href="Data.Fin.Subset.Properties.html#3332" class="Function Operator">_∈?_</a><a id="6440" class="Symbol">)</a>
</pre>