---
title: Causality.CausalGraph
---

Definitions and proofs about causal graphs.

<pre class="Agda"><a id="92" class="Keyword">module</a> <a id="99" href="Causality.CausalGraph.html" class="Module">Causality.CausalGraph</a> <a id="121" class="Keyword">where</a>
</pre>
We import some of the other files in this project (to see the documentation for a module, click on its name).

<pre class="Agda"><a id="251" class="Keyword">open</a> <a id="256" class="Keyword">import</a> <a id="263" href="Causality.Data.Fin.Subset.html" class="Module">Causality.Data.Fin.Subset</a>
<a id="289" class="Keyword">open</a> <a id="294" class="Keyword">import</a> <a id="301" href="Causality.Data.Graph.html" class="Module">Causality.Data.Graph</a>
<a id="322" class="Keyword">open</a> <a id="327" class="Keyword">import</a> <a id="334" href="Causality.Data.Graphoid.html" class="Module">Causality.Data.Graphoid</a>
<a id="358" class="Keyword">open</a> <a id="363" class="Keyword">import</a> <a id="370" href="Causality.Data.List.html" class="Module">Causality.Data.List</a>
</pre>
<details>
<summary>Standard library imports.</summary>

<pre class="Agda"><a id="459" class="Keyword">open</a> <a id="464" class="Keyword">import</a> <a id="471" href="Data.Fin.html" class="Module">Data.Fin</a> <a id="480" class="Keyword">using</a> <a id="486" class="Symbol">(</a><a id="487" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a><a id="490" class="Symbol">)</a>
<a id="492" class="Keyword">open</a> <a id="497" class="Keyword">import</a> <a id="504" href="Data.Fin.Subset.html" class="Module">Data.Fin.Subset</a> <a id="520" class="Keyword">using</a> <a id="526" class="Symbol">(</a><a id="527" href="Data.Fin.Subset.html#1208" class="Function">Subset</a><a id="533" class="Symbol">;</a> <a id="535" href="Data.Fin.Subset.html#2527" class="Function">⋃</a><a id="536" class="Symbol">)</a>
<a id="538" class="Keyword">import</a> <a id="545" href="Data.Fin.Subset.html" class="Module">Data.Fin.Subset</a> <a id="561" class="Symbol">as</a> <a id="564" class="Module">Fin</a>
<a id="568" class="Keyword">import</a> <a id="575" href="Data.Fin.Subset.Properties.html" class="Module">Data.Fin.Subset.Properties</a> <a id="602" class="Symbol">as</a> <a id="605" class="Module">Fin</a>
<a id="609" class="Keyword">open</a> <a id="614" class="Keyword">import</a> <a id="621" href="Data.List.html" class="Module">Data.List</a> <a id="631" class="Keyword">using</a> <a id="637" class="Symbol">(</a><a id="638" href="Agda.Builtin.List.html#130" class="Datatype">List</a><a id="642" class="Symbol">;</a> <a id="644" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷_</a><a id="647" class="Symbol">;</a> <a id="649" href="Data.List.Base.html#10383" class="InductiveConstructor">[]</a><a id="651" class="Symbol">;</a> <a id="653" href="Data.List.Base.html#4864" class="Function">length</a><a id="659" class="Symbol">)</a>
<a id="661" class="Keyword">open</a> <a id="666" class="Keyword">import</a> <a id="673" href="Data.List.Relation.Unary.Linked.html" class="Module">Data.List.Relation.Unary.Linked</a> <a id="705" class="Keyword">using</a> <a id="711" class="Symbol">(</a><a id="712" href="Data.List.Relation.Unary.Linked.html#1390" class="Datatype">Linked</a><a id="718" class="Symbol">)</a>
<a id="720" class="Keyword">open</a> <a id="725" class="Keyword">import</a> <a id="732" href="Data.List.Relation.Unary.Unique.Propositional.html" class="Module">Data.List.Relation.Unary.Unique.Propositional</a> <a id="778" class="Keyword">using</a> <a id="784" class="Symbol">(</a><a id="785" href="Data.List.Relation.Unary.Unique.Setoid.html#719" class="Datatype">Unique</a><a id="791" class="Symbol">)</a>
<a id="793" class="Keyword">import</a> <a id="800" href="Data.List.Relation.Unary.Unique.Propositional.Properties.html" class="Module">Data.List.Relation.Unary.Unique.Propositional.Properties</a> <a id="857" class="Symbol">as</a> <a id="860" class="Module">Unique</a>
<a id="867" class="Keyword">open</a> <a id="872" class="Keyword">import</a> <a id="879" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="888" class="Keyword">using</a> <a id="894" class="Symbol">(</a><a id="895" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="896" class="Symbol">;</a> <a id="898" href="Data.Nat.Base.html#1679" class="Function Operator">_≥_</a><a id="901" class="Symbol">;</a> <a id="903" href="Data.Nat.Base.html#1600" class="InductiveConstructor">s≤s</a><a id="906" class="Symbol">)</a>
<a id="908" class="Keyword">open</a> <a id="913" class="Keyword">import</a> <a id="920" href="Data.Product.html" class="Module">Data.Product</a> <a id="933" class="Keyword">using</a> <a id="939" class="Symbol">(</a><a id="940" href="Data.Product.html#1806" class="Function">∃-syntax</a><a id="948" class="Symbol">;</a> <a id="950" href="Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="951" class="Symbol">;</a> <a id="953" href="Data.Product.html#916" class="Function">Σ-syntax</a><a id="961" class="Symbol">;</a> <a id="963" href="Data.Product.html#1167" class="Function Operator">_×_</a><a id="966" class="Symbol">;</a> <a id="968" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a><a id="971" class="Symbol">)</a> <a id="973" class="Keyword">renaming</a> <a id="982" class="Symbol">(</a><a id="983" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="989" class="Symbol">to</a> <a id="992" class="Field">_₁</a><a id="994" class="Symbol">)</a>
<a id="996" class="Keyword">open</a> <a id="1001" class="Keyword">import</a> <a id="1008" href="Data.Sum.html" class="Module">Data.Sum</a> <a id="1017" class="Keyword">using</a> <a id="1023" class="Symbol">(</a><a id="1024" href="Data.Sum.Base.html#734" class="Datatype Operator">_⊎_</a><a id="1027" class="Symbol">)</a>
<a id="1029" class="Keyword">open</a> <a id="1034" class="Keyword">import</a> <a id="1041" href="Function.html" class="Module">Function</a> <a id="1050" class="Keyword">using</a> <a id="1056" class="Symbol">(</a><a id="1057" href="Function.Base.html#1031" class="Function Operator">_∘_</a><a id="1060" class="Symbol">;</a> <a id="1062" href="Function.Base.html#4121" class="Function Operator">case_of_</a><a id="1070" class="Symbol">)</a>
<a id="1072" class="Keyword">open</a> <a id="1077" class="Keyword">import</a> <a id="1084" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="1122" class="Keyword">using</a> <a id="1128" class="Symbol">(</a><a id="1129" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="1132" class="Symbol">;</a> <a id="1134" href="Relation.Binary.PropositionalEquality.Core.html#830" class="Function Operator">_≢_</a><a id="1137" class="Symbol">;</a> <a id="1139" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="1143" class="Symbol">)</a>
<a id="1145" class="Keyword">open</a> <a id="1150" class="Keyword">import</a> <a id="1157" href="Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="1174" class="Keyword">using</a> <a id="1180" class="Symbol">(</a><a id="1181" href="Relation.Nullary.html#656" class="Function Operator">¬_</a><a id="1183" class="Symbol">)</a>
<a id="1185" class="Keyword">open</a> <a id="1190" class="Keyword">import</a> <a id="1197" href="Relation.Nullary.Negation.html" class="Module">Relation.Nullary.Negation</a> <a id="1223" class="Keyword">using</a> <a id="1229" class="Symbol">(</a><a id="1230" href="Relation.Nullary.Negation.Core.html#1355" class="Function">¬?</a><a id="1232" class="Symbol">)</a>
</pre></details>

<details>
<summary>Some utility functions, for use below.</summary>

<pre class="Agda"><a id="_-×-_"></a><a id="1327" href="Causality.CausalGraph.html#1327" class="Function Operator">_-×-_</a> <a id="1333" class="Symbol">:</a> <a id="1335" class="Symbol">∀</a> <a id="1337" class="Symbol">{</a><a id="1338" href="Causality.CausalGraph.html#1338" class="Bound">a</a> <a id="1340" href="Causality.CausalGraph.html#1340" class="Bound">b</a> <a id="1342" href="Causality.CausalGraph.html#1342" class="Bound">c</a><a id="1343" class="Symbol">}</a> <a id="1345" class="Symbol">{</a><a id="1346" href="Causality.CausalGraph.html#1346" class="Bound">A</a> <a id="1348" class="Symbol">:</a> <a id="1350" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1354" href="Causality.CausalGraph.html#1338" class="Bound">a</a><a id="1355" class="Symbol">}</a> <a id="1357" class="Symbol">→</a> <a id="1359" class="Symbol">(</a><a id="1360" href="Causality.CausalGraph.html#1346" class="Bound">A</a> <a id="1362" class="Symbol">→</a> <a id="1364" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1368" href="Causality.CausalGraph.html#1340" class="Bound">b</a><a id="1369" class="Symbol">)</a> <a id="1371" class="Symbol">→</a> <a id="1373" class="Symbol">(</a><a id="1374" href="Causality.CausalGraph.html#1346" class="Bound">A</a> <a id="1376" class="Symbol">→</a> <a id="1378" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1382" href="Causality.CausalGraph.html#1342" class="Bound">c</a><a id="1383" class="Symbol">)</a> <a id="1385" class="Symbol">→</a> <a id="1387" class="Symbol">(</a><a id="1388" href="Causality.CausalGraph.html#1346" class="Bound">A</a> <a id="1390" class="Symbol">→</a> <a id="1392" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1396" class="Symbol">_)</a>
<a id="1399" href="Causality.CausalGraph.html#1399" class="Bound">P</a> <a id="1401" href="Causality.CausalGraph.html#1327" class="Function Operator">-×-</a> <a id="1405" href="Causality.CausalGraph.html#1405" class="Bound">Q</a> <a id="1407" class="Symbol">=</a> <a id="1409" class="Symbol">λ</a> <a id="1411" href="Causality.CausalGraph.html#1411" class="Bound">x</a> <a id="1413" class="Symbol">→</a> <a id="1415" href="Causality.CausalGraph.html#1399" class="Bound">P</a> <a id="1417" href="Causality.CausalGraph.html#1411" class="Bound">x</a> <a id="1419" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1421" href="Causality.CausalGraph.html#1405" class="Bound">Q</a> <a id="1423" href="Causality.CausalGraph.html#1411" class="Bound">x</a>

<a id="_-⊎-_"></a><a id="1426" href="Causality.CausalGraph.html#1426" class="Function Operator">_-⊎-_</a> <a id="1432" class="Symbol">:</a> <a id="1434" class="Symbol">∀</a> <a id="1436" class="Symbol">{</a><a id="1437" href="Causality.CausalGraph.html#1437" class="Bound">a</a> <a id="1439" href="Causality.CausalGraph.html#1439" class="Bound">b</a> <a id="1441" href="Causality.CausalGraph.html#1441" class="Bound">c</a><a id="1442" class="Symbol">}</a> <a id="1444" class="Symbol">{</a><a id="1445" href="Causality.CausalGraph.html#1445" class="Bound">A</a> <a id="1447" class="Symbol">:</a> <a id="1449" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1453" href="Causality.CausalGraph.html#1437" class="Bound">a</a><a id="1454" class="Symbol">}</a> <a id="1456" class="Symbol">→</a> <a id="1458" class="Symbol">(</a><a id="1459" href="Causality.CausalGraph.html#1445" class="Bound">A</a> <a id="1461" class="Symbol">→</a> <a id="1463" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1467" href="Causality.CausalGraph.html#1439" class="Bound">b</a><a id="1468" class="Symbol">)</a> <a id="1470" class="Symbol">→</a> <a id="1472" class="Symbol">(</a><a id="1473" href="Causality.CausalGraph.html#1445" class="Bound">A</a> <a id="1475" class="Symbol">→</a> <a id="1477" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1481" href="Causality.CausalGraph.html#1441" class="Bound">c</a><a id="1482" class="Symbol">)</a> <a id="1484" class="Symbol">→</a> <a id="1486" class="Symbol">(</a><a id="1487" href="Causality.CausalGraph.html#1445" class="Bound">A</a> <a id="1489" class="Symbol">→</a> <a id="1491" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1495" class="Symbol">_)</a>
<a id="1498" href="Causality.CausalGraph.html#1498" class="Bound">P</a> <a id="1500" href="Causality.CausalGraph.html#1426" class="Function Operator">-⊎-</a> <a id="1504" href="Causality.CausalGraph.html#1504" class="Bound">Q</a> <a id="1506" class="Symbol">=</a> <a id="1508" class="Symbol">λ</a> <a id="1510" href="Causality.CausalGraph.html#1510" class="Bound">x</a> <a id="1512" class="Symbol">→</a> <a id="1514" href="Causality.CausalGraph.html#1498" class="Bound">P</a> <a id="1516" href="Causality.CausalGraph.html#1510" class="Bound">x</a> <a id="1518" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="1520" href="Causality.CausalGraph.html#1504" class="Bound">Q</a> <a id="1522" href="Causality.CausalGraph.html#1510" class="Bound">x</a>
</pre></details>

We parameterize our development by an arbitrary DAG $G$.

<pre class="Agda"><a id="1606" class="Keyword">module</a> <a id="CausalGraph"></a><a id="1613" href="Causality.CausalGraph.html#1613" class="Module">CausalGraph</a> <a id="1625" class="Symbol">(</a><a id="1626" href="Causality.CausalGraph.html#1626" class="Bound">G</a> <a id="1628" class="Symbol">:</a> <a id="1630" href="Causality.Data.Graph.html#2250" class="Record">DAG</a><a id="1633" class="Symbol">)</a> <a id="1635" class="Keyword">where</a>

  <a id="1644" class="Keyword">open</a> <a id="1649" href="Causality.Data.Graph.html#2250" class="Module">DAG</a> <a id="1653" href="Causality.CausalGraph.html#1626" class="Bound">G</a>
</pre>
We define a "path" through a causal graph to be a list of vertices connected by adjacencies.

<pre class="Agda">  <a id="1764" class="Keyword">record</a> <a id="CausalGraph.Path"></a><a id="1771" href="Causality.CausalGraph.html#1771" class="Record">Path</a> <a id="1776" class="Symbol">:</a> <a id="1778" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1782" class="Keyword">where</a>
    <a id="1792" class="Keyword">field</a> <a id="CausalGraph.Path.nodes"></a><a id="1798" href="Causality.CausalGraph.html#1798" class="Field">nodes</a>              <a id="1817" class="Symbol">:</a> <a id="1819" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1824" href="Causality.Data.Graph.html#709" class="Function">V</a>
    <a id="1830" class="Keyword">field</a> <a id="CausalGraph.Path.linked"></a><a id="1836" href="Causality.CausalGraph.html#1836" class="Field">linked</a>             <a id="1855" class="Symbol">:</a> <a id="1857" href="Data.List.Relation.Unary.Linked.html#1390" class="Datatype">Linked</a> <a id="1864" href="Causality.Data.Graph.html#949" class="Function Operator">_∃——_</a> <a id="1870" href="Causality.CausalGraph.html#1798" class="Field">nodes</a>
</pre>
We require that the path be acyclic, i.e. that no vertex is revisited, i.e. that the list of vertices
has no duplicates. We will also require that there are at least two vertices in our list, so that
we have distinct start– and endpoints.

<pre class="Agda">    <a id="2129" class="Keyword">field</a> <a id="CausalGraph.Path.acyclic"></a><a id="2135" href="Causality.CausalGraph.html#2135" class="Field">acyclic</a>            <a id="2154" class="Symbol">:</a> <a id="2156" href="Data.List.Relation.Unary.Unique.Setoid.html#719" class="Datatype">Unique</a> <a id="2163" href="Causality.CausalGraph.html#1798" class="Field">nodes</a>
    <a id="2173" class="Keyword">field</a> <a id="CausalGraph.Path.distinct-endpoints"></a><a id="2179" href="Causality.CausalGraph.html#2179" class="Field">distinct-endpoints</a> <a id="2198" class="Symbol">:</a> <a id="2200" href="Data.List.Base.html#4864" class="Function">length</a> <a id="2207" href="Causality.CausalGraph.html#1798" class="Field">nodes</a> <a id="2213" href="Data.Nat.Base.html#1679" class="Function Operator">≥</a> <a id="2215" class="Number">2</a>

    <a id="CausalGraph.Path.nonempty"></a><a id="2222" href="Causality.CausalGraph.html#2222" class="Function">nonempty</a> <a id="2231" class="Symbol">:</a> <a id="2233" href="Causality.CausalGraph.html#1798" class="Field">nodes</a> <a id="2239" href="Relation.Binary.PropositionalEquality.Core.html#830" class="Function Operator">≢</a> <a id="2241" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
    <a id="2248" href="Causality.CausalGraph.html#2222" class="Function">nonempty</a> <a id="2257" href="Causality.CausalGraph.html#2257" class="Bound">nodes≡[]</a>
      <a id="2272" class="Keyword">with</a> <a id="2277" href="Causality.CausalGraph.html#1798" class="Field">nodes</a> <a id="2283" class="Symbol">|</a> <a id="2285" href="Causality.CausalGraph.html#2179" class="Field">distinct-endpoints</a>
    <a id="2308" class="Symbol">...</a>  <a id="2313" class="Symbol">|</a> <a id="2315" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>    <a id="2321" class="Symbol">|</a> <a id="2323" class="Symbol">()</a>
    <a id="2330" class="Symbol">...</a>  <a id="2335" class="Symbol">|</a> <a id="2337" class="Symbol">_</a> <a id="2339" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2341" class="Symbol">_</a> <a id="2343" class="Symbol">|</a> <a id="2345" href="Data.Nat.Base.html#1600" class="InductiveConstructor">s≤s</a> <a id="2349" class="Symbol">_</a> <a id="2351" class="Symbol">=</a> <a id="2353" href="Function.Base.html#4121" class="Function Operator">case</a> <a id="2358" class="Bound">nodes≡[]</a> <a id="2367" href="Function.Base.html#4121" class="Function Operator">of</a> <a id="2370" class="Symbol">λ()</a>

    <a id="CausalGraph.Path.start"></a><a id="2379" href="Causality.CausalGraph.html#2379" class="Function">start</a> <a id="2385" class="Symbol">:</a> <a id="2387" href="Causality.Data.Graph.html#709" class="Function">V</a>
    <a id="2393" href="Causality.CausalGraph.html#2379" class="Function">start</a> <a id="2399" class="Symbol">=</a> <a id="2401" href="Causality.Data.List.html#1122" class="Function">head-of-nonempty</a> <a id="2418" href="Causality.CausalGraph.html#2222" class="Function">nonempty</a> <a id="2427" href="Causality.CausalGraph.html#992" class="Field Operator">₁</a>

    <a id="CausalGraph.Path.end"></a><a id="2434" href="Causality.CausalGraph.html#2434" class="Function">end</a> <a id="2438" class="Symbol">:</a> <a id="2440" href="Causality.Data.Graph.html#709" class="Function">V</a>
    <a id="2446" href="Causality.CausalGraph.html#2434" class="Function">end</a> <a id="2450" class="Symbol">=</a> <a id="2452" href="Causality.Data.List.html#839" class="Function">last-of-nonempty</a> <a id="2469" href="Causality.CausalGraph.html#2222" class="Function">nonempty</a> <a id="2478" href="Causality.CausalGraph.html#992" class="Field Operator">₁</a>

  <a id="2483" class="Keyword">open</a> <a id="2488" href="Causality.CausalGraph.html#1771" class="Module">Path</a>
</pre>
For any two vertices $i, j$ in $G$, we will let `i —↠ j` denote the set of paths from $i$ to $j$.

<pre class="Agda">  <a id="CausalGraph._—↠_"></a><a id="2607" href="Causality.CausalGraph.html#2607" class="Function Operator">_—↠_</a> <a id="2612" class="Symbol">:</a> <a id="2614" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="2616" class="Symbol">→</a> <a id="2618" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="2620" class="Symbol">→</a> <a id="2622" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="2628" href="Causality.CausalGraph.html#2628" class="Bound">from</a> <a id="2633" href="Causality.CausalGraph.html#2607" class="Function Operator">—↠</a> <a id="2636" href="Causality.CausalGraph.html#2636" class="Bound">to</a> <a id="2639" class="Symbol">=</a> <a id="2641" href="Data.Product.html#1806" class="Function">∃[</a> <a id="2644" href="Causality.CausalGraph.html#2644" class="Bound">p</a> <a id="2646" href="Data.Product.html#1806" class="Function">]</a> <a id="2648" href="Causality.CausalGraph.html#2379" class="Function">start</a> <a id="2654" href="Causality.CausalGraph.html#2644" class="Bound">p</a> <a id="2656" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2658" href="Causality.CausalGraph.html#2628" class="Bound">from</a> <a id="2663" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2665" href="Causality.CausalGraph.html#2434" class="Function">end</a> <a id="2669" href="Causality.CausalGraph.html#2644" class="Bound">p</a> <a id="2671" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2673" href="Causality.CausalGraph.html#2636" class="Bound">to</a>
</pre>
We will say `i ∃—↠ j` iff there exists a path starting at $i$ and ending at $j$.

<pre class="Agda">  <a id="CausalGraph._∃—↠_"></a><a id="2773" href="Causality.CausalGraph.html#2773" class="Function Operator">_∃—↠_</a> <a id="2779" class="Symbol">=</a> <a id="2781" href="Causality.CausalGraph.html#2607" class="Function Operator">_—↠_</a>
</pre>
<details>
<summary>Some helper functions for working with paths.</summary>

<pre class="Agda">  <a id="CausalGraph.triples-along"></a><a id="2877" href="Causality.CausalGraph.html#2877" class="Function">triples-along</a> <a id="2891" class="Symbol">:</a> <a id="2893" href="Causality.CausalGraph.html#1771" class="Record">Path</a> <a id="2898" class="Symbol">→</a> <a id="2900" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="2905" class="Symbol">(</a><a id="2906" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="2908" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2910" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="2912" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2914" href="Causality.Data.Graph.html#709" class="Function">V</a><a id="2915" class="Symbol">)</a>
  <a id="2919" href="Causality.CausalGraph.html#2877" class="Function">triples-along</a> <a id="2933" class="Symbol">=</a> <a id="2935" href="Causality.Data.List.html#372" class="Function">triples</a> <a id="2943" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="2945" href="Causality.CausalGraph.html#1798" class="Field">nodes</a>

  <a id="CausalGraph._visits_"></a><a id="2954" href="Causality.CausalGraph.html#2954" class="Function Operator">_visits_</a> <a id="2963" class="Symbol">:</a> <a id="2965" class="Symbol">(</a><a id="2966" href="Causality.CausalGraph.html#2966" class="Bound">p</a> <a id="2968" class="Symbol">:</a> <a id="2970" href="Causality.CausalGraph.html#1771" class="Record">Path</a><a id="2974" class="Symbol">)</a> <a id="2976" class="Symbol">→</a> <a id="2978" class="Symbol">(</a><a id="2979" href="Causality.CausalGraph.html#2979" class="Bound">v</a> <a id="2981" class="Symbol">:</a> <a id="2983" href="Causality.Data.Graph.html#709" class="Function">V</a><a id="2984" class="Symbol">)</a> <a id="2986" class="Symbol">→</a> <a id="2988" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="2994" href="Causality.CausalGraph.html#2994" class="Bound">p</a> <a id="2996" href="Causality.CausalGraph.html#2954" class="Function Operator">visits</a> <a id="3003" href="Causality.CausalGraph.html#3003" class="Bound">v</a> <a id="3005" class="Symbol">=</a> <a id="3007" href="Causality.CausalGraph.html#3003" class="Bound">v</a> <a id="3009" href="Data.List.Membership.Setoid.html#887" class="Function Operator">∈</a> <a id="3011" href="Causality.CausalGraph.html#1798" class="Field">nodes</a> <a id="3017" href="Causality.CausalGraph.html#2994" class="Bound">p</a>
    <a id="3023" class="Keyword">where</a> <a id="3029" class="Keyword">open</a> <a id="3034" class="Keyword">import</a> <a id="3041" href="Data.List.Membership.Propositional.html" class="Module">Data.List.Membership.Propositional</a> <a id="3076" class="Keyword">using</a> <a id="3082" class="Symbol">(</a><a id="3083" href="Data.List.Membership.Setoid.html#887" class="Function Operator">_∈_</a><a id="3086" class="Symbol">)</a>
</pre></details>

A subset of $V$ is a valid conditioning set (w.r.t. some path `i —↠ j`) iff $C \subseteq V \setminus \{ i , j \}$.

<pre class="Agda">  <a id="CausalGraph.ConditioningSet"></a><a id="3230" href="Causality.CausalGraph.html#3230" class="Function">ConditioningSet</a> <a id="3246" class="Symbol">:</a> <a id="3248" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="3250" class="Symbol">→</a> <a id="3252" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="3254" class="Symbol">→</a> <a id="3256" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3260" class="Symbol">_</a>
  <a id="3264" href="Causality.CausalGraph.html#3230" class="Function">ConditioningSet</a> <a id="3280" href="Causality.CausalGraph.html#3280" class="Bound">i</a> <a id="3282" href="Causality.CausalGraph.html#3282" class="Bound">j</a> <a id="3284" class="Symbol">=</a> <a id="3286" href="Agda.Builtin.Sigma.html#148" class="Record">Σ</a> <a id="3288" class="Symbol">(</a><a id="3289" href="Data.Fin.Subset.html#1208" class="Function">Subset</a> <a id="3296" href="Causality.Data.Graph.html#698" class="Function">|V|</a><a id="3299" class="Symbol">)</a> <a id="3301" class="Symbol">(</a><a id="3302" href="Causality.Data.Fin.Subset.html#287" class="Function Operator">_⊆∖</a> <a id="3306" href="Causality.Data.Fin.Subset.html#350" class="Function Operator">⁅</a> <a id="3308" href="Causality.CausalGraph.html#3280" class="Bound">i</a> <a id="3310" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3312" href="Causality.CausalGraph.html#3282" class="Bound">j</a> <a id="3314" href="Causality.Data.Fin.Subset.html#350" class="Function Operator">⁆₂</a><a id="3316" class="Symbol">)</a>
</pre>
We will denote the empty conditioning set by $\varnothing$.

<pre class="Agda">  <a id="CausalGraph.∅"></a><a id="3394" href="Causality.CausalGraph.html#3394" class="Function">∅</a> <a id="3396" class="Symbol">:</a> <a id="3398" class="Symbol">∀</a> <a id="3400" class="Symbol">{</a><a id="3401" href="Causality.CausalGraph.html#3401" class="Bound">i</a> <a id="3403" href="Causality.CausalGraph.html#3403" class="Bound">j</a><a id="3404" class="Symbol">}</a> <a id="3406" class="Symbol">→</a> <a id="3408" href="Causality.CausalGraph.html#3230" class="Function">ConditioningSet</a> <a id="3424" href="Causality.CausalGraph.html#3401" class="Bound">i</a> <a id="3426" href="Causality.CausalGraph.html#3403" class="Bound">j</a>
  <a id="3430" href="Causality.CausalGraph.html#3394" class="Function">∅</a> <a id="3432" class="Symbol">=</a> <a id="3434" href="Data.Fin.Subset.html#1357" class="Function">Fin.⊥</a> <a id="3440" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3442" href="Data.Fin.Subset.Properties.html#4358" class="Function">Fin.⊥⊆</a>
</pre>
<details>
<summary>Groundwork to let us define colliders, noncolliders, etc.</summary>

<pre class="Agda">  <a id="3552" class="Keyword">module</a> <a id="CausalGraph.Pattern"></a><a id="3559" href="Causality.CausalGraph.html#3559" class="Module">Pattern</a> <a id="3567" class="Keyword">where</a>

    <a id="CausalGraph.Pattern.Pattern"></a><a id="3578" href="Causality.CausalGraph.html#3578" class="Function">Pattern</a> <a id="3586" class="Symbol">:</a> <a id="3588" class="Symbol">∀</a> <a id="3590" class="Symbol">{</a><a id="3591" href="Causality.CausalGraph.html#3591" class="Bound">a</a><a id="3592" class="Symbol">}</a> <a id="3594" class="Symbol">→</a> <a id="3596" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3600" class="Symbol">_</a>
    <a id="3606" href="Causality.CausalGraph.html#3578" class="Function">Pattern</a> <a id="3614" class="Symbol">{</a><a id="3615" href="Causality.CausalGraph.html#3615" class="Bound">a</a><a id="3616" class="Symbol">}</a> <a id="3618" class="Symbol">=</a> <a id="3620" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="3622" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3624" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="3626" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3628" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="3630" class="Symbol">→</a> <a id="3632" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3636" href="Causality.CausalGraph.html#3615" class="Bound">a</a>


    <a id="3644" class="Keyword">module</a> <a id="CausalGraph.Pattern.Notation"></a><a id="3651" href="Causality.CausalGraph.html#3651" class="Module">Notation</a> <a id="3660" class="Keyword">where</a>

      <a id="CausalGraph.Pattern.Notation._∙_"></a><a id="3673" href="Causality.CausalGraph.html#3673" class="Function Operator">_∙_</a> <a id="3677" class="Symbol">:</a> <a id="3679" class="Symbol">∀</a> <a id="3681" class="Symbol">{</a><a id="3682" href="Causality.CausalGraph.html#3682" class="Bound">a</a> <a id="3684" href="Causality.CausalGraph.html#3684" class="Bound">b</a><a id="3685" class="Symbol">}</a> <a id="3687" class="Symbol">→</a> <a id="3689" class="Symbol">(</a><a id="3690" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="3692" class="Symbol">→</a> <a id="3694" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="3696" class="Symbol">→</a> <a id="3698" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3702" href="Causality.CausalGraph.html#3682" class="Bound">a</a><a id="3703" class="Symbol">)</a> <a id="3705" class="Symbol">→</a> <a id="3707" class="Symbol">(</a><a id="3708" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="3710" class="Symbol">→</a> <a id="3712" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="3714" class="Symbol">→</a> <a id="3716" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3720" href="Causality.CausalGraph.html#3684" class="Bound">b</a><a id="3721" class="Symbol">)</a> <a id="3723" class="Symbol">→</a> <a id="3725" href="Causality.CausalGraph.html#3578" class="Function">Pattern</a>
      <a id="3739" href="Causality.CausalGraph.html#3739" class="Bound Operator">_l-x_</a> <a id="3745" href="Causality.CausalGraph.html#3673" class="Function Operator">∙</a> <a id="3747" href="Causality.CausalGraph.html#3747" class="Bound Operator">_x-r_</a> <a id="3753" class="Symbol">=</a> <a id="3755" class="Symbol">λ{</a> <a id="3758" class="Symbol">(</a><a id="3759" href="Causality.CausalGraph.html#3759" class="Bound">l</a> <a id="3761" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3763" href="Causality.CausalGraph.html#3763" class="Bound">x</a> <a id="3765" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3767" href="Causality.CausalGraph.html#3767" class="Bound">r</a><a id="3768" class="Symbol">)</a> <a id="3770" class="Symbol">→</a> <a id="3772" href="Causality.CausalGraph.html#3759" class="Bound">l</a> <a id="3774" href="Causality.CausalGraph.html#3739" class="Bound Operator">l-x</a> <a id="3778" href="Causality.CausalGraph.html#3763" class="Bound">x</a> <a id="3780" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3782" href="Causality.CausalGraph.html#3763" class="Bound">x</a> <a id="3784" href="Causality.CausalGraph.html#3747" class="Bound Operator">x-r</a> <a id="3788" href="Causality.CausalGraph.html#3767" class="Bound">r</a> <a id="3790" class="Symbol">}</a>

      <a id="CausalGraph.Pattern.Notation.⟶"></a><a id="3799" href="Causality.CausalGraph.html#3799" class="Function">⟶</a> <a id="3801" class="Symbol">=</a> <a id="3803" href="Causality.Data.Graph.html#786" class="Function Operator">_∃⟶_</a>
      <a id="CausalGraph.Pattern.Notation.⟵"></a><a id="3814" href="Causality.CausalGraph.html#3814" class="Function">⟵</a> <a id="3816" class="Symbol">=</a> <a id="3818" href="Causality.Data.Graph.html#904" class="Function Operator">_∃⟵_</a>

    <a id="3828" class="Keyword">open</a> <a id="3833" href="Causality.CausalGraph.html#3651" class="Module">Notation</a>
</pre></details>

<pre class="Agda">    <a id="CausalGraph.Pattern.collider"></a><a id="3870" href="Causality.CausalGraph.html#3870" class="Function">collider</a> <a id="CausalGraph.Pattern.common-cause"></a><a id="3879" href="Causality.CausalGraph.html#3879" class="Function">common-cause</a> <a id="CausalGraph.Pattern.mediator"></a><a id="3892" href="Causality.CausalGraph.html#3892" class="Function">mediator</a> <a id="3901" class="Symbol">:</a> <a id="3903" href="Causality.CausalGraph.html#3578" class="Function">Pattern</a>
    <a id="3915" href="Causality.CausalGraph.html#3870" class="Function">collider</a>     <a id="3928" class="Symbol">=</a> <a id="3930" href="Causality.CausalGraph.html#3799" class="Function">⟶</a> <a id="3932" href="Causality.CausalGraph.html#3673" class="Function Operator">∙</a> <a id="3934" href="Causality.CausalGraph.html#3814" class="Function">⟵</a>
    <a id="3940" href="Causality.CausalGraph.html#3879" class="Function">common-cause</a> <a id="3953" class="Symbol">=</a> <a id="3955" href="Causality.CausalGraph.html#3814" class="Function">⟵</a> <a id="3957" href="Causality.CausalGraph.html#3673" class="Function Operator">∙</a> <a id="3959" href="Causality.CausalGraph.html#3799" class="Function">⟶</a>
    <a id="3965" href="Causality.CausalGraph.html#3892" class="Function">mediator</a>     <a id="3978" class="Symbol">=</a> <a id="3980" href="Causality.CausalGraph.html#3799" class="Function">⟶</a> <a id="3982" href="Causality.CausalGraph.html#3673" class="Function Operator">∙</a> <a id="3984" href="Causality.CausalGraph.html#3799" class="Function">⟶</a>
</pre>
A noncollider is either a common cause or a mediator.

<pre class="Agda">    <a id="CausalGraph.Pattern.noncollider"></a><a id="4058" href="Causality.CausalGraph.html#4058" class="Function">noncollider</a> <a id="4070" class="Symbol">:</a> <a id="4072" href="Causality.CausalGraph.html#3578" class="Function">Pattern</a>
    <a id="4084" href="Causality.CausalGraph.html#4058" class="Function">noncollider</a> <a id="4096" class="Symbol">=</a> <a id="4098" href="Causality.CausalGraph.html#3879" class="Function">common-cause</a> <a id="4111" href="Causality.CausalGraph.html#1426" class="Function Operator">-⊎-</a> <a id="4115" href="Causality.CausalGraph.html#3892" class="Function">mediator</a>
</pre>
We will write `colliders along p` to denote "the set of all vertices that are colliders along some path $p$"
(and similarly for common causes, etc.).

<pre class="Agda">    <a id="CausalGraph.Pattern._along_"></a><a id="4292" href="Causality.CausalGraph.html#4292" class="Function Operator">_along_</a> <a id="4300" class="Symbol">:</a> <a id="4302" class="Symbol">∀</a> <a id="4304" class="Symbol">{</a><a id="4305" href="Causality.CausalGraph.html#4305" class="Bound">a</a><a id="4306" class="Symbol">}</a> <a id="4308" class="Symbol">→</a> <a id="4310" href="Causality.CausalGraph.html#3578" class="Function">Pattern</a> <a id="4318" class="Symbol">{</a><a id="4319" href="Causality.CausalGraph.html#4305" class="Bound">a</a><a id="4320" class="Symbol">}</a> <a id="4322" class="Symbol">→</a> <a id="4324" href="Causality.CausalGraph.html#1771" class="Record">Path</a> <a id="4329" class="Symbol">→</a> <a id="4331" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="4335" class="Symbol">_</a>
    <a id="4341" href="Causality.CausalGraph.html#4341" class="Bound">pat</a> <a id="4345" href="Causality.CausalGraph.html#4292" class="Function Operator">along</a> <a id="4351" href="Causality.CausalGraph.html#4351" class="Bound">p</a> <a id="4353" class="Symbol">=</a>
      <a id="4361" href="Data.Product.html#916" class="Function">Σ[</a> <a id="4364" href="Causality.CausalGraph.html#4364" class="Bound">x</a> <a id="4366" href="Data.Product.html#916" class="Function">∈</a> <a id="4368" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="4370" href="Data.Product.html#916" class="Function">]</a>
        <a id="4380" href="Data.Product.html#916" class="Function">Σ[</a> <a id="4383" href="Causality.CausalGraph.html#4383" class="Bound">triple</a><a id="4389" class="Symbol">@(_</a> <a id="4393" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4395" href="Causality.CausalGraph.html#4395" class="Bound">x′</a> <a id="4398" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4400" class="Symbol">_)</a> <a id="4403" href="Data.Product.html#916" class="Function">∈</a> <a id="4405" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="4407" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4409" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="4411" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4413" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="4415" href="Data.Product.html#916" class="Function">]</a>
          <a id="4427" href="Causality.CausalGraph.html#4364" class="Bound">x</a> <a id="4429" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4431" href="Causality.CausalGraph.html#4395" class="Bound">x′</a> <a id="4434" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4436" href="Causality.CausalGraph.html#4341" class="Bound">pat</a> <a id="4440" href="Causality.CausalGraph.html#4383" class="Bound">triple</a>

    <a id="CausalGraph.Pattern.colliders"></a><a id="4452" href="Causality.CausalGraph.html#4452" class="Function">colliders</a>     <a id="4466" class="Symbol">=</a> <a id="4468" href="Causality.CausalGraph.html#3870" class="Function">collider</a>
    <a id="CausalGraph.Pattern.common-causes"></a><a id="4481" href="Causality.CausalGraph.html#4481" class="Function">common-causes</a> <a id="4495" class="Symbol">=</a> <a id="4497" href="Causality.CausalGraph.html#3879" class="Function">common-cause</a>
    <a id="CausalGraph.Pattern.mediators"></a><a id="4514" href="Causality.CausalGraph.html#4514" class="Function">mediators</a>     <a id="4528" class="Symbol">=</a> <a id="4530" href="Causality.CausalGraph.html#3892" class="Function">mediator</a>
    <a id="CausalGraph.Pattern.noncolliders"></a><a id="4543" href="Causality.CausalGraph.html#4543" class="Function">noncolliders</a>  <a id="4557" class="Symbol">=</a> <a id="4559" href="Causality.CausalGraph.html#4058" class="Function">noncollider</a>

  <a id="4574" class="Keyword">open</a> <a id="4579" href="Causality.CausalGraph.html#3559" class="Module">Pattern</a>
</pre>
A vertex $j$ is a descendant of $i$ iff there exists a path from $i$ to $j$.

<pre class="Agda">  <a id="CausalGraph.descendants"></a><a id="4680" href="Causality.CausalGraph.html#4680" class="Function">descendants</a> <a id="4692" class="Symbol">:</a> <a id="4694" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="4696" class="Symbol">→</a> <a id="4698" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="4704" href="Causality.CausalGraph.html#4680" class="Function">descendants</a> <a id="4716" href="Causality.CausalGraph.html#4716" class="Bound">i</a> <a id="4718" class="Symbol">=</a> <a id="4720" href="Data.Product.html#1806" class="Function">∃[</a> <a id="4723" href="Causality.CausalGraph.html#4723" class="Bound">j</a> <a id="4725" href="Data.Product.html#1806" class="Function">]</a> <a id="4727" href="Causality.CausalGraph.html#4716" class="Bound">i</a> <a id="4729" href="Causality.CausalGraph.html#2773" class="Function Operator">∃—↠</a> <a id="4733" href="Causality.CausalGraph.html#4723" class="Bound">j</a>
</pre>
A path from $i$ to $j$ is unblocked (conditional on $C$) iff:

<pre class="Agda">  <a id="CausalGraph.unblocked_∣_"></a><a id="4813" href="Causality.CausalGraph.html#4813" class="Function Operator">unblocked_∣_</a> <a id="4826" class="Symbol">:</a> <a id="4828" class="Symbol">∀</a> <a id="4830" class="Symbol">{</a><a id="4831" href="Causality.CausalGraph.html#4831" class="Bound">i</a> <a id="4833" href="Causality.CausalGraph.html#4833" class="Bound">j</a><a id="4834" class="Symbol">}</a> <a id="4836" class="Symbol">→</a> <a id="4838" href="Causality.CausalGraph.html#4831" class="Bound">i</a> <a id="4840" href="Causality.CausalGraph.html#2607" class="Function Operator">—↠</a> <a id="4843" href="Causality.CausalGraph.html#4833" class="Bound">j</a> <a id="4845" class="Symbol">→</a> <a id="4847" href="Causality.CausalGraph.html#3230" class="Function">ConditioningSet</a> <a id="4863" href="Causality.CausalGraph.html#4831" class="Bound">i</a> <a id="4865" href="Causality.CausalGraph.html#4833" class="Bound">j</a> <a id="4867" class="Symbol">→</a> <a id="4869" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="4875" href="Causality.CausalGraph.html#4813" class="Function Operator">unblocked</a> <a id="4885" class="Symbol">(</a><a id="4886" href="Causality.CausalGraph.html#4886" class="Bound">p</a> <a id="4888" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4890" class="Symbol">_)</a> <a id="4893" href="Causality.CausalGraph.html#4813" class="Function Operator">∣</a> <a id="4895" class="Symbol">(</a><a id="4896" href="Causality.CausalGraph.html#4896" class="Bound">C</a> <a id="4898" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4900" class="Symbol">_)</a> <a id="4903" class="Symbol">=</a>
</pre>
1. all noncolliders along the path are not in $C$, and

<pre class="Agda">    <a id="4978" class="Symbol">((</a><a id="4980" href="Causality.CausalGraph.html#4980" class="Bound">v</a> <a id="4982" class="Symbol">:</a> <a id="4984" href="Causality.CausalGraph.html#4543" class="Function">noncolliders</a> <a id="4997" href="Causality.CausalGraph.html#4292" class="Function Operator">along</a> <a id="5003" href="Causality.CausalGraph.html#4886" class="Bound">p</a><a id="5004" class="Symbol">)</a> <a id="5006" class="Symbol">→</a> <a id="5008" href="Causality.CausalGraph.html#4980" class="Bound">v</a> <a id="5010" href="Causality.CausalGraph.html#992" class="Field Operator">₁</a> <a id="5012" href="Data.Fin.Subset.html#1778" class="Function Operator">∉</a> <a id="5014" href="Causality.CausalGraph.html#4896" class="Bound">C</a><a id="5015" class="Symbol">)</a> <a id="5017" href="Data.Product.html#1167" class="Function Operator">×</a>
</pre>
2. all colliders along $p$ are:

<pre class="Agda">    <a id="5069" class="Symbol">((</a><a id="5071" href="Causality.CausalGraph.html#5071" class="Bound">v</a> <a id="5073" class="Symbol">:</a> <a id="5075" href="Causality.CausalGraph.html#4452" class="Function">colliders</a> <a id="5085" href="Causality.CausalGraph.html#4292" class="Function Operator">along</a> <a id="5091" href="Causality.CausalGraph.html#4886" class="Bound">p</a><a id="5092" class="Symbol">)</a> <a id="5094" class="Symbol">→</a>
</pre>
   a) in $C$, or

<pre class="Agda">       <a id="5134" href="Causality.CausalGraph.html#5071" class="Bound">v</a> <a id="5136" href="Causality.CausalGraph.html#992" class="Field Operator">₁</a> <a id="5138" href="Data.Fin.Subset.html#1724" class="Function Operator">∈</a> <a id="5140" href="Causality.CausalGraph.html#4896" class="Bound">C</a> <a id="5142" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a>
</pre>
   b) have a descendant in $C$.

<pre class="Agda">       <a id="5197" href="Data.Product.html#916" class="Function">Σ[</a> <a id="5200" href="Causality.CausalGraph.html#5200" class="Bound">i</a> <a id="5202" href="Data.Product.html#916" class="Function">∈</a> <a id="5204" href="Causality.CausalGraph.html#4680" class="Function">descendants</a> <a id="5216" class="Symbol">(</a><a id="5217" href="Causality.CausalGraph.html#5071" class="Bound">v</a> <a id="5219" href="Causality.CausalGraph.html#992" class="Field Operator">₁</a><a id="5220" class="Symbol">)</a> <a id="5222" href="Data.Product.html#916" class="Function">]</a> <a id="5224" href="Causality.CausalGraph.html#5200" class="Bound">i</a> <a id="5226" href="Causality.CausalGraph.html#992" class="Field Operator">₁</a> <a id="5228" href="Data.Fin.Subset.html#1724" class="Function Operator">∈</a> <a id="5230" href="Causality.CausalGraph.html#4896" class="Bound">C</a><a id="5231" class="Symbol">)</a>
</pre>
<pre class="Agda">    <a id="5250" class="Keyword">where</a> <a id="5256" class="Keyword">open</a> <a id="5261" class="Keyword">import</a> <a id="5268" href="Data.Fin.Subset.html" class="Module">Data.Fin.Subset</a> <a id="5284" class="Keyword">using</a> <a id="5290" class="Symbol">(</a><a id="5291" href="Data.Fin.Subset.html#1724" class="Function Operator">_∈_</a><a id="5294" class="Symbol">;</a> <a id="5296" href="Data.Fin.Subset.html#1778" class="Function Operator">_∉_</a><a id="5299" class="Symbol">)</a>
</pre>
A path is blocked iff it is not unblocked.

<pre class="Agda">  <a id="CausalGraph.blocked_∣_"></a><a id="5360" href="Causality.CausalGraph.html#5360" class="Function Operator">blocked_∣_</a> <a id="5371" class="Symbol">:</a> <a id="5373" class="Symbol">∀</a> <a id="5375" class="Symbol">{</a><a id="5376" href="Causality.CausalGraph.html#5376" class="Bound">i</a> <a id="5378" href="Causality.CausalGraph.html#5378" class="Bound">j</a><a id="5379" class="Symbol">}</a> <a id="5381" class="Symbol">→</a> <a id="5383" href="Causality.CausalGraph.html#5376" class="Bound">i</a> <a id="5385" href="Causality.CausalGraph.html#2607" class="Function Operator">—↠</a> <a id="5388" href="Causality.CausalGraph.html#5378" class="Bound">j</a> <a id="5390" class="Symbol">→</a> <a id="5392" href="Causality.CausalGraph.html#3230" class="Function">ConditioningSet</a> <a id="5408" href="Causality.CausalGraph.html#5376" class="Bound">i</a> <a id="5410" href="Causality.CausalGraph.html#5378" class="Bound">j</a> <a id="5412" class="Symbol">→</a> <a id="5414" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="5420" href="Causality.CausalGraph.html#5360" class="Function Operator">blocked</a> <a id="5428" href="Causality.CausalGraph.html#5428" class="Bound">p</a> <a id="5430" href="Causality.CausalGraph.html#5360" class="Function Operator">∣</a> <a id="5432" href="Causality.CausalGraph.html#5432" class="Bound">C</a> <a id="5434" class="Symbol">=</a> <a id="5436" href="Relation.Nullary.html#656" class="Function Operator">¬</a> <a id="5438" href="Causality.CausalGraph.html#4813" class="Function Operator">unblocked</a> <a id="5448" href="Causality.CausalGraph.html#5428" class="Bound">p</a> <a id="5450" href="Causality.CausalGraph.html#4813" class="Function Operator">∣</a> <a id="5452" href="Causality.CausalGraph.html#5432" class="Bound">C</a>
</pre>
Two vertices are $d$-separated (conditional on $C$) iff all paths between them are blocked.

<pre class="Agda">  <a id="CausalGraph._⊥_∣_"></a><a id="5562" href="Causality.CausalGraph.html#5562" class="Function Operator">_⊥_∣_</a> <a id="5568" class="Symbol">:</a> <a id="5570" class="Symbol">(</a><a id="5571" href="Causality.CausalGraph.html#5571" class="Bound">i</a> <a id="5573" href="Causality.CausalGraph.html#5573" class="Bound">j</a> <a id="5575" class="Symbol">:</a> <a id="5577" href="Causality.Data.Graph.html#709" class="Function">V</a><a id="5578" class="Symbol">)</a> <a id="5580" class="Symbol">→</a> <a id="5582" href="Causality.CausalGraph.html#3230" class="Function">ConditioningSet</a> <a id="5598" href="Causality.CausalGraph.html#5571" class="Bound">i</a> <a id="5600" href="Causality.CausalGraph.html#5573" class="Bound">j</a> <a id="5602" class="Symbol">→</a> <a id="5604" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="5610" href="Causality.CausalGraph.html#5610" class="Bound">i</a> <a id="5612" href="Causality.CausalGraph.html#5562" class="Function Operator">⊥</a> <a id="5614" href="Causality.CausalGraph.html#5614" class="Bound">j</a> <a id="5616" href="Causality.CausalGraph.html#5562" class="Function Operator">∣</a> <a id="5618" href="Causality.CausalGraph.html#5618" class="Bound">C</a> <a id="5620" class="Symbol">=</a> <a id="5622" class="Symbol">∀</a> <a id="5624" href="Causality.CausalGraph.html#5624" class="Bound">p</a> <a id="5626" class="Symbol">→</a> <a id="5628" href="Causality.CausalGraph.html#5360" class="Function Operator">blocked</a> <a id="5636" href="Causality.CausalGraph.html#5624" class="Bound">p</a> <a id="5638" href="Causality.CausalGraph.html#5360" class="Function Operator">∣</a> <a id="5640" href="Causality.CausalGraph.html#5618" class="Bound">C</a>
</pre>
Two vertices are $d$-connected (conditional on $C$) iff they are not $d$-separated.

<pre class="Agda">  <a id="CausalGraph._⊥̸_∣_"></a><a id="5742" href="Causality.CausalGraph.html#5742" class="Function Operator">_⊥̸_∣_</a> <a id="5749" class="Symbol">:</a> <a id="5751" class="Symbol">(</a><a id="5752" href="Causality.CausalGraph.html#5752" class="Bound">i</a> <a id="5754" href="Causality.CausalGraph.html#5754" class="Bound">j</a> <a id="5756" class="Symbol">:</a> <a id="5758" href="Causality.Data.Graph.html#709" class="Function">V</a><a id="5759" class="Symbol">)</a> <a id="5761" class="Symbol">→</a> <a id="5763" href="Causality.CausalGraph.html#3230" class="Function">ConditioningSet</a> <a id="5779" href="Causality.CausalGraph.html#5752" class="Bound">i</a> <a id="5781" href="Causality.CausalGraph.html#5754" class="Bound">j</a> <a id="5783" class="Symbol">→</a> <a id="5785" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="5791" href="Causality.CausalGraph.html#5791" class="Bound">i</a> <a id="5793" href="Causality.CausalGraph.html#5742" class="Function Operator">⊥̸</a> <a id="5796" href="Causality.CausalGraph.html#5796" class="Bound">j</a> <a id="5798" href="Causality.CausalGraph.html#5742" class="Function Operator">∣</a> <a id="5800" href="Causality.CausalGraph.html#5800" class="Bound">C</a> <a id="5802" class="Symbol">=</a> <a id="5804" href="Relation.Nullary.html#656" class="Function Operator">¬</a> <a id="5806" href="Causality.CausalGraph.html#5791" class="Bound">i</a> <a id="5808" href="Causality.CausalGraph.html#5562" class="Function Operator">⊥</a> <a id="5810" href="Causality.CausalGraph.html#5796" class="Bound">j</a> <a id="5812" href="Causality.CausalGraph.html#5562" class="Function Operator">∣</a> <a id="5814" href="Causality.CausalGraph.html#5800" class="Bound">C</a>
</pre>
Two vertices are $d$-separated (unconditionally) iff they are $d$-separated conditional on $\varnothing$.

<pre class="Agda">  <a id="CausalGraph._⊥_"></a><a id="5938" href="Causality.CausalGraph.html#5938" class="Function Operator">_⊥_</a> <a id="5942" class="Symbol">:</a> <a id="5944" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="5946" class="Symbol">→</a> <a id="5948" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="5950" class="Symbol">→</a> <a id="5952" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="5958" href="Causality.CausalGraph.html#5958" class="Bound">i</a> <a id="5960" href="Causality.CausalGraph.html#5938" class="Function Operator">⊥</a> <a id="5962" href="Causality.CausalGraph.html#5962" class="Bound">j</a> <a id="5964" class="Symbol">=</a> <a id="5966" href="Causality.CausalGraph.html#5958" class="Bound">i</a> <a id="5968" href="Causality.CausalGraph.html#5562" class="Function Operator">⊥</a> <a id="5970" href="Causality.CausalGraph.html#5962" class="Bound">j</a> <a id="5972" href="Causality.CausalGraph.html#5562" class="Function Operator">∣</a> <a id="5974" href="Causality.CausalGraph.html#3394" class="Function">∅</a>
</pre>
Two vertices are $d$-connected (uncoditionally) iff they are not $d$-separated (unconditionally).

<pre class="Agda">  <a id="CausalGraph._⊥̸_"></a><a id="6090" href="Causality.CausalGraph.html#6090" class="Function Operator">_⊥̸_</a> <a id="6095" class="Symbol">:</a> <a id="6097" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="6099" class="Symbol">→</a> <a id="6101" href="Causality.Data.Graph.html#709" class="Function">V</a> <a id="6103" class="Symbol">→</a> <a id="6105" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="6111" href="Causality.CausalGraph.html#6111" class="Bound">i</a> <a id="6113" href="Causality.CausalGraph.html#6090" class="Function Operator">⊥̸</a> <a id="6116" href="Causality.CausalGraph.html#6116" class="Bound">j</a> <a id="6118" class="Symbol">=</a> <a id="6120" href="Causality.CausalGraph.html#6111" class="Bound">i</a> <a id="6122" href="Causality.CausalGraph.html#5742" class="Function Operator">⊥̸</a> <a id="6125" href="Causality.CausalGraph.html#6116" class="Bound">j</a> <a id="6127" href="Causality.CausalGraph.html#5742" class="Function Operator">∣</a> <a id="6129" href="Causality.CausalGraph.html#3394" class="Function">∅</a>
</pre>
To intervene on a set of vertices $S$, we remove all edges going into vertices of $S$.

<pre class="Agda">  <a id="CausalGraph.intervene-on"></a><a id="6234" href="Causality.CausalGraph.html#6234" class="Function">intervene-on</a> <a id="6247" class="Symbol">:</a> <a id="6249" href="Data.Fin.Subset.html#1208" class="Function">Subset</a> <a id="6256" href="Causality.Data.Graph.html#698" class="Function">|V|</a> <a id="6260" class="Symbol">→</a> <a id="6262" href="Causality.Data.Graph.html#2250" class="Record">DAG</a>
  <a id="6268" href="Causality.CausalGraph.html#6234" class="Function">intervene-on</a> <a id="6281" href="Causality.CausalGraph.html#6281" class="Bound">S</a> <a id="6283" class="Symbol">=</a> <a id="6285" href="Causality.Data.Graph.html#2416" class="Function">filter-edges</a> <a id="6298" class="Symbol">(λ{</a> <a id="6302" class="Symbol">(_</a> <a id="6305" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="6307" href="Causality.CausalGraph.html#6307" class="Bound">to</a><a id="6309" class="Symbol">)</a> <a id="6311" class="Symbol">→</a> <a id="6313" href="Relation.Nullary.Negation.Core.html#1355" class="Function">¬?</a> <a id="6316" class="Symbol">(</a><a id="6317" href="Causality.CausalGraph.html#6307" class="Bound">to</a> <a id="6320" href="Data.Fin.Subset.Properties.html#3332" class="Function Operator">∈?</a> <a id="6323" href="Causality.CausalGraph.html#6281" class="Bound">S</a><a id="6324" class="Symbol">)</a> <a id="6326" class="Symbol">})</a>
    <a id="6333" class="Keyword">where</a> <a id="6339" class="Keyword">open</a> <a id="6344" class="Keyword">import</a> <a id="6351" href="Data.Fin.Subset.Properties.html" class="Module">Data.Fin.Subset.Properties</a> <a id="6378" class="Keyword">using</a> <a id="6384" class="Symbol">(</a><a id="6385" href="Data.Fin.Subset.Properties.html#3332" class="Function Operator">_∈?_</a><a id="6389" class="Symbol">)</a>
</pre>