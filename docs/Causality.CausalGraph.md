---
title: Causality.CausalGraph
---

Definitions and proofs about causal graphs.

<details>
<summary>Some initial bookkeeping.</summary>
<div>
<pre class="Agda"><a id="153" class="Symbol">{-#</a> <a id="157" class="Keyword">OPTIONS</a> <a id="165" class="Pragma">--without-K</a> <a id="177" class="Pragma">--safe</a> <a id="184" class="Symbol">#-}</a>

<a id="189" class="Keyword">module</a> <a id="196" href="Causality.CausalGraph.html" class="Module">Causality.CausalGraph</a> <a id="218" class="Keyword">where</a>
</pre>
We import some of the other files in this project (to see the documentation for a module, click on its name).

<pre class="Agda"><a id="348" class="Keyword">open</a> <a id="353" class="Keyword">import</a> <a id="360" href="Causality.Data.Fin.Subset.html" class="Module">Causality.Data.Fin.Subset</a>
<a id="386" class="Keyword">open</a> <a id="391" class="Keyword">import</a> <a id="398" href="Causality.Data.Graph.html" class="Module">Causality.Data.Graph</a>
<a id="419" class="Keyword">open</a> <a id="424" class="Keyword">import</a> <a id="431" href="Causality.Data.Graphoid.html" class="Module">Causality.Data.Graphoid</a>
<a id="455" class="Keyword">open</a> <a id="460" class="Keyword">import</a> <a id="467" href="Causality.Data.List.html" class="Module">Causality.Data.List</a>
</pre>
<details>
<summary>Standard library imports.</summary>
<div>
<pre class="Agda"><a id="561" class="Keyword">open</a> <a id="566" class="Keyword">import</a> <a id="573" href="Data.Fin.html" class="Module">Data.Fin</a> <a id="582" class="Keyword">using</a> <a id="588" class="Symbol">(</a><a id="589" href="Data.Fin.Base.html#1154" class="Datatype">Fin</a><a id="592" class="Symbol">)</a>
<a id="594" class="Keyword">open</a> <a id="599" class="Keyword">import</a> <a id="606" href="Data.Fin.Subset.html" class="Module">Data.Fin.Subset</a> <a id="622" class="Keyword">using</a> <a id="628" class="Symbol">(</a><a id="629" href="Data.Fin.Subset.html#1064" class="Function">Subset</a><a id="635" class="Symbol">;</a> <a id="637" href="Data.Fin.Subset.html#2387" class="Function">⋃</a><a id="638" class="Symbol">)</a>
<a id="640" class="Keyword">import</a> <a id="647" href="Data.Fin.Subset.html" class="Module">Data.Fin.Subset</a> <a id="663" class="Symbol">as</a> <a id="666" class="Module">Fin</a>
<a id="670" class="Keyword">import</a> <a id="677" href="Data.Fin.Subset.Properties.html" class="Module">Data.Fin.Subset.Properties</a> <a id="704" class="Symbol">as</a> <a id="707" class="Module">Fin</a>
<a id="711" class="Keyword">open</a> <a id="716" class="Keyword">import</a> <a id="723" href="Data.List.html" class="Module">Data.List</a> <a id="733" class="Keyword">using</a> <a id="739" class="Symbol">(</a><a id="740" href="Agda.Builtin.List.html#147" class="Datatype">List</a><a id="744" class="Symbol">;</a> <a id="746" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">_∷_</a><a id="749" class="Symbol">;</a> <a id="751" href="Data.List.Base.html#7793" class="InductiveConstructor">[]</a><a id="753" class="Symbol">;</a> <a id="755" href="Data.List.Base.html#5083" class="Function">length</a><a id="761" class="Symbol">)</a>
<a id="763" class="Keyword">open</a> <a id="768" class="Keyword">import</a> <a id="775" href="Data.List.Relation.Unary.Linked.html" class="Module">Data.List.Relation.Unary.Linked</a> <a id="807" class="Keyword">using</a> <a id="813" class="Symbol">(</a><a id="814" href="Data.List.Relation.Unary.Linked.html#1362" class="Datatype">Linked</a><a id="820" class="Symbol">)</a>
<a id="822" class="Keyword">open</a> <a id="827" class="Keyword">import</a> <a id="834" href="Data.List.Relation.Unary.Unique.Propositional.html" class="Module">Data.List.Relation.Unary.Unique.Propositional</a> <a id="880" class="Keyword">using</a> <a id="886" class="Symbol">(</a><a id="887" href="Data.List.Relation.Unary.Unique.Setoid.html#785" class="Datatype">Unique</a><a id="893" class="Symbol">)</a>
<a id="895" class="Keyword">import</a> <a id="902" href="Data.List.Relation.Unary.Unique.Propositional.Properties.html" class="Module">Data.List.Relation.Unary.Unique.Propositional.Properties</a> <a id="959" class="Symbol">as</a> <a id="962" class="Module">Unique</a>
<a id="969" class="Keyword">open</a> <a id="974" class="Keyword">import</a> <a id="981" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="990" class="Keyword">using</a> <a id="996" class="Symbol">(</a><a id="997" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="998" class="Symbol">;</a> <a id="1000" href="Data.Nat.Base.html#2259" class="Function Operator">_≥_</a><a id="1003" class="Symbol">;</a> <a id="1005" href="Data.Nat.Base.html#1756" class="InductiveConstructor">s≤s</a><a id="1008" class="Symbol">)</a>
<a id="1010" class="Keyword">open</a> <a id="1015" class="Keyword">import</a> <a id="1022" href="Data.Product.html" class="Module">Data.Product</a> <a id="1035" class="Keyword">using</a> <a id="1041" class="Symbol">(</a><a id="1042" href="Data.Product.Base.html#1371" class="Function">∃-syntax</a><a id="1050" class="Symbol">;</a> <a id="1052" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="1053" class="Symbol">;</a> <a id="1055" href="Data.Product.Base.html#1244" class="Function">Σ-syntax</a><a id="1063" class="Symbol">;</a> <a id="1065" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="1068" class="Symbol">;</a> <a id="1070" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a><a id="1073" class="Symbol">)</a> <a id="1075" class="Keyword">renaming</a> <a id="1084" class="Symbol">(</a><a id="1085" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="1091" class="Symbol">to</a> <a id="1094" class="Field">_₁</a><a id="1096" class="Symbol">)</a>
<a id="1098" class="Keyword">open</a> <a id="1103" class="Keyword">import</a> <a id="1110" href="Data.Sum.html" class="Module">Data.Sum</a> <a id="1119" class="Keyword">using</a> <a id="1125" class="Symbol">(</a><a id="1126" href="Data.Sum.Base.html#625" class="Datatype Operator">_⊎_</a><a id="1129" class="Symbol">)</a>
<a id="1131" class="Keyword">open</a> <a id="1136" class="Keyword">import</a> <a id="1143" href="Function.html" class="Module">Function</a> <a id="1152" class="Keyword">using</a> <a id="1158" class="Symbol">(</a><a id="1159" href="Function.Base.html#1115" class="Function Operator">_∘_</a><a id="1162" class="Symbol">;</a> <a id="1164" href="Function.Base.html#4042" class="Function Operator">case_of_</a><a id="1172" class="Symbol">)</a>
<a id="1174" class="Keyword">open</a> <a id="1179" class="Keyword">import</a> <a id="1186" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="1224" class="Keyword">using</a> <a id="1230" class="Symbol">(</a><a id="1231" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="1234" class="Symbol">;</a> <a id="1236" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">_≢_</a><a id="1239" class="Symbol">;</a> <a id="1241" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="1245" class="Symbol">)</a>
<a id="1247" class="Keyword">open</a> <a id="1252" class="Keyword">import</a> <a id="1259" href="Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="1276" class="Keyword">using</a> <a id="1282" class="Symbol">(</a><a id="1283" href="Relation.Nullary.Negation.Core.html#698" class="Function Operator">¬_</a><a id="1285" class="Symbol">;</a> <a id="1287" href="Relation.Nullary.Decidable.Core.html#2517" class="Function">¬?</a><a id="1289" class="Symbol">;</a> <a id="1291" href="Relation.Nullary.Negation.Core.html#1226" class="Function">contradiction</a><a id="1304" class="Symbol">)</a>
</pre></div>
</details>

<details>
<summary>Some utility functions, for use below.</summary>
<div>
<pre class="Agda"><a id="_-×-_"></a><a id="1411" href="Causality.CausalGraph.html#1411" class="Function Operator">_-×-_</a> <a id="1417" class="Symbol">:</a> <a id="1419" class="Symbol">∀</a> <a id="1421" class="Symbol">{</a><a id="1422" href="Causality.CausalGraph.html#1422" class="Bound">a</a> <a id="1424" href="Causality.CausalGraph.html#1424" class="Bound">b</a> <a id="1426" href="Causality.CausalGraph.html#1426" class="Bound">c</a><a id="1427" class="Symbol">}</a> <a id="1429" class="Symbol">{</a><a id="1430" href="Causality.CausalGraph.html#1430" class="Bound">A</a> <a id="1432" class="Symbol">:</a> <a id="1434" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1438" href="Causality.CausalGraph.html#1422" class="Bound">a</a><a id="1439" class="Symbol">}</a> <a id="1441" class="Symbol">→</a> <a id="1443" class="Symbol">(</a><a id="1444" href="Causality.CausalGraph.html#1430" class="Bound">A</a> <a id="1446" class="Symbol">→</a> <a id="1448" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1452" href="Causality.CausalGraph.html#1424" class="Bound">b</a><a id="1453" class="Symbol">)</a> <a id="1455" class="Symbol">→</a> <a id="1457" class="Symbol">(</a><a id="1458" href="Causality.CausalGraph.html#1430" class="Bound">A</a> <a id="1460" class="Symbol">→</a> <a id="1462" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1466" href="Causality.CausalGraph.html#1426" class="Bound">c</a><a id="1467" class="Symbol">)</a> <a id="1469" class="Symbol">→</a> <a id="1471" class="Symbol">(</a><a id="1472" href="Causality.CausalGraph.html#1430" class="Bound">A</a> <a id="1474" class="Symbol">→</a> <a id="1476" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1480" class="Symbol">_)</a>
<a id="1483" href="Causality.CausalGraph.html#1483" class="Bound">P</a> <a id="1485" href="Causality.CausalGraph.html#1411" class="Function Operator">-×-</a> <a id="1489" href="Causality.CausalGraph.html#1489" class="Bound">Q</a> <a id="1491" class="Symbol">=</a> <a id="1493" class="Symbol">λ</a> <a id="1495" href="Causality.CausalGraph.html#1495" class="Bound">x</a> <a id="1497" class="Symbol">→</a> <a id="1499" href="Causality.CausalGraph.html#1483" class="Bound">P</a> <a id="1501" href="Causality.CausalGraph.html#1495" class="Bound">x</a> <a id="1503" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1505" href="Causality.CausalGraph.html#1489" class="Bound">Q</a> <a id="1507" href="Causality.CausalGraph.html#1495" class="Bound">x</a>

<a id="_-⊎-_"></a><a id="1510" href="Causality.CausalGraph.html#1510" class="Function Operator">_-⊎-_</a> <a id="1516" class="Symbol">:</a> <a id="1518" class="Symbol">∀</a> <a id="1520" class="Symbol">{</a><a id="1521" href="Causality.CausalGraph.html#1521" class="Bound">a</a> <a id="1523" href="Causality.CausalGraph.html#1523" class="Bound">b</a> <a id="1525" href="Causality.CausalGraph.html#1525" class="Bound">c</a><a id="1526" class="Symbol">}</a> <a id="1528" class="Symbol">{</a><a id="1529" href="Causality.CausalGraph.html#1529" class="Bound">A</a> <a id="1531" class="Symbol">:</a> <a id="1533" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1537" href="Causality.CausalGraph.html#1521" class="Bound">a</a><a id="1538" class="Symbol">}</a> <a id="1540" class="Symbol">→</a> <a id="1542" class="Symbol">(</a><a id="1543" href="Causality.CausalGraph.html#1529" class="Bound">A</a> <a id="1545" class="Symbol">→</a> <a id="1547" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1551" href="Causality.CausalGraph.html#1523" class="Bound">b</a><a id="1552" class="Symbol">)</a> <a id="1554" class="Symbol">→</a> <a id="1556" class="Symbol">(</a><a id="1557" href="Causality.CausalGraph.html#1529" class="Bound">A</a> <a id="1559" class="Symbol">→</a> <a id="1561" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1565" href="Causality.CausalGraph.html#1525" class="Bound">c</a><a id="1566" class="Symbol">)</a> <a id="1568" class="Symbol">→</a> <a id="1570" class="Symbol">(</a><a id="1571" href="Causality.CausalGraph.html#1529" class="Bound">A</a> <a id="1573" class="Symbol">→</a> <a id="1575" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1579" class="Symbol">_)</a>
<a id="1582" href="Causality.CausalGraph.html#1582" class="Bound">P</a> <a id="1584" href="Causality.CausalGraph.html#1510" class="Function Operator">-⊎-</a> <a id="1588" href="Causality.CausalGraph.html#1588" class="Bound">Q</a> <a id="1590" class="Symbol">=</a> <a id="1592" class="Symbol">λ</a> <a id="1594" href="Causality.CausalGraph.html#1594" class="Bound">x</a> <a id="1596" class="Symbol">→</a> <a id="1598" href="Causality.CausalGraph.html#1582" class="Bound">P</a> <a id="1600" href="Causality.CausalGraph.html#1594" class="Bound">x</a> <a id="1602" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="1604" href="Causality.CausalGraph.html#1588" class="Bound">Q</a> <a id="1606" href="Causality.CausalGraph.html#1594" class="Bound">x</a>
</pre></div>
</details>
</div>
</details>

We parameterize our development by an arbitrary DAG $G$.

<pre class="Agda"><a id="1715" class="Keyword">module</a> <a id="CausalGraph"></a><a id="1722" href="Causality.CausalGraph.html#1722" class="Module">CausalGraph</a> <a id="1734" class="Symbol">(</a><a id="1735" href="Causality.CausalGraph.html#1735" class="Bound">G</a> <a id="1737" class="Symbol">:</a> <a id="1739" href="Causality.Data.Graph.html#2298" class="Record">DAG</a><a id="1742" class="Symbol">)</a> <a id="1744" class="Keyword">where</a>

  <a id="1753" class="Keyword">open</a> <a id="1758" href="Causality.Data.Graph.html#2298" class="Module">DAG</a> <a id="1762" href="Causality.CausalGraph.html#1735" class="Bound">G</a>
</pre>
We define a "path" through a causal graph to be a list of vertices connected by adjacencies.

<pre class="Agda">  <a id="1873" class="Keyword">record</a> <a id="CausalGraph.Path"></a><a id="1880" href="Causality.CausalGraph.html#1880" class="Record">Path</a> <a id="1885" class="Symbol">:</a> <a id="1887" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1891" class="Keyword">where</a>
    <a id="1901" class="Keyword">field</a> <a id="CausalGraph.Path.nodes"></a><a id="1907" href="Causality.CausalGraph.html#1907" class="Field">nodes</a>              <a id="1926" class="Symbol">:</a> <a id="1928" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1933" href="Causality.Data.Graph.html#745" class="Function">V</a>
    <a id="1939" class="Keyword">field</a> <a id="CausalGraph.Path.linked"></a><a id="1945" href="Causality.CausalGraph.html#1945" class="Field">linked</a>             <a id="1964" class="Symbol">:</a> <a id="1966" href="Data.List.Relation.Unary.Linked.html#1362" class="Datatype">Linked</a> <a id="1973" href="Causality.Data.Graph.html#985" class="Function Operator">_∃——_</a> <a id="1979" href="Causality.CausalGraph.html#1907" class="Field">nodes</a>
</pre>
We require that the path be acyclic, i.e. that no vertex is revisited, i.e. that the list of vertices
has no duplicates. We will also require that there are at least two vertices in our list, so that
we have distinct start- and endpoints.

<pre class="Agda">    <a id="2238" class="Keyword">field</a> <a id="CausalGraph.Path.acyclic"></a><a id="2244" href="Causality.CausalGraph.html#2244" class="Field">acyclic</a>            <a id="2263" class="Symbol">:</a> <a id="2265" href="Data.List.Relation.Unary.Unique.Setoid.html#785" class="Datatype">Unique</a> <a id="2272" href="Causality.CausalGraph.html#1907" class="Field">nodes</a>
    <a id="2282" class="Keyword">field</a> <a id="CausalGraph.Path.distinct-endpoints"></a><a id="2288" href="Causality.CausalGraph.html#2288" class="Field">distinct-endpoints</a> <a id="2307" class="Symbol">:</a> <a id="2309" href="Data.List.Base.html#5083" class="Function">length</a> <a id="2316" href="Causality.CausalGraph.html#1907" class="Field">nodes</a> <a id="2322" href="Data.Nat.Base.html#2259" class="Function Operator">≥</a> <a id="2324" class="Number">2</a>

    <a id="CausalGraph.Path.nonempty"></a><a id="2331" href="Causality.CausalGraph.html#2331" class="Function">nonempty</a> <a id="2340" class="Symbol">:</a> <a id="2342" href="Causality.CausalGraph.html#1907" class="Field">nodes</a> <a id="2348" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="2350" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
    <a id="2357" href="Causality.CausalGraph.html#2331" class="Function">nonempty</a> <a id="2366" href="Causality.CausalGraph.html#2366" class="Bound">nodes≡[]</a>
      <a id="2381" class="Keyword">with</a> <a id="2386" href="Causality.CausalGraph.html#1907" class="Field">nodes</a> <a id="2392" class="Symbol">|</a> <a id="2394" href="Causality.CausalGraph.html#2288" class="Field">distinct-endpoints</a>
    <a id="2417" class="Symbol">...</a>  <a id="2422" class="Symbol">|</a> <a id="2424" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>    <a id="2430" class="Symbol">|</a> <a id="2432" class="Symbol">()</a>
    <a id="2439" class="Symbol">...</a>  <a id="2444" class="Symbol">|</a> <a id="2446" class="Symbol">_</a> <a id="2448" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2450" class="Symbol">_</a> <a id="2452" class="Symbol">|</a> <a id="2454" href="Data.Nat.Base.html#1756" class="InductiveConstructor">s≤s</a> <a id="2458" class="Symbol">_</a> <a id="2460" class="Symbol">=</a> <a id="2462" href="Relation.Nullary.Negation.Core.html#1226" class="Function">contradiction</a> <a id="2476" class="Bound">nodes≡[]</a> <a id="2485" class="Symbol">λ()</a>

    <a id="CausalGraph.Path.start"></a><a id="2494" href="Causality.CausalGraph.html#2494" class="Function">start</a> <a id="2500" class="Symbol">:</a> <a id="2502" href="Causality.Data.Graph.html#745" class="Function">V</a>
    <a id="2508" href="Causality.CausalGraph.html#2494" class="Function">start</a> <a id="2514" class="Symbol">=</a> <a id="2516" href="Causality.Data.List.html#3092" class="Function">head-of-nonempty</a> <a id="2533" href="Causality.CausalGraph.html#2331" class="Function">nonempty</a> <a id="2542" href="Causality.CausalGraph.html#1094" class="Field Operator">₁</a>

    <a id="CausalGraph.Path.end"></a><a id="2549" href="Causality.CausalGraph.html#2549" class="Function">end</a> <a id="2553" class="Symbol">:</a> <a id="2555" href="Causality.Data.Graph.html#745" class="Function">V</a>
    <a id="2561" href="Causality.CausalGraph.html#2549" class="Function">end</a> <a id="2565" class="Symbol">=</a> <a id="2567" href="Causality.Data.List.html#2810" class="Function">last-of-nonempty</a> <a id="2584" href="Causality.CausalGraph.html#2331" class="Function">nonempty</a> <a id="2593" href="Causality.CausalGraph.html#1094" class="Field Operator">₁</a>

  <a id="2598" class="Keyword">open</a> <a id="2603" href="Causality.CausalGraph.html#1880" class="Module">Path</a>
</pre>
For any two vertices $i, j$ in $G$, we will let `i —↠ j` denote the set of paths from $i$ to $j$.

<pre class="Agda">  <a id="CausalGraph._—↠_"></a><a id="2722" href="Causality.CausalGraph.html#2722" class="Function Operator">_—↠_</a> <a id="2727" class="Symbol">:</a> <a id="2729" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="2731" class="Symbol">→</a> <a id="2733" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="2735" class="Symbol">→</a> <a id="2737" href="Agda.Primitive.html#388" class="Primitive">Set</a>
  <a id="2743" href="Causality.CausalGraph.html#2743" class="Bound">from</a> <a id="2748" href="Causality.CausalGraph.html#2722" class="Function Operator">—↠</a> <a id="2751" href="Causality.CausalGraph.html#2751" class="Bound">to</a> <a id="2754" class="Symbol">=</a> <a id="2756" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="2759" href="Causality.CausalGraph.html#2759" class="Bound">p</a> <a id="2761" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="2763" href="Causality.CausalGraph.html#2494" class="Function">start</a> <a id="2769" href="Causality.CausalGraph.html#2759" class="Bound">p</a> <a id="2771" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2773" href="Causality.CausalGraph.html#2743" class="Bound">from</a> <a id="2778" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2780" href="Causality.CausalGraph.html#2549" class="Function">end</a> <a id="2784" href="Causality.CausalGraph.html#2759" class="Bound">p</a> <a id="2786" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2788" href="Causality.CausalGraph.html#2751" class="Bound">to</a>
</pre>
We will say `i ∃—↠ j` if there exists a path starting at $i$ and ending at $j$.

<pre class="Agda">  <a id="CausalGraph._∃—↠_"></a><a id="2887" href="Causality.CausalGraph.html#2887" class="Function Operator">_∃—↠_</a> <a id="2893" class="Symbol">=</a> <a id="2895" href="Causality.CausalGraph.html#2722" class="Function Operator">_—↠_</a>
</pre>
<details>
<summary>Some helper functions for working with paths.</summary>
<div>
<pre class="Agda">  <a id="CausalGraph.triples-along"></a><a id="2996" href="Causality.CausalGraph.html#2996" class="Function">triples-along</a> <a id="3010" class="Symbol">:</a> <a id="3012" href="Causality.CausalGraph.html#1880" class="Record">Path</a> <a id="3017" class="Symbol">→</a> <a id="3019" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3024" class="Symbol">(</a><a id="3025" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3027" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3029" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3031" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3033" href="Causality.Data.Graph.html#745" class="Function">V</a><a id="3034" class="Symbol">)</a>
  <a id="3038" href="Causality.CausalGraph.html#2996" class="Function">triples-along</a> <a id="3052" class="Symbol">=</a> <a id="3054" href="Causality.Data.List.html#2358" class="Function">triples</a> <a id="3062" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3064" href="Causality.CausalGraph.html#1907" class="Field">nodes</a>

  <a id="CausalGraph._visits_"></a><a id="3073" href="Causality.CausalGraph.html#3073" class="Function Operator">_visits_</a> <a id="3082" class="Symbol">:</a> <a id="3084" class="Symbol">(</a><a id="3085" href="Causality.CausalGraph.html#3085" class="Bound">p</a> <a id="3087" class="Symbol">:</a> <a id="3089" href="Causality.CausalGraph.html#1880" class="Record">Path</a><a id="3093" class="Symbol">)</a> <a id="3095" class="Symbol">→</a> <a id="3097" class="Symbol">(</a><a id="3098" href="Causality.CausalGraph.html#3098" class="Bound">v</a> <a id="3100" class="Symbol">:</a> <a id="3102" href="Causality.Data.Graph.html#745" class="Function">V</a><a id="3103" class="Symbol">)</a> <a id="3105" class="Symbol">→</a> <a id="3107" href="Agda.Primitive.html#388" class="Primitive">Set</a>
  <a id="3113" href="Causality.CausalGraph.html#3113" class="Bound">p</a> <a id="3115" href="Causality.CausalGraph.html#3073" class="Function Operator">visits</a> <a id="3122" href="Causality.CausalGraph.html#3122" class="Bound">v</a> <a id="3124" class="Symbol">=</a> <a id="3126" href="Causality.CausalGraph.html#3122" class="Bound">v</a> <a id="3128" href="Data.List.Membership.Setoid.html#950" class="Function Operator">∈</a> <a id="3130" href="Causality.CausalGraph.html#1907" class="Field">nodes</a> <a id="3136" href="Causality.CausalGraph.html#3113" class="Bound">p</a>
    <a id="3142" class="Keyword">where</a> <a id="3148" class="Keyword">open</a> <a id="3153" class="Keyword">import</a> <a id="3160" href="Data.List.Membership.Propositional.html" class="Module">Data.List.Membership.Propositional</a> <a id="3195" class="Keyword">using</a> <a id="3201" class="Symbol">(</a><a id="3202" href="Data.List.Membership.Setoid.html#950" class="Function Operator">_∈_</a><a id="3205" class="Symbol">)</a>
</pre></div>
</details>

A subset of $V$ is a valid conditioning set (w.r.t. some path `i —↠ j`) if $C \subseteq V \setminus \{ i , j \}$.

<pre class="Agda">  <a id="CausalGraph.ConditioningSet"></a><a id="3355" href="Causality.CausalGraph.html#3355" class="Function">ConditioningSet</a> <a id="3371" class="Symbol">:</a> <a id="3373" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3375" class="Symbol">→</a> <a id="3377" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3379" class="Symbol">→</a> <a id="3381" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="3385" class="Symbol">_</a>
  <a id="3389" href="Causality.CausalGraph.html#3355" class="Function">ConditioningSet</a> <a id="3405" href="Causality.CausalGraph.html#3405" class="Bound">i</a> <a id="3407" href="Causality.CausalGraph.html#3407" class="Bound">j</a> <a id="3409" class="Symbol">=</a> <a id="3411" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a> <a id="3413" class="Symbol">(</a><a id="3414" href="Data.Fin.Subset.html#1064" class="Function">Subset</a> <a id="3421" href="Causality.Data.Graph.html#734" class="Function">|V|</a><a id="3424" class="Symbol">)</a> <a id="3426" class="Symbol">(</a><a id="3427" href="Causality.Data.Fin.Subset.html#5305" class="Function Operator">_⊆∖</a> <a id="3431" href="Causality.Data.Fin.Subset.html#5360" class="Function Operator">⁅</a> <a id="3433" href="Causality.CausalGraph.html#3405" class="Bound">i</a> <a id="3435" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3437" href="Causality.CausalGraph.html#3407" class="Bound">j</a> <a id="3439" href="Causality.Data.Fin.Subset.html#5360" class="Function Operator">⁆₂</a><a id="3441" class="Symbol">)</a>
</pre>
We will denote the empty conditioning set by $\varnothing$.

<pre class="Agda">  <a id="CausalGraph.∅"></a><a id="3519" href="Causality.CausalGraph.html#3519" class="Function">∅</a> <a id="3521" class="Symbol">:</a> <a id="3523" class="Symbol">∀</a> <a id="3525" class="Symbol">{</a><a id="3526" href="Causality.CausalGraph.html#3526" class="Bound">i</a> <a id="3528" href="Causality.CausalGraph.html#3528" class="Bound">j</a><a id="3529" class="Symbol">}</a> <a id="3531" class="Symbol">→</a> <a id="3533" href="Causality.CausalGraph.html#3355" class="Function">ConditioningSet</a> <a id="3549" href="Causality.CausalGraph.html#3526" class="Bound">i</a> <a id="3551" href="Causality.CausalGraph.html#3528" class="Bound">j</a>
  <a id="3555" href="Causality.CausalGraph.html#3519" class="Function">∅</a> <a id="3557" class="Symbol">=</a> <a id="3559" href="Data.Fin.Subset.html#1213" class="Function">Fin.⊥</a> <a id="3565" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3567" href="Data.Fin.Subset.Properties.html#4655" class="Function">Fin.⊥⊆</a>
</pre>
<details>
<summary>Groundwork to let us define colliders, noncolliders, etc.</summary>
<div>
<pre class="Agda">  <a id="3682" class="Keyword">module</a> <a id="CausalGraph.Pattern"></a><a id="3689" href="Causality.CausalGraph.html#3689" class="Module">Pattern</a> <a id="3697" class="Keyword">where</a>

    <a id="CausalGraph.Pattern.Pattern"></a><a id="3708" href="Causality.CausalGraph.html#3708" class="Function">Pattern</a> <a id="3716" class="Symbol">:</a> <a id="3718" class="Symbol">∀</a> <a id="3720" class="Symbol">{</a><a id="3721" href="Causality.CausalGraph.html#3721" class="Bound">a</a><a id="3722" class="Symbol">}</a> <a id="3724" class="Symbol">→</a> <a id="3726" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="3730" class="Symbol">_</a>
    <a id="3736" href="Causality.CausalGraph.html#3708" class="Function">Pattern</a> <a id="3744" class="Symbol">{</a><a id="3745" href="Causality.CausalGraph.html#3745" class="Bound">a</a><a id="3746" class="Symbol">}</a> <a id="3748" class="Symbol">=</a> <a id="3750" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3752" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3754" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3756" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3758" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3760" class="Symbol">→</a> <a id="3762" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="3766" href="Causality.CausalGraph.html#3745" class="Bound">a</a>


    <a id="3774" class="Keyword">module</a> <a id="CausalGraph.Pattern.Notation"></a><a id="3781" href="Causality.CausalGraph.html#3781" class="Module">Notation</a> <a id="3790" class="Keyword">where</a>

      <a id="CausalGraph.Pattern.Notation._∙_"></a><a id="3803" href="Causality.CausalGraph.html#3803" class="Function Operator">_∙_</a> <a id="3807" class="Symbol">:</a> <a id="3809" class="Symbol">∀</a> <a id="3811" class="Symbol">{</a><a id="3812" href="Causality.CausalGraph.html#3812" class="Bound">a</a> <a id="3814" href="Causality.CausalGraph.html#3814" class="Bound">b</a><a id="3815" class="Symbol">}</a> <a id="3817" class="Symbol">→</a> <a id="3819" class="Symbol">(</a><a id="3820" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3822" class="Symbol">→</a> <a id="3824" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3826" class="Symbol">→</a> <a id="3828" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="3832" href="Causality.CausalGraph.html#3812" class="Bound">a</a><a id="3833" class="Symbol">)</a> <a id="3835" class="Symbol">→</a> <a id="3837" class="Symbol">(</a><a id="3838" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3840" class="Symbol">→</a> <a id="3842" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="3844" class="Symbol">→</a> <a id="3846" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="3850" href="Causality.CausalGraph.html#3814" class="Bound">b</a><a id="3851" class="Symbol">)</a> <a id="3853" class="Symbol">→</a> <a id="3855" href="Causality.CausalGraph.html#3708" class="Function">Pattern</a>
      <a id="3869" href="Causality.CausalGraph.html#3869" class="Bound Operator">_l-x_</a> <a id="3875" href="Causality.CausalGraph.html#3803" class="Function Operator">∙</a> <a id="3877" href="Causality.CausalGraph.html#3877" class="Bound Operator">_x-r_</a> <a id="3883" class="Symbol">=</a> <a id="3885" class="Symbol">λ{</a> <a id="3888" class="Symbol">(</a><a id="3889" href="Causality.CausalGraph.html#3889" class="Bound">l</a> <a id="3891" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3893" href="Causality.CausalGraph.html#3893" class="Bound">x</a> <a id="3895" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3897" href="Causality.CausalGraph.html#3897" class="Bound">r</a><a id="3898" class="Symbol">)</a> <a id="3900" class="Symbol">→</a> <a id="3902" href="Causality.CausalGraph.html#3889" class="Bound">l</a> <a id="3904" href="Causality.CausalGraph.html#3869" class="Bound Operator">l-x</a> <a id="3908" href="Causality.CausalGraph.html#3893" class="Bound">x</a> <a id="3910" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3912" href="Causality.CausalGraph.html#3893" class="Bound">x</a> <a id="3914" href="Causality.CausalGraph.html#3877" class="Bound Operator">x-r</a> <a id="3918" href="Causality.CausalGraph.html#3897" class="Bound">r</a> <a id="3920" class="Symbol">}</a>

      <a id="CausalGraph.Pattern.Notation.⟶"></a><a id="3929" href="Causality.CausalGraph.html#3929" class="Function">⟶</a> <a id="3931" class="Symbol">=</a> <a id="3933" href="Causality.Data.Graph.html#822" class="Function Operator">_∃⟶_</a>
      <a id="CausalGraph.Pattern.Notation.⟵"></a><a id="3944" href="Causality.CausalGraph.html#3944" class="Function">⟵</a> <a id="3946" class="Symbol">=</a> <a id="3948" href="Causality.Data.Graph.html#940" class="Function Operator">_∃⟵_</a>

    <a id="3958" class="Keyword">open</a> <a id="3963" href="Causality.CausalGraph.html#3781" class="Module">Notation</a>
</pre></div>
</details>

<pre class="Agda">    <a id="CausalGraph.Pattern.collider"></a><a id="4007" href="Causality.CausalGraph.html#4007" class="Function">collider</a> <a id="CausalGraph.Pattern.common-cause"></a><a id="4016" href="Causality.CausalGraph.html#4016" class="Function">common-cause</a> <a id="CausalGraph.Pattern.mediator"></a><a id="4029" href="Causality.CausalGraph.html#4029" class="Function">mediator</a> <a id="4038" class="Symbol">:</a> <a id="4040" href="Causality.CausalGraph.html#3708" class="Function">Pattern</a>
    <a id="4052" href="Causality.CausalGraph.html#4007" class="Function">collider</a>     <a id="4065" class="Symbol">=</a> <a id="4067" href="Causality.CausalGraph.html#3929" class="Function">⟶</a> <a id="4069" href="Causality.CausalGraph.html#3803" class="Function Operator">∙</a> <a id="4071" href="Causality.CausalGraph.html#3944" class="Function">⟵</a>
    <a id="4077" href="Causality.CausalGraph.html#4016" class="Function">common-cause</a> <a id="4090" class="Symbol">=</a> <a id="4092" href="Causality.CausalGraph.html#3944" class="Function">⟵</a> <a id="4094" href="Causality.CausalGraph.html#3803" class="Function Operator">∙</a> <a id="4096" href="Causality.CausalGraph.html#3929" class="Function">⟶</a>
    <a id="4102" href="Causality.CausalGraph.html#4029" class="Function">mediator</a>     <a id="4115" class="Symbol">=</a> <a id="4117" href="Causality.CausalGraph.html#3929" class="Function">⟶</a> <a id="4119" href="Causality.CausalGraph.html#3803" class="Function Operator">∙</a> <a id="4121" href="Causality.CausalGraph.html#3929" class="Function">⟶</a>
</pre>
A noncollider is either a common cause or a mediator.

<pre class="Agda">    <a id="CausalGraph.Pattern.noncollider"></a><a id="4195" href="Causality.CausalGraph.html#4195" class="Function">noncollider</a> <a id="4207" class="Symbol">:</a> <a id="4209" href="Causality.CausalGraph.html#3708" class="Function">Pattern</a>
    <a id="4221" href="Causality.CausalGraph.html#4195" class="Function">noncollider</a> <a id="4233" class="Symbol">=</a> <a id="4235" href="Causality.CausalGraph.html#4016" class="Function">common-cause</a> <a id="4248" href="Causality.CausalGraph.html#1510" class="Function Operator">-⊎-</a> <a id="4252" href="Causality.CausalGraph.html#4029" class="Function">mediator</a>
</pre>
We will write `colliders along p` to denote "the set of all vertices that are colliders along some path $p$"
(and similarly for common causes, etc.).

<pre class="Agda">    <a id="CausalGraph.Pattern._along_"></a><a id="4429" href="Causality.CausalGraph.html#4429" class="Function Operator">_along_</a> <a id="4437" class="Symbol">:</a> <a id="4439" class="Symbol">∀</a> <a id="4441" class="Symbol">{</a><a id="4442" href="Causality.CausalGraph.html#4442" class="Bound">a</a><a id="4443" class="Symbol">}</a> <a id="4445" class="Symbol">→</a> <a id="4447" href="Causality.CausalGraph.html#3708" class="Function">Pattern</a> <a id="4455" class="Symbol">{</a><a id="4456" href="Causality.CausalGraph.html#4442" class="Bound">a</a><a id="4457" class="Symbol">}</a> <a id="4459" class="Symbol">→</a> <a id="4461" href="Causality.CausalGraph.html#1880" class="Record">Path</a> <a id="4466" class="Symbol">→</a> <a id="4468" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="4472" class="Symbol">_</a>
    <a id="4478" href="Causality.CausalGraph.html#4478" class="Bound">pat</a> <a id="4482" href="Causality.CausalGraph.html#4429" class="Function Operator">along</a> <a id="4488" href="Causality.CausalGraph.html#4488" class="Bound">p</a> <a id="4490" class="Symbol">=</a>
      <a id="4498" href="Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="4501" href="Causality.CausalGraph.html#4501" class="Bound">x</a> <a id="4503" href="Data.Product.Base.html#1244" class="Function">∈</a> <a id="4505" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="4507" href="Data.Product.Base.html#1244" class="Function">]</a>
        <a id="4517" href="Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="4520" href="Causality.CausalGraph.html#4520" class="Bound">triple</a><a id="4526" class="Symbol">@(_</a> <a id="4530" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4532" href="Causality.CausalGraph.html#4532" class="Bound">x′</a> <a id="4535" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4537" class="Symbol">_)</a> <a id="4540" href="Data.Product.Base.html#1244" class="Function">∈</a> <a id="4542" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="4544" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4546" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="4548" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4550" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="4552" href="Data.Product.Base.html#1244" class="Function">]</a>
          <a id="4564" href="Causality.CausalGraph.html#4501" class="Bound">x</a> <a id="4566" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4568" href="Causality.CausalGraph.html#4532" class="Bound">x′</a> <a id="4571" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4573" href="Causality.CausalGraph.html#4478" class="Bound">pat</a> <a id="4577" href="Causality.CausalGraph.html#4520" class="Bound">triple</a>

    <a id="CausalGraph.Pattern.colliders"></a><a id="4589" href="Causality.CausalGraph.html#4589" class="Function">colliders</a>     <a id="4603" class="Symbol">=</a> <a id="4605" href="Causality.CausalGraph.html#4007" class="Function">collider</a>
    <a id="CausalGraph.Pattern.common-causes"></a><a id="4618" href="Causality.CausalGraph.html#4618" class="Function">common-causes</a> <a id="4632" class="Symbol">=</a> <a id="4634" href="Causality.CausalGraph.html#4016" class="Function">common-cause</a>
    <a id="CausalGraph.Pattern.mediators"></a><a id="4651" href="Causality.CausalGraph.html#4651" class="Function">mediators</a>     <a id="4665" class="Symbol">=</a> <a id="4667" href="Causality.CausalGraph.html#4029" class="Function">mediator</a>
    <a id="CausalGraph.Pattern.noncolliders"></a><a id="4680" href="Causality.CausalGraph.html#4680" class="Function">noncolliders</a>  <a id="4694" class="Symbol">=</a> <a id="4696" href="Causality.CausalGraph.html#4195" class="Function">noncollider</a>

  <a id="4711" class="Keyword">open</a> <a id="4716" href="Causality.CausalGraph.html#3689" class="Module">Pattern</a>
</pre>
A vertex $j$ is a descendant of $i$ if there exists a path from $i$ to $j$.

<pre class="Agda">  <a id="CausalGraph.descendants"></a><a id="4816" href="Causality.CausalGraph.html#4816" class="Function">descendants</a> <a id="4828" class="Symbol">:</a> <a id="4830" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="4832" class="Symbol">→</a> <a id="4834" href="Agda.Primitive.html#388" class="Primitive">Set</a>
  <a id="4840" href="Causality.CausalGraph.html#4816" class="Function">descendants</a> <a id="4852" href="Causality.CausalGraph.html#4852" class="Bound">i</a> <a id="4854" class="Symbol">=</a> <a id="4856" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="4859" href="Causality.CausalGraph.html#4859" class="Bound">j</a> <a id="4861" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="4863" href="Causality.CausalGraph.html#4852" class="Bound">i</a> <a id="4865" href="Causality.CausalGraph.html#2887" class="Function Operator">∃—↠</a> <a id="4869" href="Causality.CausalGraph.html#4859" class="Bound">j</a>
</pre>
A path from $i$ to $j$ is unblocked (conditional on $C$) if:

<pre class="Agda">  <a id="CausalGraph.unblocked_∣_"></a><a id="4948" href="Causality.CausalGraph.html#4948" class="Function Operator">unblocked_∣_</a> <a id="4961" class="Symbol">:</a> <a id="4963" class="Symbol">∀</a> <a id="4965" class="Symbol">{</a><a id="4966" href="Causality.CausalGraph.html#4966" class="Bound">i</a> <a id="4968" href="Causality.CausalGraph.html#4968" class="Bound">j</a><a id="4969" class="Symbol">}</a> <a id="4971" class="Symbol">→</a> <a id="4973" href="Causality.CausalGraph.html#4966" class="Bound">i</a> <a id="4975" href="Causality.CausalGraph.html#2722" class="Function Operator">—↠</a> <a id="4978" href="Causality.CausalGraph.html#4968" class="Bound">j</a> <a id="4980" class="Symbol">→</a> <a id="4982" href="Causality.CausalGraph.html#3355" class="Function">ConditioningSet</a> <a id="4998" href="Causality.CausalGraph.html#4966" class="Bound">i</a> <a id="5000" href="Causality.CausalGraph.html#4968" class="Bound">j</a> <a id="5002" class="Symbol">→</a> <a id="5004" href="Agda.Primitive.html#388" class="Primitive">Set</a>
  <a id="5010" href="Causality.CausalGraph.html#4948" class="Function Operator">unblocked</a> <a id="5020" class="Symbol">(</a><a id="5021" href="Causality.CausalGraph.html#5021" class="Bound">p</a> <a id="5023" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5025" class="Symbol">_)</a> <a id="5028" href="Causality.CausalGraph.html#4948" class="Function Operator">∣</a> <a id="5030" class="Symbol">(</a><a id="5031" href="Causality.CausalGraph.html#5031" class="Bound">C</a> <a id="5033" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5035" class="Symbol">_)</a> <a id="5038" class="Symbol">=</a>
</pre>
1. all noncolliders along the path are not in $C$, and

<pre class="Agda">    <a id="5113" class="Symbol">((</a><a id="5115" href="Causality.CausalGraph.html#5115" class="Bound">v</a> <a id="5117" class="Symbol">:</a> <a id="5119" href="Causality.CausalGraph.html#4680" class="Function">noncolliders</a> <a id="5132" href="Causality.CausalGraph.html#4429" class="Function Operator">along</a> <a id="5138" href="Causality.CausalGraph.html#5021" class="Bound">p</a><a id="5139" class="Symbol">)</a> <a id="5141" class="Symbol">→</a> <a id="5143" href="Causality.CausalGraph.html#5115" class="Bound">v</a> <a id="5145" href="Causality.CausalGraph.html#1094" class="Field Operator">₁</a> <a id="5147" href="Data.Fin.Subset.html#1638" class="Function Operator">∉</a> <a id="5149" href="Causality.CausalGraph.html#5031" class="Bound">C</a><a id="5150" class="Symbol">)</a> <a id="5152" href="Data.Product.Base.html#1618" class="Function Operator">×</a>
</pre>
2. all colliders along $p$ are:

<pre class="Agda">    <a id="5204" class="Symbol">((</a><a id="5206" href="Causality.CausalGraph.html#5206" class="Bound">v</a> <a id="5208" class="Symbol">:</a> <a id="5210" href="Causality.CausalGraph.html#4589" class="Function">colliders</a> <a id="5220" href="Causality.CausalGraph.html#4429" class="Function Operator">along</a> <a id="5226" href="Causality.CausalGraph.html#5021" class="Bound">p</a><a id="5227" class="Symbol">)</a> <a id="5229" class="Symbol">→</a>
</pre>
   a) in $C$, or

<pre class="Agda">       <a id="5269" href="Causality.CausalGraph.html#5206" class="Bound">v</a> <a id="5271" href="Causality.CausalGraph.html#1094" class="Field Operator">₁</a> <a id="5273" href="Data.Fin.Subset.html#1584" class="Function Operator">∈</a> <a id="5275" href="Causality.CausalGraph.html#5031" class="Bound">C</a> <a id="5277" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a>
</pre>
   b) have a descendant in $C$.

<pre class="Agda">       <a id="5332" href="Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="5335" href="Causality.CausalGraph.html#5335" class="Bound">i</a> <a id="5337" href="Data.Product.Base.html#1244" class="Function">∈</a> <a id="5339" href="Causality.CausalGraph.html#4816" class="Function">descendants</a> <a id="5351" class="Symbol">(</a><a id="5352" href="Causality.CausalGraph.html#5206" class="Bound">v</a> <a id="5354" href="Causality.CausalGraph.html#1094" class="Field Operator">₁</a><a id="5355" class="Symbol">)</a> <a id="5357" href="Data.Product.Base.html#1244" class="Function">]</a> <a id="5359" href="Causality.CausalGraph.html#5335" class="Bound">i</a> <a id="5361" href="Causality.CausalGraph.html#1094" class="Field Operator">₁</a> <a id="5363" href="Data.Fin.Subset.html#1584" class="Function Operator">∈</a> <a id="5365" href="Causality.CausalGraph.html#5031" class="Bound">C</a><a id="5366" class="Symbol">)</a>
</pre>
<pre class="Agda">    <a id="5385" class="Keyword">where</a> <a id="5391" class="Keyword">open</a> <a id="5396" class="Keyword">import</a> <a id="5403" href="Data.Fin.Subset.html" class="Module">Data.Fin.Subset</a> <a id="5419" class="Keyword">using</a> <a id="5425" class="Symbol">(</a><a id="5426" href="Data.Fin.Subset.html#1584" class="Function Operator">_∈_</a><a id="5429" class="Symbol">;</a> <a id="5431" href="Data.Fin.Subset.html#1638" class="Function Operator">_∉_</a><a id="5434" class="Symbol">)</a>
</pre>
A path is blocked if it is not unblocked.

<pre class="Agda">  <a id="CausalGraph.blocked_∣_"></a><a id="5494" href="Causality.CausalGraph.html#5494" class="Function Operator">blocked_∣_</a> <a id="5505" class="Symbol">:</a> <a id="5507" class="Symbol">∀</a> <a id="5509" class="Symbol">{</a><a id="5510" href="Causality.CausalGraph.html#5510" class="Bound">i</a> <a id="5512" href="Causality.CausalGraph.html#5512" class="Bound">j</a><a id="5513" class="Symbol">}</a> <a id="5515" class="Symbol">→</a> <a id="5517" href="Causality.CausalGraph.html#5510" class="Bound">i</a> <a id="5519" href="Causality.CausalGraph.html#2722" class="Function Operator">—↠</a> <a id="5522" href="Causality.CausalGraph.html#5512" class="Bound">j</a> <a id="5524" class="Symbol">→</a> <a id="5526" href="Causality.CausalGraph.html#3355" class="Function">ConditioningSet</a> <a id="5542" href="Causality.CausalGraph.html#5510" class="Bound">i</a> <a id="5544" href="Causality.CausalGraph.html#5512" class="Bound">j</a> <a id="5546" class="Symbol">→</a> <a id="5548" href="Agda.Primitive.html#388" class="Primitive">Set</a>
  <a id="5554" href="Causality.CausalGraph.html#5494" class="Function Operator">blocked</a> <a id="5562" href="Causality.CausalGraph.html#5562" class="Bound">p</a> <a id="5564" href="Causality.CausalGraph.html#5494" class="Function Operator">∣</a> <a id="5566" href="Causality.CausalGraph.html#5566" class="Bound">C</a> <a id="5568" class="Symbol">=</a> <a id="5570" href="Relation.Nullary.Negation.Core.html#698" class="Function Operator">¬</a> <a id="5572" href="Causality.CausalGraph.html#4948" class="Function Operator">unblocked</a> <a id="5582" href="Causality.CausalGraph.html#5562" class="Bound">p</a> <a id="5584" href="Causality.CausalGraph.html#4948" class="Function Operator">∣</a> <a id="5586" href="Causality.CausalGraph.html#5566" class="Bound">C</a>
</pre>
Two vertices are $d$-separated (conditional on $C$) if all paths between them are blocked.

<pre class="Agda">  <a id="CausalGraph._⊥_∣_"></a><a id="5695" href="Causality.CausalGraph.html#5695" class="Function Operator">_⊥_∣_</a> <a id="5701" class="Symbol">:</a> <a id="5703" class="Symbol">(</a><a id="5704" href="Causality.CausalGraph.html#5704" class="Bound">i</a> <a id="5706" href="Causality.CausalGraph.html#5706" class="Bound">j</a> <a id="5708" class="Symbol">:</a> <a id="5710" href="Causality.Data.Graph.html#745" class="Function">V</a><a id="5711" class="Symbol">)</a> <a id="5713" class="Symbol">→</a> <a id="5715" href="Causality.CausalGraph.html#3355" class="Function">ConditioningSet</a> <a id="5731" href="Causality.CausalGraph.html#5704" class="Bound">i</a> <a id="5733" href="Causality.CausalGraph.html#5706" class="Bound">j</a> <a id="5735" class="Symbol">→</a> <a id="5737" href="Agda.Primitive.html#388" class="Primitive">Set</a>
  <a id="5743" href="Causality.CausalGraph.html#5743" class="Bound">i</a> <a id="5745" href="Causality.CausalGraph.html#5695" class="Function Operator">⊥</a> <a id="5747" href="Causality.CausalGraph.html#5747" class="Bound">j</a> <a id="5749" href="Causality.CausalGraph.html#5695" class="Function Operator">∣</a> <a id="5751" href="Causality.CausalGraph.html#5751" class="Bound">C</a> <a id="5753" class="Symbol">=</a> <a id="5755" class="Symbol">∀</a> <a id="5757" href="Causality.CausalGraph.html#5757" class="Bound">p</a> <a id="5759" class="Symbol">→</a> <a id="5761" href="Causality.CausalGraph.html#5494" class="Function Operator">blocked</a> <a id="5769" href="Causality.CausalGraph.html#5757" class="Bound">p</a> <a id="5771" href="Causality.CausalGraph.html#5494" class="Function Operator">∣</a> <a id="5773" href="Causality.CausalGraph.html#5751" class="Bound">C</a>
</pre>
Two vertices are $d$-connected (conditional on $C$) if they are not $d$-separated.

<pre class="Agda">  <a id="CausalGraph._⊥̸_∣_"></a><a id="5874" href="Causality.CausalGraph.html#5874" class="Function Operator">_⊥̸_∣_</a> <a id="5881" class="Symbol">:</a> <a id="5883" class="Symbol">(</a><a id="5884" href="Causality.CausalGraph.html#5884" class="Bound">i</a> <a id="5886" href="Causality.CausalGraph.html#5886" class="Bound">j</a> <a id="5888" class="Symbol">:</a> <a id="5890" href="Causality.Data.Graph.html#745" class="Function">V</a><a id="5891" class="Symbol">)</a> <a id="5893" class="Symbol">→</a> <a id="5895" href="Causality.CausalGraph.html#3355" class="Function">ConditioningSet</a> <a id="5911" href="Causality.CausalGraph.html#5884" class="Bound">i</a> <a id="5913" href="Causality.CausalGraph.html#5886" class="Bound">j</a> <a id="5915" class="Symbol">→</a> <a id="5917" href="Agda.Primitive.html#388" class="Primitive">Set</a>
  <a id="5923" href="Causality.CausalGraph.html#5923" class="Bound">i</a> <a id="5925" href="Causality.CausalGraph.html#5874" class="Function Operator">⊥̸</a> <a id="5928" href="Causality.CausalGraph.html#5928" class="Bound">j</a> <a id="5930" href="Causality.CausalGraph.html#5874" class="Function Operator">∣</a> <a id="5932" href="Causality.CausalGraph.html#5932" class="Bound">C</a> <a id="5934" class="Symbol">=</a> <a id="5936" href="Relation.Nullary.Negation.Core.html#698" class="Function Operator">¬</a> <a id="5938" href="Causality.CausalGraph.html#5923" class="Bound">i</a> <a id="5940" href="Causality.CausalGraph.html#5695" class="Function Operator">⊥</a> <a id="5942" href="Causality.CausalGraph.html#5928" class="Bound">j</a> <a id="5944" href="Causality.CausalGraph.html#5695" class="Function Operator">∣</a> <a id="5946" href="Causality.CausalGraph.html#5932" class="Bound">C</a>
</pre>
Two vertices are $d$-separated (unconditionally) if they are $d$-separated conditional on $\varnothing$.

<pre class="Agda">  <a id="CausalGraph._⊥_"></a><a id="6069" href="Causality.CausalGraph.html#6069" class="Function Operator">_⊥_</a> <a id="6073" class="Symbol">:</a> <a id="6075" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="6077" class="Symbol">→</a> <a id="6079" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="6081" class="Symbol">→</a> <a id="6083" href="Agda.Primitive.html#388" class="Primitive">Set</a>
  <a id="6089" href="Causality.CausalGraph.html#6089" class="Bound">i</a> <a id="6091" href="Causality.CausalGraph.html#6069" class="Function Operator">⊥</a> <a id="6093" href="Causality.CausalGraph.html#6093" class="Bound">j</a> <a id="6095" class="Symbol">=</a> <a id="6097" href="Causality.CausalGraph.html#6089" class="Bound">i</a> <a id="6099" href="Causality.CausalGraph.html#5695" class="Function Operator">⊥</a> <a id="6101" href="Causality.CausalGraph.html#6093" class="Bound">j</a> <a id="6103" href="Causality.CausalGraph.html#5695" class="Function Operator">∣</a> <a id="6105" href="Causality.CausalGraph.html#3519" class="Function">∅</a>
</pre>
Two vertices are $d$-connected (unconditionally) if they are not $d$-separated (unconditionally).

<pre class="Agda">  <a id="CausalGraph._⊥̸_"></a><a id="6221" href="Causality.CausalGraph.html#6221" class="Function Operator">_⊥̸_</a> <a id="6226" class="Symbol">:</a> <a id="6228" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="6230" class="Symbol">→</a> <a id="6232" href="Causality.Data.Graph.html#745" class="Function">V</a> <a id="6234" class="Symbol">→</a> <a id="6236" href="Agda.Primitive.html#388" class="Primitive">Set</a>
  <a id="6242" href="Causality.CausalGraph.html#6242" class="Bound">i</a> <a id="6244" href="Causality.CausalGraph.html#6221" class="Function Operator">⊥̸</a> <a id="6247" href="Causality.CausalGraph.html#6247" class="Bound">j</a> <a id="6249" class="Symbol">=</a> <a id="6251" href="Causality.CausalGraph.html#6242" class="Bound">i</a> <a id="6253" href="Causality.CausalGraph.html#5874" class="Function Operator">⊥̸</a> <a id="6256" href="Causality.CausalGraph.html#6247" class="Bound">j</a> <a id="6258" href="Causality.CausalGraph.html#5874" class="Function Operator">∣</a> <a id="6260" href="Causality.CausalGraph.html#3519" class="Function">∅</a>
</pre>
To intervene on a set of vertices $S$, we remove all edges going into vertices of $S$.

<pre class="Agda">  <a id="CausalGraph.intervene-on"></a><a id="6365" href="Causality.CausalGraph.html#6365" class="Function">intervene-on</a> <a id="6378" class="Symbol">:</a> <a id="6380" href="Data.Fin.Subset.html#1064" class="Function">Subset</a> <a id="6387" href="Causality.Data.Graph.html#734" class="Function">|V|</a> <a id="6391" class="Symbol">→</a> <a id="6393" href="Causality.Data.Graph.html#2298" class="Record">DAG</a>
  <a id="6399" href="Causality.CausalGraph.html#6365" class="Function">intervene-on</a> <a id="6412" href="Causality.CausalGraph.html#6412" class="Bound">S</a> <a id="6414" class="Symbol">=</a> <a id="6416" href="Causality.Data.Graph.html#2464" class="Function">filter-edges</a> <a id="6429" class="Symbol">λ{</a> <a id="6432" class="Symbol">(_</a> <a id="6435" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6437" href="Causality.CausalGraph.html#6437" class="Bound">to</a><a id="6439" class="Symbol">)</a> <a id="6441" class="Symbol">→</a> <a id="6443" href="Relation.Nullary.Decidable.Core.html#2517" class="Function">¬?</a> <a id="6446" class="Symbol">(</a><a id="6447" href="Causality.CausalGraph.html#6437" class="Bound">to</a> <a id="6450" href="Data.Fin.Subset.Properties.html#3629" class="Function Operator">∈?</a> <a id="6453" href="Causality.CausalGraph.html#6412" class="Bound">S</a><a id="6454" class="Symbol">)</a> <a id="6456" class="Symbol">}</a>
    <a id="6462" class="Keyword">where</a> <a id="6468" class="Keyword">open</a> <a id="6473" class="Keyword">import</a> <a id="6480" href="Data.Fin.Subset.Properties.html" class="Module">Data.Fin.Subset.Properties</a> <a id="6507" class="Keyword">using</a> <a id="6513" class="Symbol">(</a><a id="6514" href="Data.Fin.Subset.Properties.html#3629" class="Function Operator">_∈?_</a><a id="6518" class="Symbol">)</a>
</pre>